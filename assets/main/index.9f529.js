window.__require=function e(t,i,a){function o(n,r){if(!i[n]){if(!t[n]){var l=n.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var h=i[n]={exports:{}};t[n][0].call(h.exports,function(e){return o(t[n][1][e]||e)},h,h.exports,e,t,i,a)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<a.length;n++)o(a[n]);return o}({BroadcastCell:[function(e,t,i){"use strict";cc._RF.push(t,"6a348oaKzBDPokIf73R3P4e","BroadcastCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("./Common/UIUtils"),n=e("./Common/PrefabPool"),{ccclass:r,property:l,menu:c}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.txtBroadcast=null,this.txtBigWin=null,this.txtMegaWin=null}onLoad(){o.noticeCenter.registAllNotice(this)}setShowText(e,t,i){0==t?(this.txtBroadcast.string=o.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string=o.LocalLang.get("game_broadcast_big_win",[s.UIUtils.getShortNumber(i)]),this.txtMegaWin.string=""):(this.txtBroadcast.string=o.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string="",this.txtMegaWin.string=o.LocalLang.get("game_broadcast_mega_win",[e,s.UIUtils.getShortNumber(i)])),cc.tween(this.node).delay(3).call(()=>{n.default.put(this.node)}).start()}};a([l(cc.Label)],h.prototype,"txtBroadcast",void 0),a([l(cc.Label)],h.prototype,"txtBigWin",void 0),a([l(cc.Label)],h.prototype,"txtMegaWin",void 0),h=a([r],h),i.default=h,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils"}],BroadcastData:[function(e,t,i){"use strict";cc._RF.push(t,"a24010QIg5H5YyoCppz8brV","BroadcastData"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.m_localNotices=["test001","test002"],this.m_pushNotices=new Array,this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0,this.m_localNotices=["test001","test002"],this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0}addPushNotice(e,t=1){this.m_pushNotices.push({notice:e,loop:t})}getCurNotice(){if(this.m_pushNotices.length>0){this.m_pushNoticeIndex=this.m_pushNoticeIndex>=this.m_pushNotices.length?0:this.m_pushNoticeIndex;let e=this.m_pushNotices[this.m_pushNoticeIndex];return e.loop--,0==e.loop?this.m_pushNotices.splice(this.m_pushNoticeIndex,1):this.m_pushNoticeIndex++,e.notice}return this.getLocalNotice()}getLocalNotice(){if(this.m_localNotices.length>0){this.m_localNoticeIndex=this.m_localNoticeIndex>=this.m_localNotices.length?0:this.m_localNoticeIndex;let e=this.m_localNotices[this.m_localNoticeIndex];return this.m_localNoticeIndex++,e}return""}},cc._RF.pop()},{}],ClickSoundComponent:[function(e,t,i){"use strict";cc._RF.push(t,"00bf4ztalhNVoWG4SmO7AfR","ClickSoundComponent");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MKIndex"),s=e("../../Business/Data/CommonDefine"),{ccclass:n,property:r}=cc._decorator;let l=class extends cc.Component{onLoad(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchNode,this)}onDestroy(){}onTouchNode(){0==this.node.getComponent(cc.Button).interactable?o.AudioEngine.playEffect(s.SoundList.BtnWrong):o.AudioEngine.playEffect(s.SoundList.Click)}};l=a([n],l),i.default=l,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../MKIndex":"MKIndex"}],CommonDefine:[function(e,t,i){"use strict";cc._RF.push(t,"9efc0rsiaVG/piSLAHE8XaR","CommonDefine"),Object.defineProperty(i,"__esModule",{value:!0}),i.SngAwardData=i.SngStructureData=i.SngRoomData=i.RecordData=i.SpriteList=i.SoundList=i.PrefabList=i.PointScoreArr=i.OriginalDesign=i.FlipTime=i.PlayerCardScale=i.PlayerNodeCardScale=i.DEAL_CARDS_COUNT=i.MAX_HAND_CARDS=i.TOTAL_CARDS_COUNT=i.MAX_PLAYERS=i.CardType=i.LangList=i.GameRound=i.GameStage=i.GameType=i.SceneType=i.UserType=void 0,function(e){e[e.Guest=1]="Guest",e[e.Account=2]="Account"}(i.UserType||(i.UserType={})),function(e){e[e.Loading=0]="Loading",e[e.Lobby=1]="Lobby",e[e.Game=2]="Game"}(i.SceneType||(i.SceneType={})),function(e){e[e.Normal=0]="Normal",e[e.SNG=1]="SNG",e[e.MTT=2]="MTT"}(i.GameType||(i.GameType={})),function(e){e[e.Waiting=0]="Waiting",e[e.Prepare=1]="Prepare",e[e.Preflop=2]="Preflop",e[e.Action=3]="Action",e[e.Flop=4]="Flop",e[e.Turn=5]="Turn",e[e.River=6]="River",e[e.Compare=7]="Compare",e[e.Finish=8]="Finish"}(i.GameStage||(i.GameStage={})),function(e){e[e.PreFlop=0]="PreFlop",e[e.FlopRound=1]="FlopRound",e[e.TurnRound=2]="TurnRound",e[e.RiverRound=3]="RiverRound"}(i.GameRound||(i.GameRound={})),function(e){e[e.en=0]="en",e[e.hi=1]="hi"}(i.LangList||(i.LangList={})),function(e){e[e.Highcard=0]="Highcard",e[e.OnePair=1]="OnePair",e[e.TwoPairs=2]="TwoPairs",e[e.ThreeKind=3]="ThreeKind",e[e.Straight=4]="Straight",e[e.Flush=5]="Flush",e[e.Fullhouse=6]="Fullhouse",e[e.FourKind=7]="FourKind",e[e.StraightFlush=8]="StraightFlush",e[e.RoyalFlush=9]="RoyalFlush"}(i.CardType||(i.CardType={})),i.MAX_PLAYERS=9,i.TOTAL_CARDS_COUNT=52,i.MAX_HAND_CARDS=2,i.DEAL_CARDS_COUNT=2,i.PlayerNodeCardScale=.35,i.PlayerCardScale=.75,i.FlipTime=.2,i.OriginalDesign=cc.size(1280,720),i.PointScoreArr=[10,2,3,4,5,6,7,8,9,10,10,10,10];class a{}i.PrefabList=a,a.AwardLayer="Scenes/Game/award_layer",a.DropLayer="Scenes/Game/drop_layer",a.MenuLayer="Scenes/Game/menu_layer",a.PaytableLayer="Scenes/Game/paytable_layer",a.HelpLayer="Scenes/Game/help_layer",a.GameRecordLayer="Scenes/Lobby/game_record_layer",a.RecordCell="Scenes/Lobby/RecordCell",a.RecordPage="Scenes/Lobby/RecordPage",a.BroadCastCell="Scenes/Game/BroadCastCell",a.PlayerNode="Scenes/Game/PlayerNode",a.PokerNode="Scenes/Game/PokerNode",a.ResultLayer="Scenes/Game/result_layer",a.GameEntyuCell="Scenes/Lobby/GameEntyuCell",a.InforLayer="Scenes/Game/infor_layer",a.SngRoomListLayer="Scenes/Lobby/SngRoomListLayer",a.SngRoomCell="Scenes/Lobby/SngRoomCell",a.SngDetailLayer="Scenes/Lobby/SngDetailLayer",a.SngStructureCell="Scenes/Lobby/SngStructureCell",a.SngAwardCell="Scenes/Lobby/SngAwardCell",a.SngDetailInGameLayer="Scenes/Game/SngDetailInGameLayer",a.SngRankingCell="Scenes/Game/SngRankingCell";class o{}i.SoundList=o,o.Bgm="Sound/bgm_hall",o.Click="Sound/click",o.Win="Sound/win",o.BigWin="Sound/big_winner",o.DiceSpin="Sound/dice_spin",o.Chip="Sound/chip",o.BtnWrong="Sound/btn_wrong",o.Dealcard2="Sound/deal_card2",o.Button01="Sound/btn01",o.Button02="Sound/btn02",o.CardFlip1="Sound/card_flip1",o.CardFlip2="Sound/card_flip2",o.Alarm="Sound/alarm";class s{}i.SpriteList=s,s.GameEntey="Texture/Lobby/img_entry",i.RecordData=class{},i.SngRoomData=class{},i.SngStructureData=class{},i.SngAwardData=class{},cc._RF.pop()},{}],ConfigManager:[function(e,t,i){"use strict";cc._RF.push(t,"61ecdS7zDhJaIyXsWMOoGLM","ConfigManager"),Object.defineProperty(i,"__esModule",{value:!0});class a{static setUrlConfig(e){a.urlConfig=e}static setAppInfo(e){a.appInfo=e}}i.default=a,a.urlConfig=null,a.appInfo=null,cc._RF.pop()},{}],ConfirmDialog:[function(e,t,i){"use strict";cc._RF.push(t,"a824eCDWdpEqJh4R8QjqzfN","ConfirmDialog");var a,o=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:n}=cc._decorator;let r=a=class extends cc.Component{constructor(){super(...arguments),this.m_txtContent=null,this.m_btnOK=null,this.m_btnCancel=null,this.m_btnClose=null,this.m_okPos=null,this.m_callback=null,this.m_showCancel=null}onLoad(){this.m_okPos=this.m_btnOK.node.position}onDestroy(){}show(e,t,i){this.m_callback=t,this.m_txtContent.string=e,this.m_showCancel=void 0===i||i,this.m_showCancel?(this.m_btnCancel.node.active=!0,this.m_btnClose.node.active=!0,this.m_btnOK.node.position=this.m_okPos):(this.m_btnCancel.node.active=!1,this.m_btnClose.node.active=!1,this.m_btnOK.node.x=0)}onTouchOK(){this.m_callback&&this.m_callback(!0),this.closeSelf()}onTouchCancel(){this.m_callback&&this.m_callback(!1),this.closeSelf()}onTouchClose(){this.m_showCancel&&(this.m_callback&&this.m_callback(!1),this.closeSelf())}closeSelf(){this.node&&this.node.destroy()}static show(e,t,i,o){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/ConfirmDialog",cc.Prefab);if(null==e)return void cc.log("Please init ConfirmDialog defaultSkin on app init");a.defaultSkin=e}a.showWithFile(a.defaultSkin,e,t,i)}static showWithFile(e,t,i,o){let s=cc.director.getScene(),n=null,r=s.getChildByName("ConfirmDialog");null==r?((n=cc.instantiate(e).getComponent(a)).node.name="ConfirmDialog",s.addChild(n.node)):n=r.getComponent(a),n.show(t,i,o)}static hide(){let e=cc.director.getScene().getChildByName("ConfirmDialog");e&&e.destroy()}};r.defaultSkin=null,o([n(cc.Label)],r.prototype,"m_txtContent",void 0),o([n(cc.Button)],r.prototype,"m_btnOK",void 0),o([n(cc.Button)],r.prototype,"m_btnCancel",void 0),o([n(cc.Button)],r.prototype,"m_btnClose",void 0),r=a=o([s],r),i.default=r,cc._RF.pop()},{}],DataManager:[function(e,t,i){"use strict";cc._RF.push(t,"bb44c7d08JNtpYy1h8nVOKI","DataManager"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("./UserData"),o=e("./HomeData"),s=e("./GameData");class n{static init(){n.userData=new a.default,n.homeData=new o.HomeData,n.gameData=new s.GameData}}i.default=n,cc._RF.pop()},{"./GameData":"GameData","./HomeData":"HomeData","./UserData":"UserData"}],DropLayer:[function(e,t,i){"use strict";cc._RF.push(t,"3683b6O0P5B7bSFXLzzHfZu","DropLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("./Common/PopupBase"),r=e("./Common/UIUtils"),l=e("../Business/Logic/GameController"),{ccclass:c,property:h,menu:d}=cc._decorator;let u=class extends n.default{constructor(){super(...arguments),this.txtTips=null,this.btnCancel=null,this.btnOK=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}updateDisplay(){let e="\u20b9"+r.UIUtils.getShortNumber(s.default.gameData.getDropChips());this.txtTips.string=o.LocalLang.get("game_drop_tips",[e]),r.UIUtils.ButtonEvent(this.btnCancel,this.onTouchClose.bind(this)),r.UIUtils.ButtonEvent(this.btnOK,this.onTouchOkey.bind(this))}onTouchOkey(){o.commandCenter.emit(new l.CmdDrop),this.hide()}onTouchClose(){this.hide()}};a([h(cc.Label)],u.prototype,"txtTips",void 0),a([h(cc.Button)],u.prototype,"btnCancel",void 0),a([h(cc.Button)],u.prototype,"btnOK",void 0),u=a([c],u),i.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],FilterCell:[function(e,t,i){"use strict";cc._RF.push(t,"0f153SLIxZJAprC+YSThgRZ","FilterCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.FilterCell=void 0;const o=e("../../Business/Data/DataManager"),s=e("../Common/UIUtils"),{ccclass:n,property:r,menu:l}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.pointValueIdx=0,this.callback=null}onLoad(){s.UIUtils.NodeClickEvent(this.node,this.onToucFilterRecord.bind(this))}setData(e,t){this.pointValueIdx=e;let i=o.default.homeData.getPointValueList();this.txtPointValue.string=i[e].toString(),e=e>4?4:e,this.callback=t}onToucFilterRecord(){this.callback(this.pointValueIdx)}};a([r(cc.Label)],c.prototype,"txtPointValue",void 0),c=a([n,l("Lobby/FilterCell")],c),i.FilterCell=c,cc._RF.pop()},{"../../Business/Data/DataManager":"DataManager","../Common/UIUtils":"UIUtils"}],GameAction:[function(e,t,i){"use strict";cc._RF.push(t,"5725aL0vPtBNqkFplGAH0Ve","GameAction");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),l=e("./Common/UIUtils"),c=e("../Business/Logic/GameController"),h=e("./Common/PrefabPool"),d=e("./PokerNode"),u=e("./RaiseLayer"),m=e("./ShowLayer"),{ccclass:g,property:p,menu:f}=cc._decorator;let y=class extends cc.Component{constructor(){super(...arguments),this.btnFold=null,this.btnCall=null,this.btnRaise=null,this.btnAutoFold=null,this.btnAutoCheck=null,this.btnAutoCallAny=null,this.btnShowCards=null,this.txtBalance=null,this.txtBtnCall=null,this.txtBtnAutoCheck=null,this.txtBtnAutoCallAny=null,this.dealCardPos=null,this.playerCardNode=null,this.tableCardNode=null,this.raiseLayer=null,this.showLayer=null,this.gameData=null,this.handPokerList=[],this.cardWidth=0,this.tableCardGap=0,this.handCardPosList=[],this.handCardAngleList=[],this.tableCardList=[]}onLoad(){o.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.initUI(),this.resetGameStage(),this.clearGame()}initUI(){this.handPokerList=[];for(let e=0;e<n.MAX_HAND_CARDS;e++){let e=h.default.get(n.PrefabList.PokerNode);e.setParent(this.playerCardNode),e.setPosition(0,0),e.active=!1,this.handPokerList.push(e.getComponent(d.default))}this.cardWidth=this.handPokerList[0].node.width*n.PlayerCardScale,this.tableCardGap=20+this.cardWidth,this.handPokerList.forEach((e,t)=>{this.handCardPosList[t]=new cc.Vec3(this.cardWidth/3*t,0),this.handCardAngleList[t]=new cc.Vec3(this.cardWidth/3*t,0)});for(let e=0;e<5;e++){let e=h.default.get(n.PrefabList.PokerNode);e.setParent(this.tableCardNode),e.setPosition(0,0),e.active=!1,e.scale=n.PlayerCardScale,this.tableCardList.push(e.getComponent(d.default))}this.btnFold.node.on("click",this.onTouchFold,this),this.btnCall.node.on("click",this.onTouchCall,this),this.btnRaise.node.on("click",this.onTouchRaise,this),this.btnAutoFold.node.on("toggle",this.onTouchAutoFold,this),this.btnAutoCheck.node.on("toggle",this.onTouchAutoCheck,this),this.btnAutoCallAny.node.on("toggle",this.onTouchAutoCallAny,this),this.btnShowCards.node.on("click",this.onTouchShowCards,this),this.raiseLayer.setCloseCallback(()=>{this.btnRaise.interactable=!0}),this.showLayer.setCloseCallback(()=>{this.gameData.getGameStage()==n.GameStage.Finish&&o.commandCenter.emit(new c.CmdShowCard)})}resizeUI(){}componentReplace(e){let t=cc.view.getDesignResolutionSize();e.x=e.x*t.width/n.OriginalDesign.width,e.y=e.y*t.height/n.OriginalDesign.height}clearGame(){this.clearHandCards(),this.clearTableCards(),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1,this.showLayer.node.active=!1,this.btnAutoFold.isChecked=!1,this.btnAutoCallAny.isChecked=!1,this.btnAutoCheck.isChecked=!1,this.btnShowCards.node.active=!1}clearHandCards(){this.handPokerList.forEach(e=>{e.node.active=!1,e.node.x=0,e.node.y=0,e.node.scale=1,e.node.stopAllActions(),e.setPoker(-1)})}clearTableCards(){this.tableCardList.forEach(e=>{e.node.active=!1,e.node.x=0,e.node.stopAllActions(),e.setPoker(-1)})}resetGameStage(){}onTouchFold(){o.commandCenter.emit(new c.CmdFold),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1}onTouchCall(){o.commandCenter.emit(new c.CmdCall),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1}onTouchCheck(){}onTouchRaise(){if(0==this.raiseLayer.node.active)return this.raiseLayer.node.active=!0,void(this.gameData.getSelfPlayer().getChips()<this.gameData.getRaiseLimit()&&this.gameData.getSelfPlayer().getChips()!=this.gameData.getSelfPlayer().getRaiseChip()?this.btnRaise.interactable=!1:this.btnRaise.interactable=!0);if(1==this.raiseLayer.node.active){let e=new c.CmdRaise;e.chip=this.gameData.getSelfPlayer().getRaiseChip(),o.commandCenter.emit(e),this.raiseLayer.node.active=!1}}onTouchShowCards(){0==this.showLayer.node.active&&(this.showLayer.node.active=!0)}onTouchAutoFold(){this.btnAutoCheck.isChecked=!1,this.btnAutoCallAny.isChecked=!1}onTouchAutoCheck(){this.btnAutoFold.isChecked=!1,this.btnAutoCallAny.isChecked=!1}onTouchAutoCallAny(){this.btnAutoFold.isChecked=!1,this.btnAutoCheck.isChecked=!1}dealCards(){let e=this.gameData.getHandCardData().getHandCardList(),t=cc.tween(this.playerCardNode);for(let i=0;i<n.MAX_HAND_CARDS;i++){let e=this.handPokerList[i];e.setPoker(-1),e.node.stopAllActions(),t.call(()=>{let t=this.dealCardPos.parent.convertToWorldSpaceAR(this.dealCardPos.position),a=this.playerCardNode.convertToNodeSpaceAR(t),o=this.handCardPosList[i];e.node.active=!0,l.UIUtils.cardFly(e.node,a,o,n.PlayerCardScale,.5,10-20*i)}),t.delay(.5)}this.handPokerList.forEach((i,a)=>{t.call(()=>{l.UIUtils.flipToFront(i.node,.5,()=>{i.setPoker(e[a])})})}),t.start()}showCard(){let e=this.gameData.getSelfPlayer().getHandCards();this.handPokerList.forEach((t,i)=>{t.setPoker(-1),l.UIUtils.flipToFront(t.node,.5,()=>{t.setPoker(e[i])})})}dealTableCard1st(e){let t=s.default.gameData.getTableCards(),i=this.cardWidth/2,a=this.tableCardGap,o=cc.tween(this.tableCardNode);t.forEach((e,t)=>{o.call(()=>{let o=this.tableCardList[t];o.node.active=!0,o.node.x=i,o.setPoker(-1),cc.tween(o.node).to(.5,{x:i+a*t},{easing:"smooth"}).start(),l.UIUtils.flipToFront(o.node,.5,()=>{this.tableCardList[t].setPoker(e)})})}),o.delay(.5).call(()=>{e()}).start()}dealTableCard2nd(e,t){let i=s.default.gameData.getTableCards()[e],a=this.cardWidth/2+this.tableCardGap*e,o=this.tableCardList[e];o.setPoker(-1),o.node.active=!0,o.node.x=a,l.UIUtils.flipToFront(o.node,.5,()=>{o.setPoker(i),t()})}setAutoBtnState(e){if(this.btnAutoFold.node.active=e,this.btnAutoCheck.node.active=e,this.btnAutoCallAny.node.active=e,e){let e=this.gameData.getSelfPlayer().getChips(),t=this.gameData.getNowMaxBet()-this.gameData.getSelfPlayer().getRoundBet();t>0?t>=e?(this.txtBtnAutoCallAny.string="All in",this.btnAutoCheck.node.active=!1):(this.txtBtnAutoCheck.string="CALL "+l.UIUtils.getShortNumber(t),this.txtBtnAutoCallAny.string="Call Any"):0==t&&(this.txtBtnAutoCheck.string="CHECK")}}setActionBtnState(e){if(this.btnFold.node.active=e,this.btnCall.node.active=e,this.btnRaise.node.active=e,this.btnRaise.interactable=e,e||(this.raiseLayer.node.active=!1),e){let e=this.gameData.getSelfPlayer(),t=e.getChips(),i=this.gameData.getNowMaxBet()-e.getRoundBet();i>0?i>=t?(this.txtBtnCall.string="All in",this.btnRaise.node.active=!1):(this.txtBtnCall.string="CALL "+l.UIUtils.getShortNumber(i),this.gameData.getCanMaxBet(!0)==i&&(this.btnRaise.node.active=!1)):0==i&&(this.txtBtnCall.string="CHECK")}}setAutoBtnCheck(e){this.btnAutoFold.isChecked=e,this.btnAutoCheck.isChecked=e,this.btnAutoCallAny.isChecked=e}updateBtnState(){let e=this.gameData.getGameStage();this.gameData.getSelfPlayer().isPlaying()?this.gameData.getSelfPlayer().isFold()?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):this.gameData.getSelfPlayer().isAllin()?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Waiting?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Prepare?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Action?this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.setAutoBtnState(!1),this.setActionBtnState(!0)):(this.setAutoBtnState(!0),this.setActionBtnState(!1)):e==n.GameStage.Flop?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Turn?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.River?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Compare?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Finish&&(this.showLayer.node.active=!1,this.setAutoBtnState(!1),this.setActionBtnState(!1)):(this.setAutoBtnState(!1),this.setActionBtnState(!1))}showCardBtnStatu(e){this.gameData.getSelfPlayer().isPlaying()?this.btnShowCards.node.active=e:this.btnShowCards.node.active=!1}highlightCards(e){this.handPokerList.forEach(e=>{e.setHighlight(!1)}),this.tableCardList.forEach(e=>{e.setHighlight(!1)}),e.forEach(e=>{this.handPokerList.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)}),this.tableCardList.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})}updateDropChips(){}updateBalance(){this.txtBalance.string=l.UIUtils.getShortNumber(s.default.userData.getBalance())}showHandCardMask(){this.handPokerList.forEach(e=>{e.setMask(!0)})}onNtcGameInfo(e){if(this.gameData.getSelfSeat()<0||!this.gameData.getSelfPlayer().isPlaying())return;let t=this.gameData.getGameStage();t!=n.GameStage.Prepare&&t!=n.GameStage.Waiting&&(this.updateBtnState(),this.updateDropChips())}onNtcResetGame(e){this.clearGame()}onNtcStandUp(e){this.gameData.getSelfSeat()}onNtcDealCards(e){this.clearGame()}onNtcWaitAction(e){if(this.updateBtnState(),e.seat==this.gameData.getSelfSeat()){let e=this.gameData.getSelfPlayer().getRoundBet(),t=this.gameData.getNowMaxBet();this.btnAutoFold.isChecked&&(e<t?this.onTouchFold():this.onTouchCall()),this.btnAutoCheck.isChecked&&this.onTouchCall(),this.btnAutoCallAny.isChecked&&this.onTouchCall(),this.setAutoBtnCheck(!1)}}onNtcTableShow1st(e){this.updateBtnState(),this.setAutoBtnCheck(!1)}onNtcTableShow2nd(e){this.updateBtnState(),this.setAutoBtnCheck(!1)}onNtcRiverRoundEnd(e){this.updateBtnState()}onNtcFold(e){e.seat==this.gameData.getSelfSeat()&&(this.showHandCardMask(),this.updateBtnState(),this.showCardBtnStatu(!0))}onNtcRaise(e){this.btnAutoCheck.isChecked=!1}onNtcGameEnd(e){this.gameData.getSelfPlayer().isFold()||this.showCardBtnStatu(!0),this.updateBtnState()}onNtcShowCard(e){e.seat.forEach(e=>{this.gameData.getSelfSeat()==e&&(this.showCard(),this.showCardBtnStatu(!1))})}onNtcShowWinner(e){this.highlightCards(e.cards),e.seat!=this.gameData.getSelfSeat()&&this.showHandCardMask()}onNtcShowMultiWinner(e){this.highlightCards(e.cards),e.seat[0]!=this.gameData.getSelfSeat()&&this.showHandCardMask()}};a([p({type:cc.Button,displayName:""})],y.prototype,"btnFold",void 0),a([p({type:cc.Button,displayName:""})],y.prototype,"btnCall",void 0),a([p({type:cc.Button,displayName:""})],y.prototype,"btnRaise",void 0),a([p({type:cc.Toggle,displayName:""})],y.prototype,"btnAutoFold",void 0),a([p({type:cc.Toggle,displayName:""})],y.prototype,"btnAutoCheck",void 0),a([p({type:cc.Toggle,displayName:""})],y.prototype,"btnAutoCallAny",void 0),a([p({type:cc.Button,displayName:""})],y.prototype,"btnShowCards",void 0),a([p(cc.Label)],y.prototype,"txtBalance",void 0),a([p(cc.Label)],y.prototype,"txtBtnCall",void 0),a([p(cc.Label)],y.prototype,"txtBtnAutoCheck",void 0),a([p(cc.Label)],y.prototype,"txtBtnAutoCallAny",void 0),a([p({type:cc.Node,displayName:"\u767c\u724c\u4f4d\u7f6e"})],y.prototype,"dealCardPos",void 0),a([p({type:cc.Node,displayName:""})],y.prototype,"playerCardNode",void 0),a([p({type:cc.Node,displayName:""})],y.prototype,"tableCardNode",void 0),a([p(u.default)],y.prototype,"raiseLayer",void 0),a([p(m.default)],y.prototype,"showLayer",void 0),a([o.onNotice(r.NtcGameInfo)],y.prototype,"onNtcGameInfo",null),a([o.onNotice(r.NtcResetGame)],y.prototype,"onNtcResetGame",null),a([o.onNotice(r.NtcStandUp)],y.prototype,"onNtcStandUp",null),a([o.onNotice(r.NtcDealCards)],y.prototype,"onNtcDealCards",null),a([o.onNotice(r.NtcWaitAction)],y.prototype,"onNtcWaitAction",null),a([o.onNotice(r.NtcTableShow1st)],y.prototype,"onNtcTableShow1st",null),a([o.onNotice(r.NtcTableShow2nd)],y.prototype,"onNtcTableShow2nd",null),a([o.onNotice(r.NtcRiverRoundEnd)],y.prototype,"onNtcRiverRoundEnd",null),a([o.onNotice(r.NtcFold)],y.prototype,"onNtcFold",null),a([o.onNotice(r.NtcRaise)],y.prototype,"onNtcRaise",null),a([o.onNotice(r.NtcGameEnd)],y.prototype,"onNtcGameEnd",null),a([o.onNotice(r.NtcShowCard)],y.prototype,"onNtcShowCard",null),a([o.onNotice(r.NtcShowWinner)],y.prototype,"onNtcShowWinner",null),a([o.onNotice(r.NtcShowMultiWinner)],y.prototype,"onNtcShowMultiWinner",null),y=a([g],y),i.default=y,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode","./RaiseLayer":"RaiseLayer","./ShowLayer":"ShowLayer"}],GameController:[function(e,t,i){"use strict";cc._RF.push(t,"b33e4rPpodINYZCfe4x62BN","GameController");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.GameController=i.CmdDrop=i.CmdQuitGame=i.CmdShowCard=i.CmdRaise=i.CmdCall=i.CmdFold=i.CmdSwitchTable=i.CmdIntoGame=i.CmdTestBlindLevelUp=i.CmdTestRiverRound=i.CmdTestJudge=i.CmdTestAction=i.CmdTestTable2nd=i.CmdTestTable1st=i.CmdTestDealCard=i.CmdTestKickNoMoney=i.CmdTestStart=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),r=e("./GameNotice"),l=e("../NetWork/NetworkManager"),c=e("./SceneController"),h=e("../Data/PokerData"),d=e("../../Scenes/Common/MessageView");let u=class{};u=a([o.createCommand],u),i.CmdTestStart=u;let m=class{};m=a([o.createCommand],m),i.CmdTestKickNoMoney=m;let g=class{};g=a([o.createCommand],g),i.CmdTestDealCard=g;let p=class{};p=a([o.createCommand],p),i.CmdTestTable1st=p;let f=class{constructor(e){this.index=-1,this.index=e}};f=a([o.createCommand],f),i.CmdTestTable2nd=f;let y=class{constructor(e){this.seat=-1,this.seat=e}};y=a([o.createCommand],y),i.CmdTestAction=y;let C=class{};C=a([o.createCommand],C),i.CmdTestJudge=C;let S=class{};S=a([o.createCommand],S),i.CmdTestRiverRound=S;let b=class{};b=a([o.createCommand],b),i.CmdTestBlindLevelUp=b;let P=class{constructor(e){this.gameCode="",this.gameCode=e}};P=a([o.createCommand],P),i.CmdIntoGame=P;let _=class{};_=a([o.createCommand],_),i.CmdSwitchTable=_;let D=class{};D=a([o.createCommand],D),i.CmdFold=D;let v=class{};v=a([o.createCommand],v),i.CmdCall=v;let L=class{constructor(){this.chip=0}};L=a([o.createCommand],L),i.CmdRaise=L;let N=class{};N=a([o.createCommand],N),i.CmdShowCard=N;let w=class{};w=a([o.createCommand],w),i.CmdQuitGame=w;let R=class{};R=a([o.createCommand],R),i.CmdDrop=R;class B extends o.Controller{constructor(){super(),this.m_socket=null,this.pokerList=[],this.setName("GameController"),o.noticeCenter.registAllNotice(this),o.commandCenter.registAllCommand(this),this.m_socket=l.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.gameData=s.default.gameData}onExit(){o.noticeCenter.targetOff(this),o.commandCenter.targetOff(this)}onCmdTestKickNoMoney(e){let t=this.gameData.getGameType();this.gameData.getPlayerList().forEach(e=>{if(t==n.GameType.SNG){if(0==e.getChips()&&e.isPlaying()){let t={};t.seat=e.getSeat();let i=this.gameData.getPlayerSeatList().length;t.ranking=i,this.onNetDisusePlayer(t)}}else if(t==n.GameType.Normal&&e.getChips()<this.gameData.getBlind()&&e.getSeat()!=this.gameData.getSelfSeat()&&e.isPlaying()){let t={player:{}};t.player.index=e.getSeat(),this.onNetStandUp(t)}});let i=0;if(t==n.GameType.SNG){let e=this.gameData.getPlayerList().filter(e=>e.getChips()>0);1==(i=e.length)&&(this.gameData.getAwardPlayers().push(e[0].getSeat()),e[0].getSeat()==this.gameData.getSelfSeat()&&this.gameData.getSelfPlayer().setRanking(1))}let a=cc.tween(this).delay(.5);if(this.gameData.getGameType()!=n.GameType.SNG&&a.call(()=>{for(let e=0;e<n.MAX_PLAYERS;e++)if(this.gameData.getPlayerList()[e],null==this.gameData.getPlayerBySeat(e)){let t={player:{}};t.player.index=e,t.player.canPlay=!0,t.player.isPlaying=!0,t.player.chip=o.Utils.randRange(1e3,4e3),this.onNetSitDown(t)}}),a.delay(1.5),t==n.GameType.SNG&&1==i){let e=this.gameData.getAwardPlayers(),t=this.gameData.getSngRoomData().award,i={};i.winner="Player "+e[e.length-1],i.winnerAward=t[0].award,i.selfRank=this.gameData.getSelfRanking();let a=0;a=i.selfRank>t.length?0:t[i.selfRank-1].award,i.selfAward=a,i.chips=s.default.userData.getBalance()+a,this.onNetTournamentsEnd(i)}else a.call(()=>{o.commandCenter.emit(new g)});a.start()}onCmdTestStart(e){let t={},i=1;i=this.gameData.getGameType()==n.GameType.SNG?5:8,cc.tween(this).call(()=>{(t={}).player={};let e=0;for(let a=0;a<i;a++)e==this.gameData.getSelfSeat()&&(e+=1),t.player.index=e,t.player.canPlay=!0,t.player.isPlaying=!0,t.player.name="Player "+a,this.gameData.getGameType()==n.GameType.SNG?t.player.chip=this.gameData.getSngRoomData().startingChip:t.player.chip=o.Utils.randRange(1e3,4e3),this.onNetSitDown(t),e+=1}).delay(.5).call(()=>{(t={}).timeout=1e3,this.onNetReady(t)}).delay(1).call(()=>{o.commandCenter.emit(new g)}).start()}onCmdTestDealCard(e){this.gameData.resetGameData();let t={};this.pokerList=[];for(let o=0;o<52;o++)this.pokerList.push(o);let i=s.default.gameData.getPlayerList(),a=[];i.forEach(e=>{if(e.getSeat()>-1){let t=[];for(let e=0;e<2;e++){let e=o.Utils.randRange(0,this.pokerList.length-1),i=this.pokerList[e];this.pokerList.splice(e,1),t.push(i)}e.setHandCards(t),a.push(t.slice(0))}else a.push([])}),t.timeout=1e4,t.myPokers=this.gameData.getSelfPlayer().getHandCards().slice(0);let r=this.gameData.getPlayerSeatList(),l=o.Utils.randRange(0,r.length-1),c=r[l],h=l-1<0?r[r.length-1]:r[l-1],d=l+1==r.length?r[0]:r[l+1];t.index=d,t.bBlindSeat=c;let u=this.gameData.getPlayerBySeat(c).getChips();t.sBlindSeat=h;let m=this.gameData.getPlayerBySeat(h).getChips();if(t.blind=this.gameData.getBlind(),this.gameData.getGameType()==n.GameType.SNG){let e=this.gameData.getNowBlindData();t.ante=e.ante,t.blind=e.blinds;let i=0,a=[];this.gameData.getPlayerList().forEach(e=>{if(e.getSeat()>-1&&e.getChips()>0){let o=0,s=0;e.getChips()>t.ante?(i+=t.ante,o=e.getChips()-t.ante,s=t.ante,e.getSeat()==c&&(u-=t.ante),e.getSeat()==h&&(m-=t.ante)):(i+=e.getChips(),o=0,s=e.getChips(),e.getSeat()==c&&(u=0),e.getSeat()==h&&(m=0));let n={};n.seat=e.getSeat(),n.chip=o,n.betSum=s,a.push(n),e.setChips(o)}}),t.tableChip=i,t.playerList=a}let g=t.blind,p=t.blind/2;if(2==r.length){if(u<g||m<p){let e=Math.min(u,m);g=e,p=e}}else{let e=this.gameData.getCanMaxBet();g=Math.min(g,e),p=Math.min(p,e)}u>g?u-=g:(g=u,u=0),m>p?m-=p:(p=m,m=0),t.bBlindChip=u,t.sBlindChip=m,t.bBlindBet=g,t.sBlindBet=p,t.testPokerList=a.slice(0),this.onNetDealCards(t)}onCmdTestTable1st(e){let t={tableCards:[]};for(let a=0;a<3;a++){let e=o.Utils.randRange(0,this.pokerList.length-1),i=this.pokerList[e];this.pokerList.splice(e,1),t.tableCards.push(i)}let i=0;this.gameData.getPlayerList().forEach(e=>{i+=e.getRoundBet()}),t.chips=this.gameData.getTableChips()+i,this.onNetTableShow1st(t)}onCmdTestTable2nd(e){let t={},i=o.Utils.randRange(0,this.pokerList.length-1),a=this.pokerList[i];this.pokerList.splice(i,1),t.tableCard=a,e.index;let s=0;this.gameData.getPlayerList().forEach(e=>{s+=e.getRoundBet()}),t.chips=s+this.gameData.getTableChips(),t.index=e.index,this.onNetTableShow2nd(t)}onCmdTestAction(e){let t={},i=e.seat;i=this.gameData.getNextActiveSeat();let a=this.gameData.getPlayerList().filter(e=>e.isPlaying());this.gameData.setActiveSeat(i),a.filter(e=>e.canAction()).length>1?(t.index=this.gameData.getActiveSeat(),t.timeout=1e4,this.onNetWaitAction(t)):o.commandCenter.emit(new C)}onCmdTestBlindLevelUp(e){let t=this.gameData.getNextBlindData(),i={};i.time=6e4*t.minutes,i.level=t.level,this.onNetBlindLevelUp(i)}onCmdIntoGame(e){this.sendIntoGame(e.gameCode)}sendIntoGame(e){let t={};t.gameCode=e,cc.log("[send] IntoRoom = "+JSON.stringify(t)),this.m_socket.send("INTO_ROOM",t);let i=n.GameType.Normal;e.includes("sng")&&(i=n.GameType.SNG);let a=e.slice(e.length-1),r=s.default.homeData.getSngRoomList()[a],l={status:{}};if(l.status.state=n.GameStage.Prepare,l.status.nowPlayerIndex=1,l.status.type=i,i==n.GameType.SNG){l.room={},l.room.roomName=r.roomName,l.room.fee=r.fee,l.room.firstAward=r.firstAward,l.room.secondAward=r.firstAward/2,l.room.starting=r.startingChip,l.room.levelUpTime=6e4*r.structure[0].minutes;let e=[];r.structure.forEach(t=>{let i={};i.level=t.level,i.blinds=t.blinds,i.ante=t.ante,i.minutes=t.minutes,e.push(i)}),l.room.structure=e;let t=[];r.award.forEach(e=>{let i={};i.award=e.award,i.ranking=e.ranking,t.push(i)}),l.room.award=t,l.room.level=1,l.lobby={},l.lobby.chips=s.default.userData.getBalance()-l.room.fee}l.players=[],l.my={},i==n.GameType.SNG?l.my.index=o.Utils.randRange(0,5):l.my.index=o.Utils.randRange(0,8),l.my.playing=!0;let c={};if(c.index=l.my.index,c.canPlay=!0,l.players.push(c),l.start={},i==n.GameType.SNG){let e=r.structure[0];l.start.baseBet=e.blinds,l.start.ante=e.ante,l.start.balance=l.room.starting}else l.start.baseBet=20,l.start.balance=5e6;this.onAckIntoGame(l)}onAckIntoGame(e){let t=e;cc.log("IntoRoomRsp = "+JSON.stringify(t)),this.setGameDataFromMsg(t),o.noticeCenter.emit(new r.NtcGameInfo)}setGameDataFromMsg(e){let t=this.gameData;t.resetAllData(),t.setGameStage(e.status.state),t.setStageLeftTime(e.status.timeout/1e3),t.setGameType(e.status.type);let i=t.getPlayerList();for(let a=0;a<e.players.length;++a){let t=e.players[a],o=i[t.index];o&&this.setPlayerFromMsg(o,t)}if(t.setSelfSeat(e.my.index),t.setActiveSeat(e.status.nowPlayerIndex),t.setBlind(e.start.baseBet),t.setAnte(e.start.ante),t.getSelfPlayer().setChips(e.start.balance),t.getSelfPlayer().setPlaying(e.my.playing),t.getSelfPlayer().setNickName(s.default.userData.getNickName()),e.status.state>n.GameStage.Prepare&&e.my.playRoundNum,this.gameData.getGameType()==n.GameType.SNG){let i=new n.SngRoomData;i.fee=e.room.fee,i.firstAward=e.room.firstAward,i.secondAward=e.room.secondAward,i.startingChip=e.room.starting,i.roomName=e.room.roomName;let a=[];e.room.structure.forEach(e=>{let t=new n.SngStructureData;t.level=e.level,t.blinds=e.blinds,t.ante=e.ante,t.minutes=e.minutes,a.push(t)}),i.structure=a;let o=[];e.room.award.forEach(e=>{let t=new n.SngAwardData;t.ranking=e.ranking,t.award=e.award,o.push(t)}),i.award=o,t.setSngRoomData(i),t.setBlindLevel(e.room.level),t.setLevelUpTime(e.room.levelUpTime/1e3),s.default.userData.setBalance(e.lobby.chips)}}setPlayerFromMsg(e,t){e.setNickName(t.name),e.setSeat(t.index),e.setChips(t.chip),e.setPlaying(t.isPlaying)}BackToLobby(){d.default.hide(),o.commandCenter.emit(new c.CmdScene(n.SceneType.Lobby))}onNetSitDown(e){let t=e;cc.log("[receive] PushUpTable = "+JSON.stringify(t)),this.setSitDownData(t)}setSitDownData(e){let t=this.gameData.getPlayerList()[e.player.index];if(!t)return void cc.log("error, cannot find player");this.setPlayerFromMsg(t,e.player);let i=new r.NtcSitDown;i.seat=t.getSeat(),o.noticeCenter.emit(i)}onNetStandUp(e){let t=e;cc.log("[receive] PushDownTable = "+JSON.stringify(t)),this.setStandUpData(t)}setStandUpData(e){let t=e.player.index,i=this.gameData,a=i.getPlayerBySeat(e.player.index);if(!a)return void cc.log("error, cannot find player");a.resetAllData(),t==i.getSelfSeat()&&i.setSelfSeat(-1);let s=new r.NtcStandUp;s.seat=t,o.noticeCenter.emit(s)}onNetReady(e){let t=e;cc.log("[receive] Ready = "+JSON.stringify(t)),this.gameData.setStageLeftTime(t.timeout/1e3),this.gameData.setGameStage(n.GameStage.Prepare);let i=new r.NtcPrepare;o.noticeCenter.emit(i)}onNetDealCards(e){let t=e;cc.log("[receive] Deal Cards = "+JSON.stringify(t));let i=this.gameData;i.resetGameData(),i.setGameStage(n.GameStage.Preflop),i.setGameRound(n.GameRound.PreFlop),i.setStageLeftTime(t.timeout/1e3),i.setActiveSeat(t.index),this.gameData.getGameType()==n.GameType.SNG&&(i.setBlind(t.blind),i.setAnte(t.ante));let a=i.getPlayerList();for(let o of a)o.getSeat();i.getPlayerList().forEach((e,a)=>{e.getSeat()!=i.getSelfSeat()&&e.setHandCards(t.testPokerList[a])}),this.gameData.getHandCardData().dealCards(t.myPokers),this.gameData.getSelfPlayer().setHandCards(t.myPokers);let s=new r.NtcDealCards;s.bigBlindSeat=t.bBlindSeat,s.smallBlindSeat=t.sBlindSeat;let l=cc.tween(this);l.call(()=>{o.noticeCenter.emit(s)}),t.ante>0&&(t.playerList.forEach(e=>{l.call(()=>{let t=i.getPlayerBySeat(e.seat);t.setChips(e.chip),t.setBetSum(e.betSum);let a=new r.NtcBetChip;a.seat=e.seat,a.chips=e.betSum,0==t.getChips()&&t.setAllin(!0),o.noticeCenter.emit(a)})}),l.call(()=>{o.noticeCenter.emit(new r.NtcUpdateBalance)}),l.delay(.5),l.call(()=>{this.gameData.setTableChips(t.tableChip),o.noticeCenter.emit(new r.NtcCollectAnte)}),l.delay(1));let c=t.bBlindBet>t.sBlindBet?t.bBlindBet:t.sBlindBet;i.setBigBlindSeat(t.bBlindSeat),i.setSmallBlindSeat(t.sBlindSeat);let h=i.getPlayerBySeat(t.bBlindSeat);h.setRoundBet(t.bBlindBet);let d=i.getPlayerBySeat(t.sBlindSeat);d.setRoundBet(t.sBlindBet),i.setNowMaxBet(c),l.call(()=>{h.setChips(t.bBlindChip),d.setChips(t.sBlindChip),h.setBetSum(h.getBetSum()),d.setBetSum(d.getBetSum()),0==h.getChips()&&h.setAllin(!0),0==d.getChips()&&d.setAllin(!0);let e=new r.NtcBetChip;e.seat=t.bBlindSeat,e.chips=t.bBlindBet,o.noticeCenter.emit(e);let i=new r.NtcBetChip;i.seat=t.sBlindSeat,i.chips=t.sBlindBet,o.noticeCenter.emit(i),o.noticeCenter.emit(new r.NtcUpdateBalance)}).start()}onCmdSwitchTable(e){cc.log("[send] SwitchTable = "+JSON.stringify(void 0)),this.m_socket.send("SWITCH_TABLE",void 0)}onAckSwitchTable(e){cc.log("[receive] SwitchTableRsp code = "+e.state.code);let t=e;cc.log("ChangeTableRsp = "+JSON.stringify(t)),this.gameData.resetAllData(),o.noticeCenter.emit(new r.NtcResetGame),this.setGameDataFromMsg(t),o.noticeCenter.emit(new r.NtcGameInfo)}onCmdTestRiverRound(e){let t=this.gameData.getPlayerList().filter(e=>e.isPlaying()),i={players:[]};t.forEach(e=>{if(!e.isFold()){let t={};t.index=e.getSeat(),e.getSeat(),e.getSeat(),t.cards=e.getHandCards(),i.players.push(t);let a=this.gameData.getTableCards(),o=this.gameData.getHandCardData().getCardsType(a,e.getHandCards());e.setCardTypeData(o)}});let a=t.filter(e=>{if(e.getSeat()>-1&&!e.isFold())return e}).sort((e,t)=>{let i=e.getCardTypeData(),a=t.getCardTypeData(),o=i.compare,s=a.compare;if(i.type!=a.type)return a.type-i.type;for(let n=0;n<o.length;n++)if(s[n]!=o[n])return h.PokerData.pokerCompare(a.compare[n])-h.PokerData.pokerCompare(i.compare[n])});a.forEach(()=>{});let o=0;t.forEach(e=>{o+=e.getRoundBet(),e.setBetSum(e.getBetSum()+e.getRoundBet())}),i.chips=o+this.gameData.getTableChips();let s=[];t.forEach(e=>{let t=e.getBetSum();s.includes(t)||s.push(t)}),s.sort((e,t)=>t-e);let n=a[0].getBetSum(),r=[],l=[],c=0;if(n<s[0])for(let h=0;h<a.length;h++){let e=a[h],i=e.getBetSum();if(i<c)continue;let o=t.filter(e=>e.getBetSum()>=i),s=t.filter(e=>e.getBetSum()<i),n=i*o.length;if(s.forEach(e=>{n+=e.getBetSum()}),l.forEach(e=>{n-=e}),!(n>0))break;r.push(e.getSeat()),l.push(n),c=i}if(r.length>0){i.multiWin=!0,i.winSeats=r,i.winChips=l;let e=[];r.forEach((t,i)=>{let a=this.gameData.getPlayerBySeat(t).getChips()+l[i];e.push(a)}),i.winChip=e}else i.multiWin=!1,i.winIndex=a[0].getSeat(),i.winChip=a[0].getChips()+i.chips;this.onNetRiverRoundEnd(i)}onCmdTestJudge(e){let t=this.gameData.getActiveSeat()+1,i=this.gameData.getPlayerList().filter(e=>e.isPlaying()),a=this.gameData.getNextActiveSeat(),s=i.filter(e=>{if(e.getSeat()>-1)return e.isAllin()}),r=i.filter(e=>{if(e.getSeat()>-1)return e.canAction()}),l=i.filter(e=>{if(e.getSeat()>-1)return!e.isFold()&&!e.isAllin()}),c=i.filter(e=>{if(e.getSeat()>-1)return e.isFold()}),h=!1;if(r.length>0&&(h=!0),1==r.length&&c.length==i.length-1&&(h=!1),s.length>0&&1==r.length&&r[0].getRoundBet()==this.gameData.getNowMaxBet()&&1==l.length&&(h=!1),h){t=a;let e={};e.index=t,e.timeout=1e4,this.onNetWaitAction(e)}else cc.tween(this).delay(.3).call(()=>{if(i.filter(e=>{if(e.getSeat()>-1)return e.isFold()}).length==i.length-1){let e={},t=0;i.forEach(e=>{t+=e.getRoundBet()});let a=i.find(e=>{if(!e.isFold())return e});if(e.chips=t+this.gameData.getTableChips(),e.winIndex=a.getSeat(),e.winChip=a.getChips()+e.chips,this.onNetGameEnd(e),a.getSeat()!=this.gameData.getSelfPlayer().getSeat()&&o.Utils.randRange(1,100)>30){let e={players:[]},t={};t.index=a.getSeat(),t.cards=this.gameData.getPlayerBySeat(t.index).getHandCards(),e.players.push(t),this.onNetShowCard(e)}return}let e=this.gameData.getGameRound();e==n.GameRound.PreFlop?o.commandCenter.emit(new p):e==n.GameRound.FlopRound?o.commandCenter.emit(new f(3)):e==n.GameRound.TurnRound?o.commandCenter.emit(new f(4)):e==n.GameRound.RiverRound&&o.commandCenter.emit(new S)}).start()}onCmdFold(e){let t={};cc.log("[send] PlayerFold = "+JSON.stringify(t)),this.m_socket.send("FOLD",t);let i={};i.index=s.default.gameData.getSelfSeat(),this.onNetFold(i),o.commandCenter.emit(new C)}onNetFold(e){let t=e;cc.log("[receive] Fold = "+JSON.stringify(t)),this.gameData.getPlayerBySeat(t.index).setFold(!0);let i=new r.NtcFold;i.seat=t.index,o.noticeCenter.emit(i)}onCmdCall(e){let t={};cc.log("[send] PlayerCall = "+JSON.stringify(t)),this.m_socket.send("CALL",t);let i={};i.index=this.gameData.getSelfSeat();let a=this.gameData.getNowMaxBet()-this.gameData.getSelfPlayer().getRoundBet();a>this.gameData.getSelfPlayer().getChips()?i.chips=this.gameData.getSelfPlayer().getChips():i.chips=a,this.onNetCall(i),o.commandCenter.emit(new C)}onNetCall(e){let t=e;cc.log("[receive] Call = "+JSON.stringify(t));let i=this.gameData.getPlayerBySeat(t.index),a=i.getRoundBet()+t.chips;i.setRoundBet(a),i.setChips(i.getChips()-t.chips),0==i.getChips()&&i.setAllin(!0);let s=new r.NtcCall;s.seat=t.index,s.chips=t.chips,o.noticeCenter.emit(s),o.noticeCenter.emit(new r.NtcUpdateBalance)}onCmdRaise(e){let t={};cc.log("[send] PlayerRaise = "+JSON.stringify(t)),t.chip=e.chip,this.m_socket.send("RAISE",t);let i={};i.index=s.default.gameData.getSelfSeat(),i.chips=e.chip,this.onNetRaise(i),o.commandCenter.emit(new C)}onNetRaise(e){let t=e;cc.log("[receive] Raise = "+JSON.stringify(t));let i=this.gameData,a=i.getPlayerBySeat(t.index),s=a.getRoundBet()+t.chips;a.setRoundBet(s),a.getChips()==t.chips&&a.setAllin(!0),a.setChips(a.getChips()-t.chips),i.setNowMaxBet(s),i.getPlayerList().forEach(e=>{e.getSeat()!=t.index&&(e.isAllin()||e.setActioned(!1))});let n=new r.NtcRaise;n.seat=t.index,n.chips=t.chips,o.noticeCenter.emit(n),o.noticeCenter.emit(new r.NtcUpdateBalance)}onCmdQuitGame(e){this.m_socket.isConnected(),cc.log("[send] ExitGame = "+JSON.stringify(void 0)),this.m_socket.send("EXIT_GAME",void 0),this.onAckExitGame({}),cc.Tween.stopAllByTarget(this)}onAckExitGame(e){let t=e;cc.log("ExitRoomRsp = "+JSON.stringify(t)),this.BackToLobby()}onNetBlindLevelUp(e){let t=e;cc.log("[receive] Blind Level Up = "+JSON.stringify(t)),this.gameData.setLevelUpTime(t.time/1e3),this.gameData.setBlindLevel(t.level),o.noticeCenter.emit(new r.NtcBlindLevelUp)}onNetTableShow1st(e){let t=e;cc.log("[receive] TableShow1st = "+JSON.stringify(t)),this.gameData.setGameStage(n.GameStage.Flop),this.gameData.setTableCards(t.tableCards),this.gameData.setTableChips(t.chips),this.gameData.getPlayerList().forEach(e=>{e.setBetSum(e.getBetSum()+e.getRoundBet()),e.setRoundBet(0),e.setActioned(!1)}),this.gameData.setNowMaxBet(0),this.gameData.setGameRound(n.GameRound.FlopRound),o.noticeCenter.emit(new r.NtcTableShow1st)}onNetTableShow2nd(e){let t=e;cc.log("[receive] TableShow2nd = "+JSON.stringify(t)),this.gameData.getTableCards().push(t.tableCard),this.gameData.setTableChips(t.chips),this.gameData.getPlayerList().forEach(e=>{e.setBetSum(e.getBetSum()+e.getRoundBet()),e.setRoundBet(0),e.setActioned(!1)}),this.gameData.setNowMaxBet(0),3==t.index?(this.gameData.setGameStage(n.GameStage.Turn),this.gameData.setGameRound(n.GameRound.TurnRound)):4==t.index&&(this.gameData.setGameStage(n.GameStage.River),this.gameData.setGameRound(n.GameRound.RiverRound));let i=new r.NtcTableShow2nd;i.index=t.index,o.noticeCenter.emit(i)}onNetRiverRoundEnd(e){let t=e;if(cc.log("[receive] RiverRoundEnd = "+JSON.stringify(t)),t.players.forEach(e=>{this.gameData.getPlayerBySeat(e.index).setHandCards(e.cards)}),this.gameData.setGameStage(n.GameStage.Finish),this.gameData.setTableChips(t.chips),t.multiWin){this.gameData.setWinSeat(t.winSeats),t.winSeats.forEach((e,i)=>{this.gameData.getPlayerBySeat(e).setChips(t.winChip[i])});let e=new r.NtcRiverRoundEndMulti;e.chips=t.winChips,o.noticeCenter.emit(e)}else this.gameData.setWinSeat([t.winIndex]),this.gameData.getPlayerBySeat(t.winIndex).setChips(t.winChip),o.noticeCenter.emit(new r.NtcRiverRoundEnd);this.gameData.getSelfPlayer().getShowList().filter(e=>e>-1).length>0&&o.commandCenter.emit(new N),this.gameData.getPlayerList().filter(e=>{if(e.getSeat()!=this.gameData.getSelfSeat())return e.isFold()}).forEach(e=>{if(o.Utils.randRange(1,100)>70){let t={players:[]},i={};i.index=e.getSeat(),i.cards=this.gameData.getPlayerBySeat(i.index).getHandCards(),t.players.push(i),this.onNetShowCard(t)}})}onNetWaitAction(e){let t=e;cc.log("[receive] WaitAction = "+JSON.stringify(t));let i=this.gameData;i.setActiveSeat(t.index),i.setStageLeftTime(t.timeout/1e3),i.setGameStage(n.GameStage.Action),i.getPlayerBySeat(t.index).setActioned(!0);let a=new r.NtcWaitAction;a.seat=t.index,o.noticeCenter.emit(a),t.index!=this.gameData.getSelfSeat()&&cc.tween(this).delay(1).call(()=>{let e={};e.index=t.index;let i=this.gameData.getPlayerBySeat(t.index),a=this.gameData.getNowMaxBet()-i.getRoundBet();if(i.getChips()<=a)return void(o.Utils.randRange(1,100)<51?this.onNetFold(e):(e.chips=i.getChips(),this.onNetCall(e)));let s=o.Utils.randRange(1,100);if(s<11)this.onNetFold(e);else if(10<s&&s<81){let t=this.gameData.getNowMaxBet()-i.getRoundBet();e.chips=t,this.onNetCall(e)}else{let t=o.Utils.randRange(1,100),a=this.gameData.getBlind(),s=0==this.gameData.getTableChips()?2*a:a,n=0==this.gameData.getNowMaxBet()?s:s+this.gameData.getNowMaxBet();if(t>70&&(n+=a/2*o.Utils.randRange(1,10)),t>90&&(n=i.getChips()),i.getChips()<n){let t=this.gameData.getNowMaxBet()-i.getRoundBet();e.chips=t,this.onNetCall(e)}else e.chips=n,this.onNetRaise(e)}}).delay(.5).call(()=>{o.commandCenter.emit(new C)}).start()}onCmdShowCard(e){let t={};t.showCards=this.gameData.getSelfPlayer().getShowList(),cc.log("[send] ShowCard = "+JSON.stringify(t)),this.m_socket.send("SHOW",t);let i={players:[]},a={};a.index=this.gameData.getSelfSeat(),a.cards=this.gameData.getSelfPlayer().getShowList(),i.players.push(a),this.onNetShowCard(i)}onNetShowCard(e){let t=e;cc.log("[receive] ShowCard = "+JSON.stringify(t));let i=[];t.players.forEach(e=>{this.gameData.getPlayerBySeat(e.index).setHandCards(e.cards),i.push(e.index)});let a=new r.NtcShowCard;a.seat=i,o.noticeCenter.emit(a)}onNetDisusePlayer(e){let t=e;cc.log("[receive] PlayerOut = "+JSON.stringify(t));let i=this.gameData.getPlayerBySeat(t.seat);if(!i)return void cc.log("error, cannot find player");let a=this.gameData.getPlayerList().filter(e=>e.getChips()>0);a.length+1==this.gameData.getSngRoomData().award.length&&(this.gameData.getAwardPlayers().push(t.seat),i.setRanking(t.ranking)),t.seat==this.gameData.getSelfSeat()&&this.gameData.getSelfPlayer().setRanking(a.length+1),t.seat,this.gameData.getSelfSeat(),i.setPlaying(!1),i.setOut(!0);let s=new r.NtcDisusePlayer;s.seat=t.seat,o.noticeCenter.emit(s)}onNetGameEnd(e){let t=e;cc.log("[receive] GameEnd = "+JSON.stringify(t)),this.gameData.setGameStage(n.GameStage.Finish),this.gameData.setTableChips(t.chips),this.gameData.setWinSeat([t.winIndex]),this.gameData.getPlayerBySeat(t.winIndex).setChips(t.winChip);let i=new r.NtcGameEnd;o.noticeCenter.emit(i),this.gameData.getSelfPlayer().getShowList().filter(e=>e>-1).length>0&&o.commandCenter.emit(new N),this.gameData.getPlayerList().filter(e=>{if(e.getSeat()!=this.gameData.getSelfSeat())return e.isFold()}).forEach(e=>{if(o.Utils.randRange(1,100)>50){let t={players:[]},i={};i.index=e.getSeat(),i.cards=this.gameData.getPlayerBySeat(i.index).getHandCards(),t.players.push(i),this.onNetShowCard(t)}})}onNetTournamentsEnd(e){let t=e;cc.log("[receive] Tournament End = "+JSON.stringify(t)),s.default.userData.setBalance(t.chips);let i=new r.NtcTournamentEnd;i.winnerName=t.winner,i.winnerAward=t.winnerAward,i.selfRank=t.selfRank,i.selfAward=t.selfAward,o.noticeCenter.emit(i)}}a([o.onCommand(m)],B.prototype,"onCmdTestKickNoMoney",null),a([o.onCommand(u)],B.prototype,"onCmdTestStart",null),a([o.onCommand(g)],B.prototype,"onCmdTestDealCard",null),a([o.onCommand(p)],B.prototype,"onCmdTestTable1st",null),a([o.onCommand(f)],B.prototype,"onCmdTestTable2nd",null),a([o.onCommand(y)],B.prototype,"onCmdTestAction",null),a([o.onCommand(b)],B.prototype,"onCmdTestBlindLevelUp",null),a([o.onCommand(P)],B.prototype,"onCmdIntoGame",null),a([o.onMsg("INTO_ROOM")],B.prototype,"onAckIntoGame",null),a([o.onMsg("PLAYER_SIT_DOWN")],B.prototype,"onNetSitDown",null),a([o.onMsg("PLAYER_STAND_UP")],B.prototype,"onNetStandUp",null),a([o.onMsg("READY")],B.prototype,"onNetReady",null),a([o.onMsg("DEAL_CARDS")],B.prototype,"onNetDealCards",null),a([o.onCommand(_)],B.prototype,"onCmdSwitchTable",null),a([o.onMsg("SWITCH_TABLE")],B.prototype,"onAckSwitchTable",null),a([o.onCommand(S)],B.prototype,"onCmdTestRiverRound",null),a([o.onCommand(C)],B.prototype,"onCmdTestJudge",null),a([o.onCommand(D)],B.prototype,"onCmdFold",null),a([o.onMsg("FOLD")],B.prototype,"onNetFold",null),a([o.onCommand(v)],B.prototype,"onCmdCall",null),a([o.onMsg("CALL")],B.prototype,"onNetCall",null),a([o.onCommand(L)],B.prototype,"onCmdRaise",null),a([o.onMsg("RAISE")],B.prototype,"onNetRaise",null),a([o.onCommand(w)],B.prototype,"onCmdQuitGame",null),a([o.onMsg("EXIT_GAME")],B.prototype,"onAckExitGame",null),a([o.onMsg("BLIND_LEVEL_UP")],B.prototype,"onNetBlindLevelUp",null),a([o.onMsg("TABLE_SHOW_1ST")],B.prototype,"onNetTableShow1st",null),a([o.onMsg("TABLE_SHOW_2ND")],B.prototype,"onNetTableShow2nd",null),a([o.onMsg("RIVER_ROUND_END")],B.prototype,"onNetRiverRoundEnd",null),a([o.onMsg("WAIT_FOR_ACTION")],B.prototype,"onNetWaitAction",null),a([o.onCommand(N)],B.prototype,"onCmdShowCard",null),a([o.onMsg("SHOW_CARD")],B.prototype,"onNetShowCard",null),a([o.onMsg("DISUSE_PLAYER")],B.prototype,"onNetDisusePlayer",null),a([o.onMsg("GAME_END")],B.prototype,"onNetGameEnd",null),a([o.onMsg("TOURNAMENTS_END_")],B.prototype,"onNetTournamentsEnd",null),i.GameController=B,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../../Scenes/Common/MessageView":"MessageView","../Data/PokerData":"PokerData","../NetWork/NetworkManager":"NetworkManager","./GameNotice":"GameNotice","./SceneController":"SceneController"}],GameData:[function(e,t,i){"use strict";cc._RF.push(t,"587c8jaYAZM36hqR3idCuRU","GameData"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameData=i.ResultData=void 0;const a=e("./CommonDefine"),o=e("./PlayerData"),s=e("./HandCardsData");class n{constructor(){this.jokerPoint=-1,this.players=[]}}i.ResultData=n,i.GameData=class{constructor(){this.m_gameStage=a.GameStage.Prepare,this.m_players=new Array(a.MAX_PLAYERS),this.m_posTrans=0,this.m_selfSeat=-1,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_handCardData=null,this.m_tableChips=0,this.m_winSeat=[],this.m_resultData=new n,this.m_tableCards=[],this.m_blind=0,this.m_nowMaxBet=0,this.m_bBlindSeat=0,this.m_sBlindSeat=0,this.m_gameRound=a.GameRound.PreFlop,this.m_sideBetWinSeat=[],this.m_sideBetWinChips=[],this.m_gameType=a.GameType.Normal,this.m_sngRoomData=new a.SngRoomData,this.m_ante=0,this.m_levelUpTime=0,this.m_nowLevel=0,this.m_awardPlayers=[],this.m_playerSum=0,this.m_handCardData=new s.HandCardsData;for(var e=0;e<a.MAX_PLAYERS;++e)this.m_players[e]=new o.PlayerData}resetGameData(){this.m_gameStage=a.GameStage.Prepare,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_tableChips=0,this.m_winSeat=[],this.m_tableCards=[],this.m_nowMaxBet=0,this.m_bBlindSeat=0,this.m_sBlindSeat=0,this.m_gameRound=a.GameRound.PreFlop,this.m_handCardData.resetGameData();for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetGameData()}}resetAllData(){this.resetGameData(),this.m_selfSeat=-1,this.m_posTrans=0,this.m_blind=0,this.m_sngRoomData=new a.SngRoomData,this.m_ante=0,this.m_gameType=a.GameType.Normal,this.m_levelUpTime=0,this.m_nowLevel=0;for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetAllData()}}getGameStage(){return this.m_gameStage}setGameStage(e){this.m_gameStage=e}setSelfSeat(e){this.m_selfSeat=e,e>=0&&(this.m_posTrans=(2-this.m_selfSeat+a.MAX_PLAYERS)%a.MAX_PLAYERS)}getSelfSeat(){return this.m_selfSeat}getSelfPlayer(){return this.m_selfSeat>=0?this.getPlayerBySeat(this.m_selfSeat):null}getPlayerList(){return this.m_players}getPlayerCount(){for(var e=0,t=0;t<this.m_players.length;++t)this.m_players[t].getSeat()>=0&&e++;return e}getPlayerBySeat(e){return e<0?null:this.m_players.find(t=>t.getSeat()==e)}getPosBySeat(e){return(e+this.m_posTrans)%a.MAX_PLAYERS}getSeatByPos(e){return(e-this.m_posTrans+a.MAX_PLAYERS)%a.MAX_PLAYERS}getActiveSeat(){return this.m_activeSeat}setActiveSeat(e){this.m_activeSeat=e}getStageLeftTime(){return this.m_stageLeftTime}setStageLeftTime(e){this.m_stageLeftTime=e}getHandCardData(){return this.m_handCardData}setTableChips(e){this.m_tableChips=e}getTableChips(){return this.m_tableChips}getDropChips(){return 1}getWinSeat(){return this.m_winSeat[0]}setWinSeat(e){this.m_winSeat=e}getWinSeats(){return this.m_winSeat}getResultData(){return this.m_resultData}getTableCards(){return this.m_tableCards}setTableCards(e){this.m_tableCards=e}getBlind(){return this.m_blind}setBlind(e){this.m_blind=e}getNowMaxBet(){return this.m_nowMaxBet}setNowMaxBet(e){this.m_nowMaxBet=e}getBigBlindSeat(){return this.m_bBlindSeat}setBigBlindSeat(e){this.m_bBlindSeat=e}getSmallBlindSeat(){return this.m_sBlindSeat}setSmallBlindSeat(e){this.m_sBlindSeat=e}getGameRound(){return this.m_gameRound}setGameRound(e){this.m_gameRound=e}getPlayerSeatList(){let e=[];return this.m_players.forEach(t=>{t.getSeat()>-1&&t.isPlaying()&&e.push(t.getSeat())}),e}getPlayerIndexBySeat(e){return e<0?null:this.m_players.find(t=>t.getSeat()==e)}getRaiseLimit(){return this.m_gameRound==a.GameRound.PreFlop?2*this.m_blind:this.m_blind}getSideBetWinSeat(){return this.m_sideBetWinSeat}setSideBetWinSeat(e){this.m_sideBetWinSeat=e}getSideBetWinChips(){return this.m_sideBetWinChips}setSideBetWinChips(e){this.m_sideBetWinChips=e}isInGame(){let e=!0;if(this.getGameStage()==a.GameStage.Prepare||this.getGameStage()==a.GameStage.Finish)e=!1;else if(this.getSelfSeat()<0)e=!1;else{let t=this.getSelfPlayer();t.isPlaying()?t.isWinner()&&(e=!1):e=!1}return e}getGameType(){return this.m_gameType}setGameType(e){this.m_gameType=e}getSngRoomData(){return this.m_sngRoomData}setSngRoomData(e){this.m_sngRoomData=e}getAnte(){return this.m_ante}setAnte(e){this.m_ante=e}getLevelUpTime(){return this.m_levelUpTime}setLevelUpTime(e){this.m_levelUpTime=e}getBlindLevel(){return this.m_nowLevel}setBlindLevel(e){this.m_nowLevel=e}getNowBlindData(){return this.m_sngRoomData.structure[this.m_nowLevel-1]}getNextBlindData(){return this.m_sngRoomData.structure[this.m_nowLevel]}getAwardPlayers(){return this.m_awardPlayers}getSelfRanking(){return this.getSelfPlayer().getRanking()}getNextActiveSeat(){let e=this.m_players.filter(e=>e.getSeat()>-1&&e.isPlaying()&&e.canAction()),t=e.map(e=>e.getSeat());if(e.length>0){t.push(this.m_activeSeat),t.sort();let e=t.indexOf(this.m_activeSeat);return t[e+1==t.length?0:e+1]}return null}getCanMaxBet(e=!1){let t;return(t=e?this.m_players.filter(e=>e.isPlaying()&&!e.isFold()):this.m_players.filter(e=>e.isPlaying())).sort((e,t)=>t.getChips()+t.getRoundBet()-(e.getChips()+e.getRoundBet())),t[1].getChips()+t[1].getRoundBet()-this.getSelfPlayer().getRoundBet()}getMinChipsPlayer(){let e=this.m_players.filter(e=>e.isPlaying());return e.sort((e,t)=>t.getChips()-e.getChips()),e[1]}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./HandCardsData":"HandCardsData","./PlayerData":"PlayerData"}],GameEntryCell:[function(e,t,i){"use strict";cc._RF.push(t,"5b909jhCMVA1KYQM3pMKkzO","GameEntryCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.GameEntryCell=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),n=e("../../Business/Logic/SceneController"),r=e("../Common/UIUtils"),l=e("../../Business/Data/CommonDefine"),{ccclass:c,property:h,menu:d}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.imgBg=null,this.pointValueIdx=0}onLoad(){r.UIUtils.NodeClickEvent(this.node,this.onTouchEnterGame.bind(this))}setData(e){this.pointValueIdx=e;let t=s.default.homeData.getPointValueList();this.txtPointValue.string=t[e].toString(),e=e>4?4:e,this.imgBg.spriteFrame=cc.resources.get(l.SpriteList.GameEntey+e,cc.SpriteFrame)}onTouchEnterGame(){s.default.homeData.setGameId(this.pointValueIdx.toString()),o.commandCenter.emit(new n.CmdScene(l.SceneType.Game))}};a([h(cc.Label)],u.prototype,"txtPointValue",void 0),a([h(cc.Sprite)],u.prototype,"imgBg",void 0),u=a([c,d("Lobby/GameEntryCell")],u),i.GameEntryCell=u,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/SceneController":"SceneController","../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],GameNotice:[function(e,t,i){"use strict";cc._RF.push(t,"31af3V/1NxB4o3CuR3dhUJ9","GameNotice");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NtcTournamentEnd=i.NtcDisusePlayer=i.NtcBlindLevelUp=i.NtcShowMultiWinner=i.NtcShowWinner=i.NtcBetChip=i.NtcRaise=i.NtcCall=i.NtcFold=i.NtcWaitAction=i.NtcShowWinnerAllFold=i.NtcShowCard=i.NtcGameEnd=i.NtcRiverRoundEndMulti=i.NtcRiverRoundEnd=i.NtcTableShow2nd=i.NtcTableShow1st=i.NtcUpdateBalance=i.NtcPrepare=i.NtcStandUp=i.NtcSitDown=i.NtcResetGame=i.NtcGameInfo=i.NtcCollectAnte=i.NtcDealCards=i.NtcDisConnect=void 0;const o=e("../../MobileKit/MKIndex");let s=class{};s=a([o.createNotice],s),i.NtcDisConnect=s;let n=class{constructor(){this.bigBlindSeat=-1,this.smallBlindSeat=-1}};n=a([o.createNotice],n),i.NtcDealCards=n;let r=class{};r=a([o.createNotice],r),i.NtcCollectAnte=r;let l=class{};l=a([o.createNotice],l),i.NtcGameInfo=l;let c=class{};c=a([o.createNotice],c),i.NtcResetGame=c;let h=class{constructor(){this.seat=-1}};h=a([o.createNotice],h),i.NtcSitDown=h;let d=class{constructor(){this.seat=-1}};d=a([o.createNotice],d),i.NtcStandUp=d;let u=class{};u=a([o.createNotice],u),i.NtcPrepare=u;let m=class{constructor(e=-1){this.seat=-1,this.seat=e}};m=a([o.createNotice],m),i.NtcUpdateBalance=m;let g=class{};g=a([o.createNotice],g),i.NtcTableShow1st=g;let p=class{constructor(){this.index=-1}};p=a([o.createNotice],p),i.NtcTableShow2nd=p;let f=class{};f=a([o.createNotice],f),i.NtcRiverRoundEnd=f;let y=class{constructor(){this.chips=[]}};y=a([o.createNotice],y),i.NtcRiverRoundEndMulti=y;let C=class{constructor(){this.seat=-1}};C=a([o.createNotice],C),i.NtcGameEnd=C;let S=class{constructor(){this.seat=[]}};S=a([o.createNotice],S),i.NtcShowCard=S;let b=class{constructor(){this.seat=-1}};b=a([o.createNotice],b),i.NtcShowWinnerAllFold=b;let P=class{constructor(){this.seat=-1}};P=a([o.createNotice],P),i.NtcWaitAction=P;let _=class{constructor(){this.seat=-1}};_=a([o.createNotice],_),i.NtcFold=_;let D=class{constructor(){this.seat=-1,this.chips=-1}};D=a([o.createNotice],D),i.NtcCall=D;let v=class{constructor(){this.seat=-1,this.chips=-1}};v=a([o.createNotice],v),i.NtcRaise=v;let L=class{constructor(){this.seat=-1,this.chips=-1}};L=a([o.createNotice],L),i.NtcBetChip=L;let N=class{constructor(){this.seat=-1,this.cards=[]}};N=a([o.createNotice],N),i.NtcShowWinner=N;let w=class{constructor(){this.seat=[],this.cards=[]}};w=a([o.createNotice],w),i.NtcShowMultiWinner=w;let R=class{};R=a([o.createNotice],R),i.NtcBlindLevelUp=R;let B=class{constructor(){this.seat=-1}};B=a([o.createNotice],B),i.NtcDisusePlayer=B;let M=class{};M=a([o.createNotice],M),i.NtcTournamentEnd=M,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GameRecordLayer:[function(e,t,i){"use strict";cc._RF.push(t,"4b45aHvWhBEwoYHbbdBHw2o","GameRecordLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),n=e("../Common/PopupBase"),r=e("../Common/PrefabPool"),l=e("../../Business/Data/CommonDefine"),c=e("./RecordPage"),h=e("./FilterCell"),{ccclass:d,property:u,menu:m}=cc._decorator;let g=class extends n.default{constructor(){super(...arguments),this.txtPage=null,this.noDataTips=null,this.pageView=null,this.btnSwitchRight=null,this.btnSwitchLeft=null,this.filterLayerNode=null,this.btnShowFilter=null,this.txtNowShow=null,this.filterExpendLayer=null,this.filterCell=null,this.selectPointValue=-1,this.filterCellList=[]}static get path(){return"Scenes/Game/game_record_layer"}onLoad(){this.main||(this.main=this.node),this.btnShowFilter.node.on("click",this.onTouchShowFilter,this),this.btnSwitchRight.node.on("click",this.onTouchRight,this),this.btnSwitchLeft.node.on("click",this.onTouchLeft,this),this.pageView.node.on("page-turning",this.onPageTurning,this),this.initUI(),this.clearPage(),this.resetBtnState()}initUI(){this.filterCell.removeFromParent(!1),s.default.homeData.getPointValueList().forEach((e,t)=>{let i=cc.instantiate(this.filterCell);i.setParent(this.filterExpendLayer),i.getComponent(h.FilterCell).setData(t,this.showRecord.bind(this)),this.filterCellList.push(i)}),this.resizeFilterLayer(),this.filterLayerNode.active=!1}updateDisplay(){this.showRecord(0)}onAfterHide(){this.clearPage()}showRecord(e){if(e==this.selectPointValue)return;this.clearPage(),this.filterCellList.forEach((t,i)=>{t.active=i!=e}),this.selectPointValue=e;let t=s.default.homeData.getPointValueList();this.txtNowShow.string=t[e].toString();let i=s.default.userData.getGameRecordLst();if(0==i.length)return this.noDataTips.active=!0,this.btnSwitchLeft.interactable=!1,void(this.btnSwitchRight.interactable=!1);this.noDataTips.active=!1,i.length,i.sort((e,t)=>t.time-e.time);let a=i.filter(t=>t.pv==e),o=a.length/10,n=a.length%10==0?o:Math.floor(o)+1;for(let s=0;s<n;s++){let e=r.default.get(l.PrefabList.RecordPage),t=e.getComponent(c.RecordPage);this.pageView.addPage(e);let i=10*s,o=s==n-1?a.length:i+10,h=[];for(let s=i;s<o;s++)h.push(a[s]);t.setRecordList(h)}this.resetBtnState()}clearPage(){this.pageView.removeAllPages()}onTouchClose(){this.hide()}onTouchRight(){let e=this.pageView.getCurrentPageIndex()+1;e<this.pageView.getPages().length&&this.pageView.setCurrentPageIndex(e)}onTouchLeft(){let e=this.pageView.getCurrentPageIndex()-1;e<0||this.pageView.setCurrentPageIndex(e)}onTouchShowFilter(){this.filterLayerNode.active=!this.filterLayerNode.active,this.filterLayerNode.active&&o.AudioEngine.playEffect(l.SoundList.Click)}onPageTurning(e){this.resetBtnState()}resetBtnState(){let e=this.pageView.getCurrentPageIndex();this.txtPage.string=(e+1).toString();let t=this.pageView.getPages().length;0==e?(this.btnSwitchLeft.interactable=!1,this.btnSwitchRight.interactable=t>1):e+1==t?(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!1):(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!0)}resizeFilterLayer(){let e=s.default.homeData.getPointValueList();this.filterExpendLayer.height=27+(this.filterCell.height+6)*(e.length-1)}};a([u(cc.Label)],g.prototype,"txtPage",void 0),a([u(cc.Node)],g.prototype,"noDataTips",void 0),a([u(cc.PageView)],g.prototype,"pageView",void 0),a([u(cc.Button)],g.prototype,"btnSwitchRight",void 0),a([u(cc.Button)],g.prototype,"btnSwitchLeft",void 0),a([u(cc.Node)],g.prototype,"filterLayerNode",void 0),a([u(cc.Button)],g.prototype,"btnShowFilter",void 0),a([u(cc.Label)],g.prototype,"txtNowShow",void 0),a([u(cc.Node)],g.prototype,"filterExpendLayer",void 0),a([u(cc.Node)],g.prototype,"filterCell",void 0),g=a([d,m("Lobby/GameRecordLayer")],g),i.default=g,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Common/PopupBase":"PopupBase","../Common/PrefabPool":"PrefabPool","./FilterCell":"FilterCell","./RecordPage":"RecordPage"}],GameScene:[function(e,t,i){"use strict";cc._RF.push(t,"a7d62FcWh5K2YaaMxNMEQCG","GameScene");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),l=e("./Common/UIUtils"),c=e("./Common/PopupManager"),h=e("../Business/Logic/GameController"),d=e("./Common/PrefabPool"),u=e("./PlayerNode"),m=e("./GameAction"),g=e("./Common/MessageView"),p=e("../Business/Data/SaveDataManager"),f=e("./Common/ConfirmDialog"),y=e("./RaiseLayer"),{ccclass:C,property:S,menu:b}=cc._decorator;let P=class extends cc.Component{constructor(){super(...arguments),this.nowLanguage=n.LangList.en,this.txtBalance=null,this.imgMsg=null,this.txtMsg=null,this.txtTableChips=null,this.bgTableChips=null,this.bgCardType=null,this.txtWinnerTableChips=null,this.bgWinnerTableType=null,this.btnMenu=null,this.btnInfor=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.menuLayer=null,this.btnSwitch=null,this.btnExit=null,this.btnHowToPlay=null,this.playerPosNode=null,this.dealCardNode=null,this.raiseLayer=null,this.statuPanel=null,this.txtLeftTime=null,this.txtBlind=null,this.txtRanking=null,this.txt1stAward=null,this.txt2ndAward=null,this.bgNowPanel=null,this.txtNowBlind=null,this.resultLayer=null,this.resultMask=null,this.txtWinner=null,this.txtYou=null,this.playerList=[],this.leftTimeTag=11,this.firstInGame=!0,this.tableChipsPos=null,this.levelUpTimeTag=21,this.nowBlindLevel=0,this.bgSideBetChipList=[],this.musicOn=!1,this.soundOn=!1,this.gameStart=!1,this.sngDetailLayer=null}get language(){return this.nowLanguage}set language(e){this.nowLanguage=e,o.LocalLang.setLanguage(n.LangList[e])}onLoad(){o.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.gameAction=this.node.getComponent(m.default),o.Utils.resize(),this.resizeUI(),this.initUI(),this.clearGame(),cc.view.setResizeCallback(()=>{o.Utils.resize(),this.resizeUI()}),o.AudioEngine.playMusic(n.SoundList.Bgm,!0),o.AudioEngine.setMusicVolume(.4),c.default.hide(),cc.tween(this.node).call(()=>{o.commandCenter.emit(new h.CmdIntoGame(s.default.homeData.getGameId()))}).delay(.5).call(()=>{o.commandCenter.emit(new h.CmdTestStart)}).start()}initUI(){cc.macro.ENABLE_MULTI_TOUCH=!1,l.UIUtils.ButtonEvent(this.btnMenu,this.onTouchMenu.bind(this)),l.UIUtils.ButtonEvent(this.btnInfor,this.onTouchInfor.bind(this)),l.UIUtils.ButtonEvent(this.btnSwitch,this.onTouchSwitch.bind(this)),l.UIUtils.ButtonEvent(this.btnExit,this.onTouchExit.bind(this)),l.UIUtils.ButtonEvent(this.btnHowToPlay,this.onTouchHowToPlay.bind(this)),l.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),l.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),l.UIUtils.NodeClickEvent(this.statuPanel,this.onTouchSngInfor.bind(this)),this.menuLayer.active=!1,this.statuPanel.active=!1,this.musicOn=p.default.getMusicEnable(),this.soundOn=p.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,this.bgTableChips.getComponent(cc.Widget).updateAlignment(),this.dealCardNode.getComponent(cc.Widget).updateAlignment(),this.playerPosNode.children.forEach((e,t)=>{e.getComponent(cc.Widget).updateAlignment();let i=d.default.get(n.PrefabList.PlayerNode);i.setPosition(0,0),i.setParent(e);let a=i.getComponent(u.default);this.playerList.push(a),a.setTablePos(this.bgTableChips,this.dealCardNode,t);let o=cc.instantiate(this.bgTableChips);o.parent=this.bgTableChips.parent,o.active=!1,this.bgSideBetChipList.push(o)}),this.tableChipsPos=this.bgTableChips.position}resizeUI(){this.gameAction.resizeUI()}clearGame(){this.bgTableChips.active=!1,this.bgCardType.active=!1,this.bgTableChips.position=this.tableChipsPos,this.hideMsg(),this.showWinnerCardType(!1),this.bgNowPanel.opacity=0,this.resultLayer.active=!1,this.resultLayer.stopAllActions(),this.resultMask.stopAllActions()}onTouchMenu(){o.commandCenter.emit(new h.CmdQuitGame)}onTouchInfor(){c.default.show(n.PrefabList.InforLayer),this.menuLayer.active=!1}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,p.default.setMusicEnable(this.musicOn),o.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,p.default.setEffectEnable(this.soundOn),o.AudioEngine.setEffectsEnabled(this.soundOn),o.AudioEngine.playEffect(n.SoundList.Click)}onTouchSwitch(){o.commandCenter.emit(new h.CmdSwitchTable),this.menuLayer.active=!1}onTouchExit(){if(this.gameData.isInGame()){let e="\u20b9"+l.UIUtils.getShortNumber(s.default.gameData.getDropChips());f.default.show(o.LocalLang.get("game_quit_tips",[e]),e=>{e&&o.commandCenter.emit(new h.CmdQuitGame)})}else o.commandCenter.emit(new h.CmdQuitGame);this.menuLayer.active=!1}onTouchHowToPlay(){c.default.show(n.PrefabList.HelpLayer),this.menuLayer.active=!1}onTouchSngInfor(){this.sngDetailLayer.active=!0}updateBalance(){this.txtBalance.string=l.UIUtils.getShortNumber(this.gameData.getSelfPlayer().getChips(),!0)}updatePlayers(){let e=this.gameData.getPlayerList();for(let t=0;t<e.length;++t){let i=e[t],a=this.gameData.getPosBySeat(t),o=this.playerList[a];o&&(i.getSeat()>=0?o.sitDown(i):o.standUp())}}updateTableChips(){let e=this.gameData.getTableChips();if(e>0){this.bgTableChips.active=!0,this.txtTableChips.string=l.UIUtils.getShortNumber(e);let t=this.bgTableChips.getComponentInChildren(cc.Sprite);l.UIUtils.setChipType(t,e)}else this.bgTableChips.active=!1}updateStatuPanel(){let e=s.default.gameData.getPlayerList().filter(e=>e.isPlaying());e.sort((e,t)=>t.getLeftChipSum()-e.getLeftChipSum());let t=s.default.gameData.getPlayerList().filter(e=>e.isOut());t.sort((e,t)=>e.getRanking()-t.getRanking()),t.forEach(t=>{e.push(t)}),e.forEach((e,t)=>{e.getSeat()==this.gameData.getSelfSeat()&&e.setRanking(t+1)});let i=this.gameData.getSelfRanking(),a="";a=1==i?"st":2==i?"nd":3==i?"rd":"th",this.txtRanking.string=cc.js.formatStr("%s%s of %s",i,a,e.length)}statuPanelLeftTimer(e){let t=Math.floor(e)-1;t<=0&&(this.txtBlind.string="0:00");let i=cc.tween(this.node);i.tag(this.levelUpTimeTag);for(let a=t;0<a;a--)i.call(()=>{this.showLevelUpLeftTime(a)}),i.delay(1);i.call(()=>{this.txtLeftTime.string="0:00",this.gameData.getBlindLevel()<this.gameData.getSngRoomData().structure.length&&o.commandCenter.emit(new h.CmdTestBlindLevelUp)}),cc.Tween.stopAllByTag(this.levelUpTimeTag),i.start()}showLevelUpLeftTime(e){let t=Math.floor(e/60).toString(),i=(e%60).toString();1==i.length&&(i="0"+i),this.txtLeftTime.string=t+":"+i}showBlindLevelUpMsg(){let e=this.gameData.getNowBlindData();g.default.show(cc.js.formatStr("Limits going up: Blinds %s/%s Ante %s",e.blinds/2,e.blinds,e.ante),5)}showBgNowPanel(){this.bgNowPanel.active=!0;let e=this.gameData.getNowBlindData();this.txtNowBlind.string=cc.js.formatStr("Blinds are now %s/%s(%s)",e.blinds/2,e.blinds,e.ante),cc.tween(this.bgNowPanel).to(.5,{opacity:255},{easing:"smooth"}).delay(2).to(.5,{opacity:0},{easing:"smooth"}).start()}showMsg(e,t=2){this.imgMsg.node.opacity=255,this.txtMsg.string=e,this.imgMsg.node.stopAllActions(),cc.tween(this.imgMsg.node).delay(t).to(0,{opacity:0}).start()}hideMsg(){this.node.stopActionByTag(this.leftTimeTag),this.imgMsg.node.stopAllActions(),this.imgMsg.node.opacity=0}showStartingMsg(e){let t=Math.floor(e)-1;if(t<=0)return void this.showMsg(o.LocalLang.get("game_starting_game"));let i=cc.tween(this.node);i.tag(this.leftTimeTag);for(let a=t;0<a;a--)i.call(()=>{this.showMsg(o.LocalLang.get("game_starting_in_sec",[a]))}),i.delay(1);i.call(()=>{this.showMsg(o.LocalLang.get("game_starting_game"))}),cc.Tween.stopAllByTag(this.leftTimeTag),i.start()}updateCardType(){if(!this.gameData.getSelfPlayer().isPlaying())return;let e=[];s.default.gameData.getTableCards().forEach(t=>{e.push(t)});let t=s.default.gameData.getHandCardData().getHandCardList(),i=s.default.gameData.getHandCardData().getCardsType(e,t);if(!(e.length<3)){if(!this.gameData.getSelfPlayer().isFold()){let e=i.card.slice(0);this.gameAction.highlightCards(e)}this.bgCardType.active=!0,l.UIUtils.setCardType(this.bgCardType,i.type)}}showWinnerCardType(e){if(e){let e=this.gameData.getTableCards(),t=this.gameData.getPlayerBySeat(this.gameData.getWinSeat()).getHandCards(),i=s.default.gameData.getHandCardData().getCardsType(e,t);if(l.UIUtils.setCardType(this.bgWinnerTableType,i.type),this.gameData.getWinSeats().length>1){let e=new r.NtcShowMultiWinner;e.seat=this.gameData.getWinSeats(),e.cards=i.card,o.noticeCenter.emit(e)}else{let e=new r.NtcShowWinner;e.seat=this.gameData.getWinSeat(),e.cards=i.card,o.noticeCenter.emit(e)}}this.bgWinnerTableType.active=e}sendTableChips(e){let t=this.gameData.getPosBySeat(this.gameData.getWinSeat()),i=l.UIUtils.posTransform(this.bgTableChips,this.playerList[t].node);cc.tween(this.bgTableChips).to(1,{position:i},{easing:"smooth"}).call(()=>{this.bgTableChips.active=!1,this.playerList[t].getChip(this.gameData.getTableChips()),e()}).start()}sendSidePotChip(e,t){let i=this.gameData.getWinSeats(),a=this.bgTableChips.position;this.txtTableChips.string=l.UIUtils.getShortNumber(e[0]);let s=cc.tween(this.node);i.forEach((i,n)=>{s.call(()=>{let s=e[n],c=this.bgSideBetChipList[n];c.position=a,c.active=!0,c.getComponentInChildren(cc.Label).string=l.UIUtils.getShortNumber(s);let h=this.gameData.getTableChips()-s;this.gameData.setTableChips(h),this.updateTableChips(),l.UIUtils.setChipType(c.getComponentInChildren(cc.Sprite),s);let d=this.gameData.getPosBySeat(i),u=l.UIUtils.posTransform(c,this.playerList[d].node);cc.tween(c).to(1,{position:u},{easing:"smooth"}).call(()=>{c.active=!1,this.playerList[d].getChip(s),o.noticeCenter.emit(new r.NtcUpdateBalance(i)),i==this.gameData.getSelfSeat()&&t()}).start()}),s.delay(1)}),s.start()}showTournamentResult(e,t,i,a){const o=this.resultMask,s=this.resultLayer;this.node.active=!0,o.active=!0,o.opacity=0,s.active=!0,s.scale=.5,s.opacity=0,cc.tween(o).to(.15,{opacity:150}).start(),cc.tween(s).to(.3,{scale:1,opacity:255},{easing:"backOut"}).start();let n="";n=2==i?"nd":3==i?"rd":"th",1==i?(e="You",this.txtYou.string=""):this.txtYou.string=0==a?cc.js.formatStr("You are %s.",i+n):cc.js.formatStr("You are %s and receives %s.",i+n,a),this.txtWinner.string=cc.js.formatStr("%s wins the tournament and receives %s,congratulations!",e,t)}onNtcGameInfo(){if(this.updatePlayers(),this.updateBalance(),this.gameData.getGameType()==n.GameType.SNG){this.statuPanel.active=!0;let e=this.gameData.getSngRoomData();this.txt1stAward.string=l.UIUtils.getShortNumber(e.firstAward),this.txt2ndAward.string=l.UIUtils.getShortNumber(e.secondAward);let t=this.gameData.getNextBlindData();this.txtBlind.string=cc.js.formatStr("%s/%s(%s)",t.blinds/2,t.blinds,t.ante),this.showLevelUpLeftTime(60*t.minutes),this.sngDetailLayer=d.default.get(n.PrefabList.SngDetailInGameLayer),this.sngDetailLayer.setParent(this.node),this.sngDetailLayer.active=!1}let e=this.gameData.getGameStage();if(e!=n.GameStage.Prepare&&e!=n.GameStage.Waiting){let e=this.gameData.getActiveSeat(),t=this.gameData.getPosBySeat(e),i=this.playerList[t];i&&i.startProgress(),this.updateTableChips()}e!=n.GameStage.Finish&&e!=n.GameStage.Prepare||this.showStartingMsg(this.gameData.getStageLeftTime()),e==n.GameStage.Waiting&&this.showMsg(o.LocalLang.get("game_waiting_players"),999),this.firstInGame&&e==n.GameStage.Prepare&&(this.firstInGame=!1)}onNtcResetGame(){for(var e=0;e<this.playerList.length;++e)this.playerList[e].standUp();this.clearGame()}onNtcSitDown(e){let t=this.gameData.getPosBySeat(e.seat),i=this.playerList[t];i&&i.sitDown(this.gameData.getPlayerBySeat(e.seat))}onNtcStandUp(e){let t=this.gameData.getPosBySeat(e.seat),i=this.playerList[t];i&&i.standUp()}onNtcPrepare(){this.showStartingMsg(this.gameData.getStageLeftTime())}onNtcCollectAnte(){cc.tween(this.node).delay(.5).call(()=>{this.updateTableChips()}).start()}onNtcDealCards(e){this.clearGame(),this.gameData.getGameType()==n.GameType.SNG&&(this.gameStart||(this.gameStart=!0,this.statuPanelLeftTimer(this.gameData.getLevelUpTime())),this.nowBlindLevel=this.gameData.getBlindLevel(),this.updateStatuPanel()),this.node.stopActionByTag(this.leftTimeTag),this.showMsg(o.LocalLang.get("game_dealing_cards"));let t=cc.tween(this.node),i=this.gameData.getPlayerCount(),a=e.smallBlindSeat;for(let o=0;o<i;o++){a>=i&&(a=0);let e=this.gameData.getPosBySeat(a),o=this.gameData.getPosBySeat(this.gameData.getSelfSeat());e!=o?this.playerList[e].getPlayerData().isPlaying()&&t.call(()=>{this.playerList[e].dealCards()}):this.gameData.getSelfPlayer().isPlaying()&&t.call(()=>{this.gameAction.dealCards()}),t.delay(.2),a+=1}t.delay(1).call(()=>{o.commandCenter.emit(new h.CmdTestAction(this.gameData.getActiveSeat()))}).start(),o.AudioEngine.playEffect(n.SoundList.Dealcard2)}onNtcUpdateBalance(){this.updateBalance()}onNtcTableShow1st(e){cc.tween(this.node).delay(.5).call(()=>{this.updateTableChips(),this.gameAction.dealTableCard1st(this.updateCardType.bind(this))}).delay(1).call(()=>{this.gameData.setActiveSeat(this.gameData.getSmallBlindSeat());let e=new h.CmdTestJudge;o.commandCenter.emit(e)}).start()}onNtcTableShow2nd(e){cc.tween(this.node).delay(.5).call(()=>{this.updateTableChips(),this.gameAction.dealTableCard2nd(e.index,this.updateCardType.bind(this))}).delay(1).call(()=>{this.gameData.setActiveSeat(this.gameData.getSmallBlindSeat());let e=new h.CmdTestJudge;o.commandCenter.emit(e)}).start()}onNtcRiverRoundEnd(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.call(()=>{this.playerList.forEach(e=>{let t=e.getPlayerData();t.isPlaying()&&!t.isFold()&&t.getSeat()!=this.gameData.getSelfSeat()&&e.showCard()})}).delay(2).call(()=>{this.showWinnerCardType(!0)}).delay(1).call(()=>{this.sendTableChips(()=>{o.noticeCenter.emit(new r.NtcUpdateBalance),this.updateBalance()})}),this.nowBlindLevel<this.gameData.getBlindLevel()&&this.gameData.getGameType()!=n.GameType.Normal&&t.call(()=>{this.showBlindLevelUpMsg()}).delay(1),t.delay(1).call(()=>{o.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{}).start()}onNtcRiverRoundEndMulti(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.call(()=>{this.playerList.forEach(e=>{let t=e.getPlayerData();t.isPlaying()&&!t.isFold()&&t.getSeat()!=this.gameData.getSelfSeat()&&e.showCard()})}).delay(2).call(()=>{this.showWinnerCardType(!0)}).delay(1).call(()=>{this.sendSidePotChip(e.chips,()=>{this.updateBalance()})}),this.nowBlindLevel<this.gameData.getBlindLevel()&&this.gameData.getGameType()!=n.GameType.Normal&&t.call(()=>{this.showBlindLevelUpMsg()}).delay(1),t.delay(1*this.gameData.getWinSeats().length).call(()=>{o.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{}).start()}onNtcWaitAction(e){e.seat,this.gameData.getSelfSeat()}onNtcFold(e){}onNtcGameEnd(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.delay(0).call(()=>{let e=new r.NtcShowWinnerAllFold;e.seat=this.gameData.getWinSeat(),o.noticeCenter.emit(e),this.sendTableChips(()=>{o.noticeCenter.emit(new r.NtcUpdateBalance),this.updateBalance()})}),this.nowBlindLevel<this.gameData.getBlindLevel()&&this.gameData.getGameType()!=n.GameType.Normal&&t.call(()=>{this.showBlindLevelUpMsg()}).delay(1),t.delay(1).call(()=>{o.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{}).start()}onNtcBlindLevelUp(e){if(this.gameData.getBlindLevel()<this.gameData.getSngRoomData().structure.length){let e=this.gameData.getNextBlindData();this.txtBlind.string=cc.js.formatStr("%s/%s(%s)",e.blinds/2,e.blinds,e.ante),this.showLevelUpLeftTime(60*e.minutes),this.showBgNowPanel(),this.statuPanelLeftTimer(this.gameData.getLevelUpTime())}else this.showBgNowPanel(),this.txtBlind.string="-",this.txtLeftTime.string="-"}onNtcTournamentEnd(e){this.showTournamentResult(e.winnerName,e.winnerAward,e.selfRank,e.selfAward)}};a([S({visible:!1})],P.prototype,"nowLanguage",void 0),a([S({type:cc.Enum(n.LangList),displayName:"\u8bed\u8a00"})],P.prototype,"language",null),a([S(cc.Label)],P.prototype,"txtBalance",void 0),a([S({type:cc.Sprite,displayName:""})],P.prototype,"imgMsg",void 0),a([S({type:cc.Label,displayName:""})],P.prototype,"txtMsg",void 0),a([S({type:cc.Label,displayName:""})],P.prototype,"txtTableChips",void 0),a([S({type:cc.Node,displayName:""})],P.prototype,"bgTableChips",void 0),a([S({type:cc.Node,displayName:""})],P.prototype,"bgCardType",void 0),a([S({type:cc.Label,displayName:""})],P.prototype,"txtWinnerTableChips",void 0),a([S({type:cc.Node,displayName:""})],P.prototype,"bgWinnerTableType",void 0),a([S(cc.Button)],P.prototype,"btnMenu",void 0),a([S(cc.Button)],P.prototype,"btnInfor",void 0),a([S(cc.Sprite)],P.prototype,"imgMusic",void 0),a([S(cc.Sprite)],P.prototype,"imgSound",void 0),a([S(cc.SpriteFrame)],P.prototype,"imgMusicOn",void 0),a([S(cc.SpriteFrame)],P.prototype,"imgMusicOff",void 0),a([S(cc.SpriteFrame)],P.prototype,"imgSoundOn",void 0),a([S(cc.SpriteFrame)],P.prototype,"imgSoundOff",void 0),a([S(cc.Node)],P.prototype,"menuLayer",void 0),a([S(cc.Button)],P.prototype,"btnSwitch",void 0),a([S(cc.Button)],P.prototype,"btnExit",void 0),a([S(cc.Button)],P.prototype,"btnHowToPlay",void 0),a([S(cc.Node)],P.prototype,"playerPosNode",void 0),a([S({type:cc.Node,displayName:""})],P.prototype,"dealCardNode",void 0),a([S(y.default)],P.prototype,"raiseLayer",void 0),a([S(cc.Node)],P.prototype,"statuPanel",void 0),a([S(cc.Label)],P.prototype,"txtLeftTime",void 0),a([S(cc.Label)],P.prototype,"txtBlind",void 0),a([S(cc.Label)],P.prototype,"txtRanking",void 0),a([S(cc.Label)],P.prototype,"txt1stAward",void 0),a([S(cc.Label)],P.prototype,"txt2ndAward",void 0),a([S(cc.Node)],P.prototype,"bgNowPanel",void 0),a([S(cc.Label)],P.prototype,"txtNowBlind",void 0),a([S(cc.Node)],P.prototype,"resultLayer",void 0),a([S(cc.Node)],P.prototype,"resultMask",void 0),a([S(cc.Label)],P.prototype,"txtWinner",void 0),a([S(cc.Label)],P.prototype,"txtYou",void 0),a([o.onNotice(r.NtcGameInfo)],P.prototype,"onNtcGameInfo",null),a([o.onNotice(r.NtcResetGame)],P.prototype,"onNtcResetGame",null),a([o.onNotice(r.NtcSitDown)],P.prototype,"onNtcSitDown",null),a([o.onNotice(r.NtcStandUp)],P.prototype,"onNtcStandUp",null),a([o.onNotice(r.NtcPrepare)],P.prototype,"onNtcPrepare",null),a([o.onNotice(r.NtcCollectAnte)],P.prototype,"onNtcCollectAnte",null),a([o.onNotice(r.NtcDealCards)],P.prototype,"onNtcDealCards",null),a([o.onNotice(r.NtcUpdateBalance)],P.prototype,"onNtcUpdateBalance",null),a([o.onNotice(r.NtcTableShow1st)],P.prototype,"onNtcTableShow1st",null),a([o.onNotice(r.NtcTableShow2nd)],P.prototype,"onNtcTableShow2nd",null),a([o.onNotice(r.NtcRiverRoundEnd)],P.prototype,"onNtcRiverRoundEnd",null),a([o.onNotice(r.NtcRiverRoundEndMulti)],P.prototype,"onNtcRiverRoundEndMulti",null),a([o.onNotice(r.NtcWaitAction)],P.prototype,"onNtcWaitAction",null),a([o.onNotice(r.NtcFold)],P.prototype,"onNtcFold",null),a([o.onNotice(r.NtcGameEnd)],P.prototype,"onNtcGameEnd",null),a([o.onNotice(r.NtcBlindLevelUp)],P.prototype,"onNtcBlindLevelUp",null),a([o.onNotice(r.NtcTournamentEnd)],P.prototype,"onNtcTournamentEnd",null),P=a([C],P),i.default=P,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/ConfirmDialog":"ConfirmDialog","./Common/MessageView":"MessageView","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./GameAction":"GameAction","./PlayerNode":"PlayerNode","./RaiseLayer":"RaiseLayer"}],GameSocket:[function(e,t,i){"use strict";cc._RF.push(t,"6fc34cSKCtFQIY3btRfWLAm","GameSocket"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");i.default=class extends a.Socket{constructor(){super()}connect(e){if(this.disconnect(),cc.sys.isNative){let t=cc.url.raw("resources/raw/android.cer");cc.log("Websocket : penUrl = ",t),cc.loader.md5Pipe?(t=cc.loader.md5Pipe.transformURL(t),cc.log("Websocket : md5Pipe = ",t),this.m_socket=new WebSocket(e,null,t)):(cc.log("Websocket : cc.loader.md5Pipe:",cc.loader.md5Pipe),this.m_socket=new WebSocket(e,null,t))}else this.m_socket=new WebSocket(e);this.m_socket.binaryType="arraybuffer",this.m_socket.onopen=this.onConnect.bind(this),this.m_socket.onmessage=this.onSocketDataReceived.bind(this),this.m_socket.onerror=this.onError.bind(this),this.m_socket.onclose=this.onClose.bind(this)}disconnect(){super.disconnect(),null!==this.m_socket&&(this.m_socket.onopen=null,this.m_socket.onmessage=null,this.m_socket.onerror=null,this.m_socket.onclose=null,this.m_socket.close(),this.m_socket=null)}send(e,t){this.isConnected()&&this.m_socket.send(this.encodeMsgID(e,t))}encodeMsgID(e,t){}decodeMsgID(e){}onSocketDataReceived(e){var t=e.data,i=this.decodeMsgID(t);this.onMessage(i)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GradientColor:[function(e,t,i){"use strict";cc._RF.push(t,"926bagTp+JG/5Bxdn0uOLz4","GradientColor");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:s,requireComponent:n,disallowMultiple:r,executeInEditMode:l,help:c,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this._colors=[cc.Color.RED,cc.Color.BLUE,cc.Color.RED,cc.Color.BLUE]}get colors(){return this._colors}set colors(e){e.length>4&&(e.length=4),this._colors=e,this.markForRender()}onEnable(){this.replaceFunction()}onDisable(){this.restoreFunction()}resetInEditor(){this.markForRender()}replaceFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=()=>{const e=t._renderData.uintVDatas[0];if(!e)return;const i=t.floatsPerVert,a=t.colorOffset,o=this.node.color;let s=0;for(let t=a,n=e.length;t<n;t+=i)e[t]=(this.colors[s++]||o)._val},this.markForRender())}restoreFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=cc.Assembler2D.prototype.updateColor,this.markForRender())}markForRender(){this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR}};a([s()],d.prototype,"_colors",void 0),a([s({type:[cc.Color],tooltip:!1})],d.prototype,"colors",null),d=a([o,n(cc.RenderComponent),r,l,c("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/renderers/GradientColor.ts"),h("\u7ec4\u4ef6\u5e93/GradientColor")],d),i.default=d,cc._RF.pop()},{}],HandCardsData:[function(e,t,i){"use strict";cc._RF.push(t,"8bbb8wyyidJpaBr4siF6KSX","HandCardsData"),Object.defineProperty(i,"__esModule",{value:!0}),i.HandCardsData=i.CardTypeData=void 0;const a=e("./CommonDefine"),o=e("./PokerData");function s(e,t){return(e-1+13)%13-(t-1+13)%13}function n(e,t){return o.PokerData.getPokerPoint(e)-o.PokerData.getPokerPoint(t)}class r{constructor(){this.card=[],this.type=a.CardType.Highcard,this.compare=[]}}i.CardTypeData=r,i.HandCardsData=class{constructor(){}resetGameData(){this.handCardList=[]}getHandCardList(){return this.handCardList}dealCards(e){e.length>a.MAX_HAND_CARDS&&(e=e.slice(0,a.MAX_HAND_CARDS),cc.log("dealCards card error")),this.handCardList=e}getCardsType(e,t){let i=((e,t)=>[...e,...t])(t,e),l={},c={};i.sort(n);let h=o.PokerData.getPokerPoint(i[0]),d=!0,u=[h];i.forEach((e,t)=>{let a=o.PokerData.getPokerPoint(e);t>0&&(a===h+1?((d||u.length)&&(d=!0,u.push(e)),u[u.length-1]==o.PokerPoint.PointK&&o.PokerData.getPokerPoint(i[0])==o.PokerPoint.PointA&&u.push(i[0])):a===h||(d=!1,u.length<5&&(u=[e])),h=a),l[a]||(l[a]=[]),l[a].push(e),c[o.PokerData.getPokerColor(e)]||(c[o.PokerData.getPokerColor(e)]=[]),c[o.PokerData.getPokerColor(e)].push(e)}),u.length;let m=[],g=[],p=[];for(let a in l)4==l[a].length&&m.push(Number(a)),3==l[a].length&&g.push(Number(a)),2==l[a].length&&p.push(Number(a));m.length,g.length>0&&(g.sort(s),g.reverse()),p.length>0&&(p.sort(s),p.reverse());let f=[];for(let a in c)c[a].length>=5&&(f=c[a]);f.length;let y=[];if(f.length>0){let e=f[0],t=!0;y=[e],f.forEach(i=>{o.PokerData.getPokerPoint(i)===o.PokerData.getPokerPoint(e)+1?(t||y.length)&&(t=!0,y.push(i),y[y.length-1]==o.PokerPoint.PointK&&o.PokerData.getPokerPoint(f[0])==o.PokerPoint.PointA&&y.push(f[0])):o.PokerData.getPokerPoint(i)===o.PokerData.getPokerPoint(e)||(t=!1,y.length<5&&(y=[i])),e=i}),y.length}let C=new r;if(y&&y.length>=5)o.PokerData.getPokerPoint(y[y.length-1])==o.PokerPoint.PointA?C.type=a.CardType.RoyalFlush:C.type=a.CardType.StraightFlush,C.compare=[y[y.length-1]],C.card=y.slice(y.length-5,y.length);else if(m.length>0)C.type=a.CardType.FourKind,o.PokerData.getPokerPoint(i[i.length-1])!=o.PokerData.getPokerPoint(m[0])?C.compare.push(i[i.length-1]):i.length>4&&C.compare.push(i[i.length-5]),C.card=l[m[0]];else if(g.length>1||g.length>0&&p.length>0)C.type=a.CardType.Fullhouse,g.length>1?(C.compare=g,C.card=l[g[0]].concat(l[g[1]]),C.card.pop()):g.length>0&&p.length>0&&(C.compare=[g[0],p[0]],C.card=l[g[0]].concat(l[p[0]]));else if(f.length>0)C.type=a.CardType.Flush,f.sort(s),f.length>5?C.card=f.slice(f.length-5,f.length):C.card=f,C.compare=C.card.slice(),C.compare.reverse();else if(u.length>=5)C.type=a.CardType.Straight,C.compare=[u[u.length-1]],C.card=u.slice(u.length-5,u.length);else if(1==g.length){C.type=a.CardType.ThreeKind,C.compare=[g[0]],C.card=l[g[0]];for(let e=i.length-1;e>=0;e--)C.compare.length<3&&o.PokerData.getPokerPoint(i[e])!=g[0]&&C.compare.push(i[e])}else if(p.length>1){C.type=a.CardType.TwoPairs,C.compare=[p[0],p[1]],C.card=l[p[0]].concat(l[p[1]]);for(let e=i.length-1;e>=0;e--)C.compare.length<3&&o.PokerData.getPokerPoint(i[e])!=p[0]&&o.PokerData.getPokerPoint(i[e])!=p[1]&&C.compare.push(i[e])}else if(1==p.length){C.type=a.CardType.OnePair,C.compare=[p[0]],C.card=l[p[0]];for(let e=i.length-1;e>=0;e--)C.compare.length<4&&o.PokerData.getPokerPoint(i[e])!=p[0]&&C.compare.push(i[e])}else{C.type=a.CardType.Highcard,i.sort(s),C.card=[],C.compare=[];for(let e=i.length-1;e>=0;e--)C.compare.length<5&&C.compare.push(i[e])}return C}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./PokerData":"PokerData"}],HeartBeatHandler:[function(e,t,i){"use strict";cc._RF.push(t,"cbbe6PK4uNJaqhiv8nPLltL","HeartBeatHandler"),Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeatHandler=void 0,i.HeartBeatHandler=class{constructor(){this.m_idle=10,this.m_maxMissCount=2,this.m_idleCallBack=null,this.m_timeOutCallBack=null,this.m_missCallBack=null,this.m_logName="",this.m_curMissCount=0,this.m_lastTickTime=-1,this.m_curIdle=-1,cc.director.getScheduler().enableForTarget(this)}set idle(e){this.m_idle=e}set maxMissCount(e){this.m_maxMissCount=e}set idleCallBack(e){this.m_idleCallBack=e}set timeOutCallBack(e){this.m_timeOutCallBack=e}set missCallBack(e){this.m_missCallBack=e}set logName(e){this.m_logName=e}startIdle(){this.clearState();let e=(new Date).getTime();this.m_lastTickTime=e,cc.director.getScheduler().unscheduleAllForTarget(this),cc.director.getScheduler().schedule(this.onIdleTime,this,1),cc.log(this.m_logName+" start idle.")}stopIdle(){this.m_curMissCount=0,this.m_lastTickTime=-1,cc.director.getScheduler().unscheduleAllForTarget(this),cc.log(this.m_logName+" stop idle.")}onReceiveHeartBeat(){this.clearState()}clearState(){this.m_curMissCount=0,this.m_curIdle=this.m_idle}sendIdle(){this.m_curMissCount++,2==this.m_curMissCount&&(cc.log(this.m_logName+" miss heart beat."),null!=this.m_missCallBack&&this.m_missCallBack()),this.m_maxMissCount>0&&this.m_curMissCount>this.m_maxMissCount?this.onHeartBeatTimeOut():null!=this.m_idleCallBack&&this.m_idleCallBack()}onIdleTime(e){let t=(new Date).getTime();this.m_lastTickTime>0&&(e=(t-this.m_lastTickTime)/1e3),this.m_lastTickTime=t,e>this.m_idle*this.m_maxMissCount?this.onHeartBeatTimeOut():(this.m_curIdle-=e,this.m_curIdle<=0&&(this.m_curIdle=this.m_idle,this.sendIdle()))}onHeartBeatTimeOut(){cc.log(this.m_logName+" heart beat time out."),this.stopIdle(),null!=this.m_timeOutCallBack&&this.m_timeOutCallBack()}},cc._RF.pop()},{}],HelpLayer:[function(e,t,i){"use strict";cc._RF.push(t,"e4adfdVRVBBArTusuUkFp/l","HelpLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),n=e("../Business/Data/CommonDefine"),{ccclass:r,property:l,menu:c}=cc._decorator;let h=class extends s.default{constructor(){super(...arguments),this.shortcutLayer=null,this.scrollView=null,this.animationDuration=.3}static get path(){return"Scenes/Game/HelpLayer"}onLoad(){this.shortcutLayer.children.forEach(e=>{e.on(cc.Node.EventType.TOUCH_END,this.onTouchShortcut,this)})}updateDisplay(){this.scrollView.scrollToTop(.1)}onTouchShortcut(e){let t=e.target.name,i=this.scrollView.content.children.find(e=>e.name==t);if(!i)return;o.AudioEngine.playEffect(n.SoundList.Click);let a=0;a=i.getSiblingIndex()>7?40:30;let s=(-i.y+a*i.getSiblingIndex())/this.scrollView.content.height;this.scrollView.stopAutoScroll(),this.scrollView.scrollToPercentVertical(1-s,.1,!0)}onTouchOkey(){this.hide()}onTouchClose(){this.hide()}};a([l(cc.Node)],h.prototype,"shortcutLayer",void 0),a([l(cc.ScrollView)],h.prototype,"scrollView",void 0),h=a([r,c("Game/HelpLayer")],h),i.default=h,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],HomeController:[function(e,t,i){"use strict";cc._RF.push(t,"d1b6eF+E2VPu7S71KC00jY4","HomeController");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.HomeController=i.CmdRequestSngRoomList=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),r=e("../NetWork/NetworkManager"),l=e("./HomeNotice");let c=class{};c=a([o.createCommand],c),i.CmdRequestSngRoomList=c;class h extends o.Controller{constructor(){super(),this.m_socket=null,this.setName("HomeController"),o.noticeCenter.registAllNotice(this),o.commandCenter.registAllCommand(this),this.m_socket=r.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.gameData=s.default.gameData,this.homeData=s.default.homeData}onExit(){o.noticeCenter.targetOff(this),o.commandCenter.targetOff(this)}onCmdRequestSngRommList(e){let t={};cc.log("[send] RequestSngRoomList = "+JSON.stringify(t)),this.m_socket.send("REQUEST_SNG_LIST",t);let i={roomList:[]};for(let a=0;a<6;a++){let e={};e.roomCode="sng"+a,e.fee=1e3*(a+1)*(a+1),e.firstAward=4*e.fee,e.secondAward=2*e.fee,e.roomName=e.fee+" No Limit Hold'em",e.playerSum=6,e.starting=3e3;let t=[];for(let i=0;i<10;i++){let e={};e.level=i+1,e.blinds=40*(i+1)*(i+1)/2,e.ante=.1*e.blinds,e.minutes=2,t.push(e)}e.structure=t;let o=[];for(let i=0;i<2;i++){let t={};t.ranking=i+1,t.award=e.fee*(4-2*i),o.push(t)}e.award=o,i.roomList.push(e)}this.onAckRequestSngRommList(i)}onAckRequestSngRommList(e){let t=[];e.roomList.forEach(e=>{let i=new n.SngRoomData;i.roomCode=e.roomCode,i.roomName=e.roomName,i.playerSum=e.playerSum,i.firstAward=e.firstAward,i.secondAward=e.secondAward,i.fee=e.fee,i.startingChip=e.starting;let a=[];e.structure.forEach(e=>{let t=new n.SngStructureData;t.level=e.level,t.blinds=e.blinds,t.ante=e.ante,t.minutes=e.minutes,a.push(t)}),i.structure=a;let o=[];e.award.forEach(e=>{let t=new n.SngAwardData;t.ranking=e.ranking,t.award=e.award,o.push(t)}),i.award=o,t.push(i)}),this.homeData.setSngRoomList(t);let i=new l.NtcShowSngRoomList;o.noticeCenter.emit(i)}}a([o.onCommand(c)],h.prototype,"onCmdRequestSngRommList",null),a([o.onMsg("REQUEST_SNG_LIST")],h.prototype,"onAckRequestSngRommList",null),i.HomeController=h,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../NetWork/NetworkManager":"NetworkManager","./HomeNotice":"HomeNotice"}],HomeData:[function(e,t,i){"use strict";cc._RF.push(t,"43833cz8yRD7r9Zq0qV9kBo","HomeData"),Object.defineProperty(i,"__esModule",{value:!0}),i.HomeData=i.MaintainData=void 0;const a=e("./BroadcastData");i.MaintainData=class{constructor(){this.m_start=0,this.m_end=0,this.m_content=new Map,this.m_hasData=!1}isNearTime(){return this.m_hasData}isMaintainTime(){var e=(new Date).getTime();return e>this.m_start&&e<this.m_end}},i.HomeData=class{constructor(){this.m_chipsUnit=1,this.m_pointValueList=[],this.m_gameId="",this.m_ws="",this.m_chipLst=[],this.m_sngRoomList=[],this.m_broadcastData=new a.default}getChipsUnit(){return this.m_chipsUnit}setChipsUnit(e){this.m_chipsUnit=e}getPointValueList(){return this.m_pointValueList}setPointValueList(e){this.m_pointValueList=e}getGameId(){return this.m_gameId}setGameId(e){this.m_gameId=e}getWs(){return this.m_ws}setWs(e){this.m_ws=e}getBroadcastData(){return this.m_broadcastData}getChipLst(){return this.m_chipLst}setChipLst(e){this.m_chipLst=e}getSngRoomList(){return this.m_sngRoomList}setSngRoomList(e){this.m_sngRoomList=e}},cc._RF.pop()},{"./BroadcastData":"BroadcastData"}],HomeNotice:[function(e,t,i){"use strict";cc._RF.push(t,"9dc54Q5XjBHyK0mcP9ZWZh0","HomeNotice");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NtcShowSngRoomList=void 0;let o=class{};o=a([e("../../MobileKit/MKIndex").createNotice],o),i.NtcShowSngRoomList=o,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],HttpUtils:[function(e,t,i){"use strict";cc._RF.push(t,"6dcb9C9N2ZAg5+91n23jf2N","HttpUtils"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");i.default=class{static generateSign(e){var t=[];for(var i in e)t.push(i);t.sort();for(var o="",s=0;s<t.length;++s){let i=t[s];o+=i+e[i]}return o+="ddgame",a.CryptoUtils.md5(o)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],InforLayer:[function(e,t,i){"use strict";cc._RF.push(t,"57a2aHqg8VNequMt7ge6nb7","InforLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("./Common/PopupBase"),r=e("./Common/UIUtils"),{ccclass:l,property:c,menu:h}=cc._decorator;let d=class extends n.default{constructor(){super(...arguments),this.txtTips=null,this.txtPointValue=null,this.txtMaxWin=null,this.txtDecks=null,this.btnOkey=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}onLoad(){r.UIUtils.ButtonEvent(this.btnOkey,this.onTouchClose.bind(this))}updateDisplay(e=!1){let t="\u20b9"+r.UIUtils.getShortNumber(s.default.gameData.getDropChips());this.txtTips.string=o.LocalLang.get("game_infor_tips",[t]),this.txtDecks.string="2",e&&this.setAutoClose()}setAutoClose(){cc.tween(this.node).delay(3).call(this.onTouchClose.bind(this)).start()}onTouchClose(){this.hide()}};a([c(cc.Label)],d.prototype,"txtTips",void 0),a([c(cc.Label)],d.prototype,"txtPointValue",void 0),a([c(cc.Label)],d.prototype,"txtMaxWin",void 0),a([c(cc.Label)],d.prototype,"txtDecks",void 0),a([c(cc.Button)],d.prototype,"btnOkey",void 0),d=a([l,h("Game/InforLayer")],d),i.default=d,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],LanguageLayer:[function(e,t,i){"use strict";cc._RF.push(t,"de8164TwFRB+LdFXf1H7BpI","LanguageLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),{ccclass:n,property:r,menu:l}=cc._decorator;let c=class extends s.default{constructor(){super(...arguments),this.langBtnArr=[],this.animationDuration=0,this.langIdx=0}static get path(){return"Scenes/Game/language_layer"}onLoad(){this.main||(this.main=this.node),o.noticeCenter.registAllNotice(this),this.langArr=["en","hi"];let e=o.LocalLang.getLanguage(),t=this.langArr.indexOf(e);t>=0&&(this.langBtnArr[t].check(),this.langIdx=t)}onTouchClose(){this.hide()}onTouchLang(e,t){this.langIdx=Number(t)}onTouchConfirm(){o.LocalLang.setLanguage(this.langArr[this.langIdx]),this.hide()}};a([r([cc.Toggle])],c.prototype,"langBtnArr",void 0),c=a([n],c),i.default=c,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],LoadingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ce28cPR/G1B07ofLePg+SKH","LoadingConfig"),Object.defineProperty(i,"__esModule",{value:!0}),i.SpriteFrameResLst=i.LoadingResLst=void 0;const a=e("../Business/Data/CommonDefine");i.LoadingResLst=new Map,i.SpriteFrameResLst=new Map,i.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Click,cc.AudioClip),i.LoadingResLst.set("Sound/win",cc.AudioClip),i.LoadingResLst.set("Sound/big_winner",cc.AudioClip),i.LoadingResLst.set("Sound/chip",cc.AudioClip),i.LoadingResLst.set(a.SoundList.BtnWrong,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Dealcard2,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Button01,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Button02,cc.AudioClip),i.LoadingResLst.set(a.SoundList.CardFlip1,cc.AudioClip),i.LoadingResLst.set(a.SoundList.CardFlip2,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Alarm,cc.AudioClip),i.LoadingResLst.set(a.PrefabList.PlayerNode,cc.Prefab),i.LoadingResLst.set(a.PrefabList.PokerNode,cc.Prefab),i.LoadingResLst.set(a.PrefabList.GameEntyuCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.RecordCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.RecordPage,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngRoomListLayer,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngRoomCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngDetailLayer,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngStructureCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngAwardCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngDetailInGameLayer,cc.Prefab),i.LoadingResLst.set(a.PrefabList.SngRankingCell,cc.Prefab),i.LoadingResLst.set("Scenes/Common/MessageView",cc.Prefab),i.LoadingResLst.set("Scenes/Common/ConfirmDialog",cc.Prefab),i.SpriteFrameResLst.set("Texture/Lobby/img_entry0",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_5",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_6",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_7",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_8",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_9",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_10",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_j",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_q",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_k",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_5",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_6",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_7",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_8",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_9",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_10",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_j",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_q",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_k",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/hearts_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/joker_big",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/joker_small",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/poker_bg",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/poker_back",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/spades_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal0",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal5",cc.SpriteFrame),cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine"}],LoadingScene:[function(e,t,i){"use strict";cc._RF.push(t,"b3227XK/V5PI5kdwcCTTjvS","LoadingScene");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("../Business/Data/ConfigManager"),r=e("../Business/Data/CommonDefine"),l=e("../Business/Logic/SceneController"),c=e("./LoadingConfig"),h=e("../Business/Logic/GameController"),d=e("../Business/Data/SaveDataManager"),u=e("../Business/NetWork/NetworkController"),m=e("../Business/NetWork/NetworkNotice"),g=e("../Business/Logic/HomeController"),{ccclass:p,property:f,menu:y}=cc._decorator;let C=class extends cc.Component{constructor(){super(...arguments),this.urlConfig=null,this.appInfo=null,this.progressBar=null,this.txtLoading=null,this.loadResOK=!1,this.loadSpriteFrameOK=!1,this.loginOK=!0}onLoad(){o.noticeCenter.registAllNotice(this),this.initApp(),cc.director.preloadScene("Game",this.onSceneProgress.bind(this),()=>{}),this.txtLoading.string="0 %",this.progressBar.progress=0}initApp(){s.default.init(),d.default.init(),o.commandCenter.addController(new l.SceneController),o.commandCenter.addController(new h.GameController),o.commandCenter.addController(new u.NetworkController),o.commandCenter.addController(new g.HomeController),o.AudioEngine.setEffectsEnabled(d.default.getEffectEnable()),o.AudioEngine.setMusicEnabled(d.default.getMusicEnable()),o.AudioEngine.setEffectsVolume(.5),o.AudioEngine.setMusicVolume(.5),o.LocalLang.setLanguage("en"),this.initTestData(),n.default.setUrlConfig(this.urlConfig.json),n.default.setAppInfo(this.appInfo.json),this.loadRes()}initTestData(){s.default.userData.setUid(5566),s.default.userData.setNickName("User 1234567890"),s.default.userData.setBalance(5e6),s.default.homeData.setPointValueList([5,10,20,40,100]),s.default.homeData.setChipsUnit(1),s.default.homeData.setGameId("0"),s.default.homeData.setChipLst([5,10,50,100,500,1e3]),s.default.userData.setGameRecordLst([{balance:767,time:1660210006147,pv:4,isWin:!1},{balance:1801,time:1659537223957,pv:3,isWin:!0},{balance:324,time:1659477042944,pv:1,isWin:!1},{balance:1775,time:1660554944361,pv:0,isWin:!0},{balance:815,time:1659688686469,pv:0,isWin:!1},{balance:984,time:1660066596467,pv:4,isWin:!0},{balance:101,time:1660351832652,pv:0,isWin:!1},{balance:807,time:1660266918017,pv:2,isWin:!0},{balance:520,time:1659536063783,pv:3,isWin:!0},{balance:1768,time:1660205692424,pv:1,isWin:!1},{balance:1657,time:1660415139657,pv:1,isWin:!0},{balance:1483,time:1660531764400,pv:0,isWin:!0},{balance:1927,time:1659347722903,pv:3,isWin:!0},{balance:1330,time:1660071385718,pv:1,isWin:!1},{balance:916,time:1660427852131,pv:1,isWin:!0},{balance:1935,time:1660203458317,pv:4,isWin:!0},{balance:1704,time:1659479313312,pv:1,isWin:!1},{balance:675,time:1659433504892,pv:3,isWin:!0},{balance:146,time:1660060789960,pv:2,isWin:!0},{balance:1105,time:1660429411071,pv:0,isWin:!1},{balance:455,time:1660072578178,pv:3,isWin:!0},{balance:469,time:1660283031166,pv:0,isWin:!0},{balance:597,time:1659407293598,pv:1,isWin:!0},{balance:960,time:1660281561832,pv:1,isWin:!1},{balance:1228,time:1660405372961,pv:0,isWin:!1},{balance:1615,time:1660093538168,pv:2,isWin:!1},{balance:971,time:1660222691920,pv:3,isWin:!1},{balance:353,time:1660103088442,pv:3,isWin:!0},{balance:204,time:1659856606624,pv:2,isWin:!1},{balance:1893,time:1660065351504,pv:2,isWin:!1},{balance:888,time:1659805156089,pv:2,isWin:!0},{balance:223,time:1659669666060,pv:0,isWin:!0},{balance:1049,time:1660484766966,pv:1,isWin:!0},{balance:170,time:1660254553870,pv:2,isWin:!1},{balance:1419,time:1659618906950,pv:1,isWin:!0},{balance:1532,time:1659567352788,pv:3,isWin:!1},{balance:220,time:1660565727907,pv:1,isWin:!0},{balance:937,time:1659364886782,pv:2,isWin:!0},{balance:927,time:1659763699500,pv:3,isWin:!1},{balance:1675,time:1660322288903,pv:2,isWin:!0},{balance:746,time:1659791005751,pv:0,isWin:!1},{balance:1688,time:1660016766384,pv:3,isWin:!0},{balance:539,time:1659592131477,pv:4,isWin:!0},{balance:1316,time:1660370688376,pv:0,isWin:!1},{balance:174,time:1659392759810,pv:3,isWin:!1},{balance:1556,time:1660280505561,pv:1,isWin:!1},{balance:740,time:1659914727240,pv:4,isWin:!1},{balance:1488,time:1659601067817,pv:0,isWin:!1},{balance:1568,time:1660300598747,pv:0,isWin:!0},{balance:944,time:1660078074904,pv:0,isWin:!0},{balance:729,time:1659539671704,pv:1,isWin:!0},{balance:1462,time:1660535647840,pv:3,isWin:!0},{balance:1928,time:1660376298332,pv:1,isWin:!1},{balance:835,time:1660498321689,pv:2,isWin:!0},{balance:1473,time:1659626088745,pv:0,isWin:!0},{balance:941,time:1660275922569,pv:0,isWin:!0},{balance:914,time:1659706692501,pv:4,isWin:!0},{balance:1421,time:1659684137158,pv:3,isWin:!1}])}loadRes(){cc.resources.load(Array.from(c.LoadingResLst.keys()),null,this.onLoadProgress.bind(this),this.onLoadResComplete.bind(this)),cc.resources.load(Array.from(c.SpriteFrameResLst.keys()),cc.SpriteFrame,this.onLoadProgress.bind(this),this.onLoadSpriteFrameComplete.bind(this))}onLoadProgress(){}onLoadResComplete(){this.loadResOK=!0,this.gotoNextScene()}onLoadSpriteFrameComplete(){this.loadSpriteFrameOK=!0,this.gotoNextScene()}onSceneProgress(e,t,i){try{this.progressBar.progress=e/t,this.txtLoading.string=Math.floor(e/t*100)+" %"}catch(a){}}gotoNextScene(){this.loadResOK&&this.loadSpriteFrameOK&&this.loginOK&&o.commandCenter.emit(new l.CmdScene(r.SceneType.Lobby))}onNtcLogin(e){0==e.result&&(this.loginOK=!0,this.gotoNextScene())}};a([f(cc.JsonAsset)],C.prototype,"urlConfig",void 0),a([f(cc.JsonAsset)],C.prototype,"appInfo",void 0),a([f(cc.ProgressBar)],C.prototype,"progressBar",void 0),a([f(cc.Label)],C.prototype,"txtLoading",void 0),a([o.onNotice(m.NtcLogin)],C.prototype,"onNtcLogin",null),C=a([p],C),i.default=C,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/ConfigManager":"ConfigManager","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/HomeController":"HomeController","../Business/Logic/SceneController":"SceneController","../Business/NetWork/NetworkController":"NetworkController","../Business/NetWork/NetworkNotice":"NetworkNotice","../MobileKit/MKIndex":"MKIndex","./LoadingConfig":"LoadingConfig"}],LobbyScene:[function(e,t,i){"use strict";cc._RF.push(t,"89bb4LCQZZMergYFs0a2QwS","LobbyScene");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),r=e("../Common/PopupManager"),l=e("../../Business/Data/SaveDataManager"),c=e("../Common/UIUtils"),h=e("../Common/PrefabPool"),d=e("./GameEntryCell"),u=e("../../Business/Logic/HomeController"),{ccclass:m,property:g,menu:p}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.entryScroll=null,this.txtUserName=null,this.txtUid=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.txtBroadcast=null,this.musicOn=!1,this.soundOn=!1,this.sngRoomListLayer=null}onLoad(){o.noticeCenter.registAllNotice(this),this.initUI(),this.showBroadCast(),o.AudioEngine.playMusic(n.SoundList.Bgm,!0)}initUI(){this.txtBalance.string=c.UIUtils.getIndiaFormat(s.default.userData.getBalance()),this.txtUserName.string=s.default.userData.getNickName(),this.txtUid.string=s.default.userData.getUid(),c.UIUtils.NodeClickEvent(this.btnRecord,this.onTouchRecord.bind(this)),c.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),c.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.musicOn=l.default.getMusicEnable(),this.soundOn=l.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,s.default.homeData.getPointValueList().forEach((e,t)=>{let i=h.default.get(n.PrefabList.GameEntyuCell);i.setParent(this.entryScroll.content),i.getComponent(d.GameEntryCell).setData(t)}),this.entryScroll.scrollToLeft(),this.sngRoomListLayer=h.default.get(n.PrefabList.SngRoomListLayer),this.sngRoomListLayer.setParent(this.node),this.sngRoomListLayer.active=!1}onTouchRecord(){r.default.show(n.PrefabList.GameRecordLayer)}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,l.default.setMusicEnable(this.musicOn),o.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,l.default.setEffectEnable(this.soundOn),o.AudioEngine.setEffectsEnabled(this.soundOn),o.AudioEngine.playEffect(n.SoundList.Click)}onTouchSng(){this.sngRoomListLayer.active=!0,o.commandCenter.emit(new u.CmdRequestSngRoomList)}showBroadCast(){let e=s.default.homeData.getBroadcastData().getCurNotice(),t=this.txtBroadcast.node.parent.height;this.txtBroadcast.string=e,this.txtBroadcast.node.y=t,cc.tween(this.txtBroadcast.node).to(1,{y:0},{easing:"smooth"}).delay(2).to(1,{y:-t},{easing:"smooth"}).call(this.showBroadCast.bind(this)).start()}};a([g(cc.Label)],f.prototype,"txtBalance",void 0),a([g(cc.ScrollView)],f.prototype,"entryScroll",void 0),a([g(cc.Label)],f.prototype,"txtUserName",void 0),a([g(cc.Label)],f.prototype,"txtUid",void 0),a([g(cc.Node)],f.prototype,"btnRecord",void 0),a([g(cc.Sprite)],f.prototype,"imgMusic",void 0),a([g(cc.Sprite)],f.prototype,"imgSound",void 0),a([g(cc.SpriteFrame)],f.prototype,"imgMusicOn",void 0),a([g(cc.SpriteFrame)],f.prototype,"imgMusicOff",void 0),a([g(cc.SpriteFrame)],f.prototype,"imgSoundOn",void 0),a([g(cc.SpriteFrame)],f.prototype,"imgSoundOff",void 0),a([g(cc.Label)],f.prototype,"txtBroadcast",void 0),f=a([m,p("Lobby/LobbyScene")],f),i.default=f,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Data/SaveDataManager":"SaveDataManager","../../Business/Logic/HomeController":"HomeController","../../MobileKit/MKIndex":"MKIndex","../Common/PopupManager":"PopupManager","../Common/PrefabPool":"PrefabPool","../Common/UIUtils":"UIUtils","./GameEntryCell":"GameEntryCell"}],MKActionQueue:[function(e,t,i){"use strict";cc._RF.push(t,"7733b8JdpNIHYxZ1k+2nx9N","MKActionQueue"),Object.defineProperty(i,"__esModule",{value:!0}),i.ActionQueue=void 0,i.ActionQueue=class{constructor(){this.m_actionQueue=null,this.m_delay=0,this.m_actionQueue=[],cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}postAction(e,t){this.m_actionQueue.push({func:e,param:t})}setDelayTime(e){e<cc.macro.FLT_EPSILON||this.m_delay<e&&(this.m_delay=e)}clear(){this.clearDelayTime(),this.removeAllAction()}clearDelayTime(){this.m_delay=0}removeAllAction(){this.m_actionQueue.length=0}update(e){if(this.m_delay>0&&(this.m_delay-=e),this.m_actionQueue.length>0&&this.m_delay<cc.macro.FLT_EPSILON){var t=this.m_actionQueue.shift();t.func(t.param)}}onExit(){this.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)}},cc._RF.pop()},{}],MKAudioEngine:[function(e,t,i){"use strict";cc._RF.push(t,"1950dWg/apGgKPh5p5a+7i+","MKAudioEngine"),Object.defineProperty(i,"__esModule",{value:!0}),i.AudioEngine=void 0;let a=!1,o=!1,s=null,n=!1;class r{static playEffect(e,t=!1){if(a){if(e instanceof cc.AudioClip)return cc.audioEngine.playEffect(e,t);{let i=cc.resources.get(e);if(null!=i)return cc.audioEngine.playEffect(i,t)}}return 0}static stopEffect(e){e>0&&cc.audioEngine.stopEffect(e)}static playMusic(e,t=!1){if(e instanceof cc.AudioClip)s=e;else{let t=cc.resources.get(e);null!=t&&(s=t)}n=t,o&&cc.audioEngine.playMusic(s,n)}static stopMusic(){s=null,cc.audioEngine.stopMusic()}static setEffectsVolume(e){cc.audioEngine.setEffectsVolume(e)}static setMusicVolume(e){cc.audioEngine.setMusicVolume(e)}static setAudioVolume(e,t){cc.audioEngine.setVolume(e,t)}static setEffectsEnabled(e){a=e,e||cc.audioEngine.stopAllEffects()}static setMusicEnabled(e){o=e,e?null!=s&&cc.audioEngine.playMusic(s,n):cc.audioEngine.stopMusic()}static setMute(e){r.setEffectsEnabled(!e),r.setMusicEnabled(!e)}static isMute(){return o&&a}static isMusicPlaying(){return cc.audioEngine.isMusicPlaying()}static pauseMusic(){cc.audioEngine.pauseMusic()}}i.AudioEngine=r,cc._RF.pop()},{}],MKCommandCenter:[function(e,t,i){"use strict";cc._RF.push(t,"36eecgRfGBIvrNItfzw/c9j","MKCommandCenter"),Object.defineProperty(i,"__esModule",{value:!0}),i.onCommand=i.commandCenter=i.CommandCenter=i.Controller=i.createCommand=void 0;let a=0;i.createCommand=function(e){e.Type="Command"+a++,e.prototype.getType=function(){return e.Type}},i.Controller=class{constructor(){this.name=""}setName(e){this.name=e}getName(){return this.name}onExit(){}};class o{constructor(){this.m_controllers=new Map,this.m_eventTarget=new cc.EventTarget}addController(e){var t=e.getName();this.m_controllers.get(t)?(cc.log("MKCommandCenter warning, controller already exist"),e.onExit()):this.m_controllers.set(t,e)}removeController(e){var t=this.m_controllers.get(e);t&&(t.onExit(),this.targetOff(t),this.m_controllers.delete(e))}hasController(e){return this.m_controllers.get(e)}on(e,t,i){this.m_eventTarget.on(e.Type,t,i)}off(e,t,i){this.m_eventTarget.off(e.Type,t,i)}registAllCommand(e){if(e.commandList)for(let t of e.commandList)this.on(t.command,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.hasEventListener(e.getType())?this.m_eventTarget.emit(e.getType(),e):cc.log("MKCommandCenter err : no command handler, command type = "+e.getType())}}i.CommandCenter=o,i.commandCenter=new o,i.onCommand=function(e){return function(t,i){t.commandList||(t.commandList=[]),t.commandList.push({command:e,methodName:i})}},cc._RF.pop()},{}],MKCryptoUtils:[function(e,t,i){"use strict";cc._RF.push(t,"1ff71vS4J1NA7ytlCGJPgtt","MKCryptoUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.CryptoUtils=void 0,i.CryptoUtils=class{static md5(e){return CryptoJS.MD5(e).toString()}static base64Encode(e){var t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)}static base64Decode(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)}},cc._RF.pop()},{}],MKHttp:[function(e,t,i){"use strict";cc._RF.push(t,"0073dUDVQRAsofk0kRCNO0I","MKHttp"),Object.defineProperty(i,"__esModule",{value:!0}),i.Http=void 0;class a{static formatParams(e){let t="",i=!1;for(let a in e)i?t+="&":i=!0,t+=a+"="+e[a];return t}static get(e,t,i,o=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}i(!0,a)}else cc.log("http get error! code = %s, url = %s",s.status,e),i(!1,null)},s.onerror=function(){cc.log("http get error! url = %s",e),i(!1,null)},s.ontimeout=function(){cc.log("http get timeout! url = %s",e),i(!1,null)},o==a.ContentType.Json?(s.open("GET",e,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):o==a.ContentType.Form?(t&&(e+="?"+a.formatParams(t)),s.open("GET",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send()):o==a.ContentType.Multipart&&(s.open("GET",e,!0),s.setRequestHeader("Content-Type","multipart/form-data"),s.send())}static post(e,t,i,o=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}i(!0,a)}else cc.log("http post error! code = %s, url = %s",s.status,e),i(!1,null)},s.onerror=function(){cc.log("http post error! url = %s",e),i(!1,null)},s.ontimeout=function(){cc.log("http post timeout! url = %s",e),i(!1,null)},s.open("POST",e,!0),o==a.ContentType.Json?(s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(t?a.formatParams(t):null))}static delete(e,t,i,o=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http delete result parse failed! url = %s",e)}i(!0,a)}else cc.log("http delete error! code = %s, url = %s",s.status,e),i(!1,null)},s.onerror=function(){cc.log("http delete error! url = %s",e),i(!1,null)},s.ontimeout=function(){cc.log("http delete timeout! url = %s",e),i(!1,null)},o==a.ContentType.Json?(s.open("DELETE",e,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):(t&&(e+="?"+a.formatParams(t)),s.open("DELETE",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send())}static postWithAuth(e,t,i,a){let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){let a={};if(""!=o.responseText)try{a=JSON.parse(o.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}i(!0,a)}else cc.log("http post error! code = %s, url = %s",o.status,e),i(!1,null)},o.onerror=function(){cc.log("http post error! url = %s",e),i(!1,null)},o.ontimeout=function(){cc.log("http post timeout! url = %s",e),i(!1,null)},o.open("POST",e,!0),o.setRequestHeader("Authorization","Bearer "+a),o.setRequestHeader("Content-Type","multipart/form-data"),o.send(t?JSON.stringify(t):null)}static getWithAuth(e,t,i,a){let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){let a={};if(""!=o.responseText)try{a=JSON.parse(o.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}i(!0,a)}else cc.log("http get error! code = %s, url = %s",o.status,e),i(!1,null)},o.onerror=function(){cc.log("http get error! url = %s",e),i(!1,null)},o.ontimeout=function(){cc.log("http get timeout! url = %s",e),i(!1,null)},o.open("GET",e,!0),o.setRequestHeader("Authorization","Bearer "+a),o.setRequestHeader("Content-Type","multipart/form-data"),o.send()}}i.Http=a,a.ContentType={Form:1,Json:2,Multipart:3},cc._RF.pop()},{}],MKImageDownloader:[function(e,t,i){"use strict";cc._RF.push(t,"4919aB9yv1POaDSwtAZW/Qh","MKImageDownloader"),Object.defineProperty(i,"__esModule",{value:!0}),i.imageDowloader=i.ImageDownloader=void 0;const a=e("./MKCryptoUtils");class o{constructor(){this.m_observers=null,this.m_observers=[]}loadUrl(e,t){for(var i=!1,a=0,o=this.m_observers.length;a<o;++a){var s=this.m_observers[a];if(e==s.url){s.callback.push(t),i=!0;break}}i||(this.m_observers.push({url:e,callback:[t]}),this.downloadImage(e))}onDownloadImage(e,t){for(var i=this.m_observers.length-1;i>=0;--i){var a=this.m_observers[i];if(e==a.url){for(var o=a.callback,s=0;s<o.length;++s)o[s](e,t);this.m_observers.splice(i,1);break}}}downloadImage(e){var t=jsb.fileUtils.getWritablePath()+"net_image/",i=t+a.CryptoUtils.md5(e)+".jpg";if(jsb.fileUtils.isFileExist(i))this.onDownloadImage(e,i);else{jsb.fileUtils.isDirectoryExist(t)||jsb.fileUtils.createDirectory(t);var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?this.saveFile(e,i,o.response):cc.log("Remote download file failed."))}.bind(this),o.responseType="arraybuffer",o.open("GET",e,!0),o.send()}}saveFile(e,t,i){jsb.fileUtils.writeDataToFile(new Uint8Array(i),t)?this.onDownloadImage(e,t):cc.log("Remote write file failed.")}clearCache(){var e=jsb.fileUtils.getWritablePath()+"net_image/";jsb.fileUtils.listFiles(e).length>100&&jsb.fileUtils.removeDirectory(e)}}i.ImageDownloader=o,i.imageDowloader=new o,cc._RF.pop()},{"./MKCryptoUtils":"MKCryptoUtils"}],MKIndex:[function(e,t,i){"use strict";cc._RF.push(t,"0f526BZPmpBr7wVUh62Ltxm","MKIndex");var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(i,"__esModule",{value:!0}),o(e("./Common/MKCryptoUtils"),i),o(e("./Common/MKLocalLang"),i),o(e("./Common/MKSystem"),i),o(e("./Common/MKUtils"),i),o(e("./Common/MKImageDownloader"),i),o(e("./Common/MKAudioEngine"),i),o(e("./Common/HeartBeatHandler"),i),o(e("./Event/MKCommandCenter"),i),o(e("./Event/MKNoticeCenter"),i),o(e("./Event/MKActionQueue"),i),o(e("./Network/MKHttp"),i),o(e("./Network/MKSocket"),i),cc._RF.pop()},{"./Common/HeartBeatHandler":"HeartBeatHandler","./Common/MKAudioEngine":"MKAudioEngine","./Common/MKCryptoUtils":"MKCryptoUtils","./Common/MKImageDownloader":"MKImageDownloader","./Common/MKLocalLang":"MKLocalLang","./Common/MKSystem":"MKSystem","./Common/MKUtils":"MKUtils","./Event/MKActionQueue":"MKActionQueue","./Event/MKCommandCenter":"MKCommandCenter","./Event/MKNoticeCenter":"MKNoticeCenter","./Network/MKHttp":"MKHttp","./Network/MKSocket":"MKSocket"}],MKLocalLang:[function(e,t,i){"use strict";cc._RF.push(t,"26623qYW/1OJ7PqJm16Um6d","MKLocalLang"),Object.defineProperty(i,"__esModule",{value:!0}),i.LocalLang=void 0;class a{static checkInit(){this.language||this.setLanguage("en")}static setLanguage(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())}static getLanguage(){return this.language}static _addOrDelLabel(e,t){if(t)this.labelArr.push(e);else{let t=this.labelArr.indexOf(e);-1!==t&&this.labelArr.splice(t,1)}}static get(e,t){if(this.checkInit(),null==t||0===t.length)return this.labelData[e]||e;let i=this.labelData[e]||e;for(let a=0;a<t.length;a++){let e=new RegExp("#"+a,"g");i=i.replace(e,t[a])}return i}static _addOrDelSprite(e,t){if(t)this.spriteArr.push(e);else{let t=this.spriteArr.indexOf(e);-1!==t&&this.spriteArr.splice(t,1)}}static _getSprite(e,t){this.checkInit(),cc.resources.load("i18n/sprite/"+this.language+"/"+e,cc.SpriteFrame,(e,i)=>{if(e)return t(null);t(i)})}static reloadLabel(){let e="i18n/label/"+this.language;cc.resources.load(e,(e,t)=>{e?(console.error(e),this.labelData={}):this.labelData=t.json;for(let i of this.labelArr)i._resetValue()})}static reloadSprite(){for(let e of this.spriteArr)e._resetValue()}}i.LocalLang=a,a.language="",a.labelArr=[],a.labelData={},a.spriteArr=[],cc._RF.pop()},{}],MKNoticeCenter:[function(e,t,i){"use strict";cc._RF.push(t,"79a78Glip9HQ5SpEWfy23e+","MKNoticeCenter"),Object.defineProperty(i,"__esModule",{value:!0}),i.onNotice=i.noticeCenter=i.NoticeCenter=i.createNotice=void 0;let a=0;i.createNotice=function(e){e.Type="Notice"+a++,e.prototype.getType=function(){return e.Type}};class o{constructor(){this.m_eventTarget=new cc.EventTarget}on(e,t,i){this.m_eventTarget.on(e.Type,t,i)}off(e,t,i){this.m_eventTarget.off(e.Type,t,i)}registAllNotice(e){if(e.noticeList)for(let t of e.noticeList)this.on(t.notice,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.emit(e.getType(),e)}}i.NoticeCenter=o,i.noticeCenter=new o,i.onNotice=function(e){return function(t,i){t.noticeList||(t.noticeList=[]),t.noticeList.push({notice:e,methodName:i})}},cc._RF.pop()},{}],MKSocket:[function(e,t,i){"use strict";cc._RF.push(t,"9629bn3i9BIyKAXnP94lWgi","MKSocket"),Object.defineProperty(i,"__esModule",{value:!0}),i.onMsg=i.Socket=void 0;class a{constructor(){this.m_socket=null,this.m_eventTarget=new cc.EventTarget,this.m_connected=!1}connect(e){}disconnect(){this.m_connected=!1}isConnected(){return this.m_socket&&this.m_connected}send(e,t){}on(e,t,i){this.m_eventTarget.on(e.toString(),t,i)}off(e,t,i){this.m_eventTarget.off(e.toString(),t,i)}registAllMsg(e){if(e.msgList)for(let t of e.msgList)this.on(t.msgID,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}onConnect(e){this.m_connected=!0,this.m_eventTarget.emit(a.Connect,this,e)}onMessage(e){this.m_eventTarget.emit(a.Message,this,e),this.m_eventTarget.hasEventListener(e.msgID)?this.m_eventTarget.emit(e.msgID,e):cc.log("MKSocket err : no socket message handler, messageID = "+e.msgID)}onError(e){this.m_eventTarget.emit(a.Error,this,e),this.disconnect(),this.m_connected=!1}onClose(e){this.m_eventTarget.emit(a.Close,this,e),this.disconnect(),this.m_connected=!1}}i.Socket=a,a.Connect="Connect",a.Close="Close",a.Error="Error",a.Message="Message",i.onMsg=function(e){return function(t,i){t.msgList||(t.msgList=[]),t.msgList.push({msgID:e,methodName:i})}},cc._RF.pop()},{}],MKSystem:[function(e,t,i){"use strict";cc._RF.push(t,"a872ajJ9cJIZJgRz4rujdNB","MKSystem"),Object.defineProperty(i,"__esModule",{value:!0}),i.system=i.System=void 0;class a{constructor(){}getVersion(){return""}getVersionCode(){return 1}getPackageName(){return""}getMetaData(e){return""}getDeviceID(){return""}getLocation(){return""}getChannelID(){return""}copyStrToClipboard(e){}getFileMD5(e){return""}getPlatform(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?cc.sys.OS_ANDROID:cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:"Web":"Web"}getWakeUpData(){return""}shareText(e,t){}shareInWhatsApp(e){}}i.System=a;class o extends a{constructor(){super()}getVersion(){return"1.0.0"}getVersionCode(){return 1}getPackageName(){return"com.kbsgame.teenpatti"}getDeviceModel(){return""}getSystemVersion(){return""}getMetaData(e){return""}getLocation(){return""}getDeviceID(){return this.genMacFack()}getChannelID(){return"KBS"}genMacFack(){var e=cc.sys.localStorage.getItem("macFack");if(e)return e;e="";for(var t=0;t<6;t++){for(var i="",a=0;a<2;a++)i+="0123456789abcdef"[Math.ceil(15*Math.random())];e+=e?":"+i:i}return cc.sys.localStorage.setItem("macFack",e),e}}let s=null;s=cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?new class extends a{constructor(){super(),this.version="",this.versionCode=1,this.packageName="",this.channelID="",this.version=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"),this.packageName=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"),this.channelID=this.getMetaData("APP_CHANNEL");try{this.versionCode=jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getVersionCode","()J")}catch(e){}}getVersion(){return this.version}getVersionCode(){return this.versionCode}getPackageName(){return this.packageName}getDeviceModel(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getDeviceModel","()Ljava/lang/String;")}getSystemVersion(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getSystemVersion","()Ljava/lang/String;")}getMetaData(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getMetaData","(Ljava/lang/String;)Ljava/lang/String;",e)}getDeviceID(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getDeviceID","()Ljava/lang/String;")}getLocation(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getLocation","()Ljava/lang/String;")}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("com/mk/common/MKSystem","copyStrToClipboard","(Ljava/lang/String;)V",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getFileMD5","(Ljava/lang/String;)Ljava/lang/String;",e)}getWakeUpData(){return this.getVersionCode()<43?"":jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getWakeUpData","()Ljava/lang/String;")}shareText(e,t){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareText","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}shareInWhatsApp(e){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareToApp","(Ljava/lang/String;Ljava/lang/String;)V","com.whatsapp",e)}}:cc.sys.os==cc.sys.OS_IOS?new class extends a{constructor(){super(),this.version="",this.packageName="",this.channelID="",this.channelID=this.getMetaData("APP_CHANNEL")}getVersion(){return this.version}getPackageName(){return this.packageName}getMetaData(e){return jsb.reflection.callStaticMethod("MKSystem","getMetaData:",e)}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("MKSystem","copyStrToClipboard:",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("MKSystem","getFileMD5:",e)}}:new o:new o,i.system=s,cc._RF.pop()},{}],MKUtils:[function(e,t,i){"use strict";cc._RF.push(t,"67818ViSbNBt7n0lfXcd04e","MKUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=void 0;class a{static randRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}static strMaxCut(e,t){for(var i="",a=0,o=0;o<e.length;o++){var s=e[o];s.charCodeAt(0)>255?a+=2:a++,a<=t&&(i+=s)}return a>t?i+"...":i}static dateFormat(e,t){var i=new Date(t);let a;const o={"Y+":i.getFullYear().toString(),"m+":(i.getMonth()+1).toString(),"d+":i.getDate().toString(),"H+":i.getHours().toString(),"M+":i.getMinutes().toString(),"S+":i.getSeconds().toString()};for(let s in o)(a=new RegExp("("+s+")").exec(e))&&(e=e.replace(a[1],1==a[1].length?o[s]:o[s].padStart(a[1].length,"0")));return e}static getUrlParams(){if(cc.sys.isNative)return{};var e=window.location.search;return a.parseUrlParams(e)}static parseUrlParams(e){var t={},i=e.indexOf("?");if(-1!=i)for(var a=e.substr(i+1).split("&"),o=0;o<a.length;o++)t[a[o].split("=")[0]]=a[o].split("=")[1];return t}static resize(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=e.designResolution);var t=this.curDR,i=cc.view.getFrameSize(),a=i.width,o=i.height,s=a,n=o;a/o>t.width/t.height?s=(n=t.height)*a/o:n=o/a*(s=t.width),e.designResolution=cc.size(s,n),e.node.width=s,e.node.height=n,e.node.emit("resize")}static maxCountElement(e){let t={};for(let s=0;s<e.length;s++){let i=e[s];t[i]?t[i]++:t[i]=1}let i=0,a=[],o=[];for(let s in t)i<t[s]?(i=t[s],a[0]=s,o.length=0):i===t[s]&&o.push(s);if(o.length>0)for(let s=0;s<o.length;s++)a.push(o[s]);return a}static isEmail(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e)}static isPhone(e){return/^(\d*)$/.test(e)}static isUserName(e){return/^[A-Za-z0-9][A-Za-z0-9\s]*[A-Za-z0-9]$/.test(e)}}i.Utils=a,a.curDR=null,cc._RF.pop()},{}],MenuLayer:[function(e,t,i){"use strict";cc._RF.push(t,"0de2b6hsk5OQo/U/taIk3GO","MenuLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),n=e("./Common/PopupManager"),r=e("../Business/Data/CommonDefine"),l=e("../Business/Data/SaveDataManager"),{ccclass:c,property:h,menu:d}=cc._decorator;let u=class extends s.default{constructor(){super(...arguments),this.animationDuration=0,this.btnPaytable=null,this.btnHelp=null,this.btnLanguage=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.musicOn=!1,this.soundOn=!1}static get path(){return"Scenes/Game/menu_layer"}onLoad(){this.main||(this.main=this.node),this.btnPaytable.on(cc.Node.EventType.TOUCH_END,this.onTouchPaytable,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onTouchHelp,this),this.btnRecord.on(cc.Node.EventType.TOUCH_END,this.onTouchRecord,this),this.musicOn=l.default.getMusicEnable(),this.soundOn=l.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff}onTouchClose(){this.hide()}onTouchPaytable(){n.default.show(r.PrefabList.PaytableLayer),this.hide()}onTouchHelp(){n.default.show(r.PrefabList.HelpLayer),this.hide()}onTouchRecord(){n.default.show(r.PrefabList.GameRecordLayer),this.hide()}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,l.default.setMusicEnable(this.musicOn),o.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,l.default.setEffectEnable(this.soundOn),o.AudioEngine.setEffectsEnabled(this.soundOn),o.AudioEngine.playEffect(r.SoundList.Click)}};a([h(cc.Node)],u.prototype,"btnPaytable",void 0),a([h(cc.Node)],u.prototype,"btnHelp",void 0),a([h(cc.Node)],u.prototype,"btnLanguage",void 0),a([h(cc.Node)],u.prototype,"btnRecord",void 0),a([h(cc.Sprite)],u.prototype,"imgMusic",void 0),a([h(cc.Sprite)],u.prototype,"imgSound",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgMusicOn",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgMusicOff",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgSoundOn",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgSoundOff",void 0),u=a([c],u),i.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/SaveDataManager":"SaveDataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/PopupManager":"PopupManager"}],MessageView:[function(e,t,i){"use strict";cc._RF.push(t,"46174h9izpKHKj9zlyrAHrr","MessageView");var a,o=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:n}=cc._decorator;let r=a=class extends cc.Component{constructor(){super(...arguments),this.imgBg=null,this.text=null}onLoad(){}onDestroy(){}animate(e=2){this.node.stopAllActions(),cc.tween(this.node).delay(e).call(()=>{this.node.opacity=0}).start()}show(e,t){this.node.opacity=255,this.text.string=e,this.animate(t)}hide(){this.node.stopAllActions(),this.node.opacity=0}static show(e,t){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/MessageView",cc.Prefab);if(null==e)return void cc.log("Please init MessageView defaultSkin on app init");a.defaultSkin=e}this.showWithFile(this.defaultSkin,e,t)}static showWithFile(e,t,i){null==this.g_persistRootNode&&(this.g_persistRootNode=new cc.Node,this.g_persistRootNode.width=cc.winSize.width,this.g_persistRootNode.height=cc.winSize.height,this.g_persistRootNode.x=cc.winSize.width/2,this.g_persistRootNode.y=cc.winSize.height/2,cc.game.addPersistRootNode(this.g_persistRootNode)),(this.g_persistRootNode.width<cc.winSize.width||this.g_persistRootNode.height<cc.winSize.height)&&(this.g_persistRootNode.width=cc.winSize.width,this.g_persistRootNode.height=cc.winSize.height,this.g_persistRootNode.x=cc.winSize.width/2,this.g_persistRootNode.y=cc.winSize.height/2);let o=this.g_persistRootNode,s=null,n=o.getChildByName("MessageView");null==n?((s=cc.instantiate(e).getComponent(a)).node.name="MessageView",s.node.x=cc.winSize.width/2,s.node.y=cc.winSize.height/2,o.addChild(s.node)):s=n.getComponent(a),s.show(t,i)}static hide(){let e,t=this.g_persistRootNode,i=null;try{e=t.getChildByName("MessageView")}catch(o){}null!=e&&e.getComponent(a).hide()}};r.defaultSkin=null,r.g_persistRootNode=null,o([n(cc.Sprite)],r.prototype,"imgBg",void 0),o([n(cc.Label)],r.prototype,"text",void 0),r=a=o([s],r),i.default=r,cc._RF.pop()},{}],NetworkConstants:[function(e,t,i){"use strict";cc._RF.push(t,"670a7mMGfNFBZ5dvBazXYJa","NetworkConstants"),Object.defineProperty(i,"__esModule",{value:!0}),i.MsgCBNtf=i.MsgCBAck=i.MsgCBReq=i.MsgCB=i.MsgBaseNtf=i.MsgBaseAck=i.MsgBaseReq=i.MsgBase=i.MsgNtfMark=i.MsgAckMark=i.MsgTypeMark=i.MsgModeMark=i.MsgCodeOK=void 0,i.MsgCodeOK=200,i.MsgModeMark=1e6,i.MsgTypeMark=1e4,i.MsgAckMark=2*i.MsgTypeMark,i.MsgNtfMark=3*i.MsgTypeMark,i.MsgBase=1*i.MsgModeMark,i.MsgBaseReq=i.MsgBase,i.MsgBaseAck=i.MsgBase+i.MsgAckMark,i.MsgBaseNtf=i.MsgBase+i.MsgNtfMark,i.MsgCB=2*i.MsgModeMark,i.MsgCBReq=i.MsgCB,i.MsgCBAck=i.MsgCB+i.MsgAckMark,i.MsgCBNtf=i.MsgCB+i.MsgNtfMark,cc._RF.pop()},{}],NetworkController:[function(e,t,i){"use strict";cc._RF.push(t,"56f188UTbdI+qVXVv/UcjG4","NetworkController");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NetworkController=i.CmdBroadcastTest=i.CmdTokenLogin=i.CmdGetServerConfig=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/ConfigManager"),n=e("../../Business/Data/DataManager"),r=e("../../Business/Data/CommonDefine"),l=e("./NetworkNotice"),c=e("../NetWork/NetworkManager"),h=e("../NetWork/NetworkConstants");let d=class{};d=a([o.createCommand],d),i.CmdGetServerConfig=d;let u=class{};u=a([o.createCommand],u),i.CmdTokenLogin=u;let m=class{};m=a([o.createCommand],m),i.CmdBroadcastTest=m;class g extends o.Controller{constructor(){super(),this.m_socket=null,this.m_windowsEcho=window.Echo,this.setName("NetworkController"),o.noticeCenter.registAllNotice(this),o.commandCenter.registAllCommand(this),this.m_socket=c.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.m_heartBeatHandler=new o.HeartBeatHandler,this.m_heartBeatHandler.logName="[Socket]",this.m_heartBeatHandler.idle=10,this.m_heartBeatHandler.idleCallBack=this.sendIdle.bind(this),this.m_heartBeatHandler.timeOutCallBack=this.onHeartBeatTimeOut.bind(this)}onExit(){o.noticeCenter.targetOff(this),o.commandCenter.targetOff(this)}onCmdGetServerConfig(e){var t=s.default.urlConfig.base+"getconfig",i={};i.channel=o.system.getChannelID(),i.package=o.system.getPackageName(),i.version=o.system.getVersion(),i.deviceid=o.system.getDeviceID(),cc.log("getconfig params = "+JSON.stringify(i)),o.Http.get(t,i,this.onSetting.bind(this))}onSetting(e,t){if(e&&(cc.log("getconfig result = ",JSON.stringify(t)),200==t.code)){let e=n.default.homeData;e.setChipsUnit(t.chipUnit),e.setGameId(t.gameid)}}onCmdTokenLogin(e){let t=s.default.urlConfig.base+"api/auth/login",i={platform:"JhandiMundaSingle",platform_token:"3345678"};i.token=n.default.userData.getToken(),cc.log("login params = "+JSON.stringify(i)),o.Http.post(t,i,this.onNetTokenLogin.bind(this))}onNetTokenLogin(e,t){e?200==t.code?(this.setUserData(t.data[0]),o.noticeCenter.emit(new l.NtcLogin(0))):this.loginSDKFailed(t.code):this.loginSDKFailed()}setUserData(e){let t=e.user_info[0],i=n.default.userData;i.setUid(t.user_id),i.setToken(e.access_token);let a=[];e.user_info.record.forEach(e=>{let t=new r.RecordData;t.time=new Date(e.created_at).getTime(),t.balance=e.round_amount,t.isWin=e.big_win,a.push(t)}),n.default.userData.setGameRecordLst(a),n.default.homeData.setWs("https://adminapi.lgnetwork.fun/socket.io")}loginSDKFailed(e,t){null==e&&(e=1),o.noticeCenter.emit(new l.NtcLogin(e))}onConnect(){cc.log("[Socket] connect server success!"),cc.log("[send] Token ="+JSON.stringify(void 0)),this.m_socket.send(h.MsgBaseReq+"AckToken",void 0)}onNetAckToken(e){if(cc.log("[receive] TokenRsp code = "+e.state.code),e.state.code!=h.MsgCodeOK)return cc.log("Rsp info = "+e.state.info),void o.noticeCenter.emit(new l.NtcLogin(2));var t=e.body;cc.log("TokenRsp = "+JSON.stringify(t)),n.default.userData.setLogined(!0),this.m_heartBeatHandler.startIdle()}onMessage(){this.m_heartBeatHandler.onReceiveHeartBeat()}sendIdle(){}onHeartBeatTimeOut(){cc.log("[Socket] onHeartBeatTimeOut"),this.onServerDisconnect()}onNetAckHeart(e){this.m_heartBeatHandler.onReceiveHeartBeat()}onServerDisconnect(){this.m_heartBeatHandler.stopIdle(),this.m_socket.disconnect(),n.default.userData.setLogined(!1)}onBroadcastTest(){for(let e=0;e<10;e++){let t={};t.player="Player"+e,t.amount=o.Utils.randRange(30,1304),this.onNetBroadcast(t)}}onNetBroadcast(e){let t=e;cc.log("[receive] GameWordNews = "+JSON.stringify(t));let i=o.LocalLang.get("lobby_broadcast_win",[t.player,t.amount]);n.default.homeData.getBroadcastData().addPushNotice(i,2)}}a([o.onCommand(d)],g.prototype,"onCmdGetServerConfig",null),a([o.onCommand(u)],g.prototype,"onCmdTokenLogin",null),a([o.onMsg(o.Socket.Connect)],g.prototype,"onConnect",null),a([o.onMsg(h.MsgBaseAck+"AckToken")],g.prototype,"onNetAckToken",null),a([o.onMsg(o.Socket.Message)],g.prototype,"onMessage",null),a([o.onMsg(h.MsgBaseAck)],g.prototype,"onNetAckHeart",null),a([o.onCommand(m)],g.prototype,"onBroadcastTest",null),a([o.onMsg("GET_BROADCAST")],g.prototype,"onNetBroadcast",null),i.NetworkController=g,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/ConfigManager":"ConfigManager","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../NetWork/NetworkConstants":"NetworkConstants","../NetWork/NetworkManager":"NetworkManager","./NetworkNotice":"NetworkNotice"}],NetworkManager:[function(e,t,i){"use strict";cc._RF.push(t,"fde8eQasMBHsK4UOZ57A4Dp","NetworkManager"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("./GameSocket");class o{constructor(){this.m_commonSocket=new a.default}getCommonSocket(){return this.m_commonSocket}}i.default=o,o.sharedManager=null,o.getInstance=function(){return null===o.sharedManager&&(o.sharedManager=new o),o.sharedManager},cc._RF.pop()},{"./GameSocket":"GameSocket"}],NetworkNotice:[function(e,t,i){"use strict";cc._RF.push(t,"dcce6iOurFKsYzb0t5YwJu5","NetworkNotice");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NtcGetServerConfig=i.NtcDisconnect=i.NtcLogin=void 0;const o=e("../../MobileKit/MKIndex");let s=class{constructor(e){this.result=e}};s=a([o.createNotice],s),i.NtcLogin=s;let n=class{constructor(e){this.reason=e}};n=a([o.createNotice],n),i.NtcDisconnect=n;let r=class{};r=a([o.createNotice],r),i.NtcGetServerConfig=r,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],PlayerData:[function(e,t,i){"use strict";cc._RF.push(t,"c5a2bFZbYZPo6Xac8ibBW/Q","PlayerData"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerData=void 0;const a=e("./HandCardsData");i.PlayerData=class{constructor(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=null,this.m_isWinner=!1,this.m_winLose=0,this.m_isBigBlind=!1,this.m_isSmallBlind=!1,this.m_isFolded=!1,this.m_betSum=0,this.m_roundBet=0,this.m_isActioned=!1,this.m_cardTypeData=new a.CardTypeData,this.m_raiseChip=0,this.m_isAllin=!1,this.m_showList=[-1,-1],this.m_isOut=!1,this.m_ranking=0,this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=[],this.m_cardTypeData=new a.CardTypeData}resetAllData(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_isOut=!1,this.m_ranking=0,this.resetGameData()}resetGameData(){this.m_handCards.length=0,this.m_isWinner=!1,this.m_winLose=0,this.m_isBigBlind=!1,this.m_isSmallBlind=!1,this.m_isFolded=!1,this.m_betSum=0,this.m_roundBet=0,this.m_isActioned=!1,this.m_cardTypeData=new a.CardTypeData,this.m_raiseChip=0,this.m_isAllin=!1,this.m_showList=[-1,-1]}setSeat(e){this.m_seat=e}getSeat(){return this.m_seat}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getChips(){return this.m_chips}setChips(e){this.m_chips=e}isPlaying(){return this.m_playing}setPlaying(e){this.m_playing=e}isWinner(){return this.m_isWinner}setWinner(e){this.m_isWinner=e}getHandCards(){return this.m_handCards}setHandCards(e){this.m_handCards=e}setWinLose(e){this.m_winLose=e}getWinLose(){return this.m_winLose}isBigBlind(){return this.m_isBigBlind}setBigBlind(e){this.m_isBigBlind=e}isSmallBlind(){return this.m_isSmallBlind}setSmallBlind(e){this.m_isSmallBlind=e}isFold(){return this.m_isFolded}setFold(e){this.m_isFolded=e}getBetSum(){return this.m_betSum}setBetSum(e){this.m_betSum=e}getRoundBet(){return this.m_roundBet}setRoundBet(e){this.m_roundBet=e}isActioned(){return this.m_isActioned}setActioned(e){this.m_isActioned=e}getCardTypeData(){return this.m_cardTypeData}setCardTypeData(e){this.m_cardTypeData=e}getRaiseChip(){return this.m_raiseChip}setRaiseChip(e){this.m_raiseChip=e}isAllin(){return this.m_isAllin}setAllin(e){this.m_isAllin=e}canAction(){let e=!0;return this.m_isFolded&&(e=!1),this.m_isAllin&&(e=!1),this.m_isActioned&&(e=!1),e}getShowList(){return this.m_showList}setShowList(e){this.m_showList=e}isOut(){return this.m_isOut}setOut(e){this.m_isOut=e}getRanking(){return this.m_ranking}setRanking(e){this.m_ranking=e}getLeftChipSum(){return this.m_chips+this.m_roundBet+this.m_betSum}},cc._RF.pop()},{"./HandCardsData":"HandCardsData"}],PlayerNode:[function(e,t,i){"use strict";cc._RF.push(t,"6b013O+pRZGnaVlS1ZVz4wG","PlayerNode");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),l=e("./Common/UIUtils"),c=e("./Common/PrefabPool"),h=e("./PokerNode"),d=e("../Business/Data/PlayerData"),{ccclass:u,property:m,menu:g}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.txtSeat=null,this.imgSeat=null,this.imgProgress=null,this.imgWinner=null,this.headMask=null,this.cardNode=null,this.bgState=null,this.txtState=null,this.txtBalance=null,this.bgInfo=null,this.chipPlaceNode=null,this.imgChip=null,this.bgChips=null,this.txtChips=null,this.txtWinner=null,this.txtGetChips=null,this.bgOut=null,this.tableChipsPos=null,this.dealCardPos=null,this.handCards=[],this.player=null,this.gameData=null,this.callChip=null}onLoad(){o.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.player=new d.PlayerData,this.initUI()}initUI(){for(let e=0;e<n.MAX_HAND_CARDS;e++){let e=c.default.get(n.PrefabList.PokerNode);e.setParent(this.cardNode),e.active=!1,this.handCards.push(e.getComponent(h.default))}this.bgState.active=!1,this.bgInfo.active=!1,this.callChip=cc.instantiate(this.bgChips.node),this.callChip.setParent(this.node),this.callChip.position=new cc.Vec3(0,0,0),this.callChip.active=!1,this.callChip.getComponent(cc.Sprite).enabled=!1,this.callChip.getComponentInChildren(cc.Label).string="",this.clearGame()}setDirection(){this.node.parent.x<0&&(this.cardNode.x=-this.cardNode.x,this.bgState.x=-this.bgState.x,this.txtBalance.node.x=-this.txtBalance.node.x,this.bgInfo.x=-this.bgInfo.x,this.chipPlaceNode.x=-this.chipPlaceNode.x),this.node.parent.y>0&&(this.chipPlaceNode.y=-this.chipPlaceNode.y)}clearGame(){this.setStateBar(0),this.bgChips.node.active=!1,this.bgChips.node.stopAllActions(),this.imgWinner.node.active=!1,this.stopProgress(),this.handCards.forEach(e=>{e.node.active=!1,e.node.stopAllActions()}),this.txtWinner.string="",this.txtGetChips.string="",this.gameData.getGameType()===n.GameType.SNG&&this.player.isOut()||(this.setMask(!1),this.bgOut.node.active=!1)}setTablePos(e,t,i){"self"==this.node.parent.name?(this.chipPlaceNode.x=0,this.chipPlaceNode.y=90):this.setDirection(),this.tableChipsPos=this.node.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),this.dealCardPos=this.cardNode.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))}updateBalance(){this.player.isPlaying()&&this.player.getSeat()!=s.default.gameData.getSelfSeat()?(this.bgInfo.active=!0,this.txtBalance.string=l.UIUtils.getShortNumber(this.player.getChips())):this.bgInfo.active=!1}sitDown(e){this.player=e,this.imgSeat.node.active=!0,this.stopProgress(),this.txtSeat.string=this.player.getSeat().toString(),this.updateBalance()}standUp(){this.player.resetAllData(),this.imgSeat.node.active=!1,this.txtSeat.string=this.player.getSeat().toString(),this.stopProgress(),this.clearGame()}getPlayerData(){return null==this.player?null:this.player}startProgress(){let e=this.gameData.getStageLeftTime();this.stopProgress(),this.imgProgress.node.active=!0,this.imgProgress.progress=1,cc.tween(this.imgProgress).to(e,{progress:0}).start(),cc.tween(this.imgProgress.node).delay(e-3).call(()=>{o.AudioEngine.playEffect(n.SoundList.Alarm)}).delay(1).call(()=>{o.AudioEngine.playEffect(n.SoundList.Alarm)}).start()}stopProgress(){this.imgProgress.node.active=!1,this.imgProgress.node.stopAllActions()}setMask(e){this.headMask.node.active=e}dealCards(){this.handCards.forEach(e=>{e.setPoker(-1),e.node.setPosition(this.dealCardPos),e.node.scale=n.PlayerNodeCardScale,e.node.opacity=255});let e=new cc.Vec3(0,0,0);cc.tween(this).call(()=>{this.handCards[0].node.active=!0,cc.tween(this.handCards[0].node).to(.5,{x:e.x,y:e.y,angle:10},{easing:"smooth"}).start()}).delay(.5).call(()=>{this.handCards[1].node.active=!0,cc.tween(this.handCards[1].node).to(.5,{x:e.x+.4*this.handCards[0].node.width*n.PlayerNodeCardScale,y:e.y,angle:-10},{easing:"smooth"}).start()}).start()}fold(){let e=this.dealCardPos;cc.tween(this).call(()=>{cc.tween(this.handCards[0].node).to(.5,{x:e.x,y:e.y,opacity:0},{easing:"smooth"}).start()}).delay(.2).call(()=>{cc.tween(this.handCards[1].node).to(.5,{x:e.x,y:e.y,opacity:0},{easing:"smooth"}).start()}).start()}betChips(e){0!=e&&(this.bgChips.enabled=!1,this.bgChips.node.active=!0,this.bgChips.node.position=new cc.Vec3(0,0,0),this.txtChips.node.active=!1,this.txtChips.string=l.UIUtils.getShortNumber(e),l.UIUtils.setChipType(this.imgChip,e),cc.tween(this.bgChips.node).to(.2,{position:this.chipPlaceNode.position},{easing:"smooth"}).call(()=>{this.bgChips.enabled=!0,this.txtChips.node.active=!0}).start())}callBet(){this.callChip.active=!0,this.callChip.position=new cc.Vec3(0,0,0),cc.tween(this.callChip).to(.2,{position:this.chipPlaceNode.position},{easing:"smooth"}).call(()=>{this.txtChips.string=l.UIUtils.getShortNumber(this.player.getRoundBet()),l.UIUtils.setChipType(this.imgChip,this.player.getRoundBet()),this.callChip.active=!1}).start()}collectBet(){this.bgChips.enabled=!1,this.txtChips.node.active=!1,cc.tween(this.bgChips.node).to(.5,{position:this.tableChipsPos},{easing:"smooth"}).call(()=>{this.bgChips.node.active=!1}).start()}showCard(){let e=this.player.getHandCards(),t=this.node.convertToWorldSpaceAR(new cc.Vec3(0,0,0)),i=this.cardNode.convertToNodeSpaceAR(t),a=new cc.Vec3(i.x+this.handCards[0].node.width/3*n.PlayerCardScale,i.y,0);cc.tween(this).call(()=>{l.UIUtils.cardFly(this.handCards[0].node,this.handCards[0].node.position,i,n.PlayerCardScale,.25,10)}).delay(.25).call(()=>{l.UIUtils.cardFly(this.handCards[1].node,this.handCards[1].node.position,a,n.PlayerCardScale,.25,-10)}).call(()=>{l.UIUtils.flipToFront(this.handCards[0].node,.5,()=>{this.handCards[0].setPoker(e[0])})}).delay(.25).call(()=>{l.UIUtils.flipToFront(this.handCards[1].node,.5,()=>{this.handCards[1].setPoker(e[1])})}).start()}getChip(e){this.txtGetChips.node.y=0,this.txtGetChips.string="+"+l.UIUtils.getShortNumber(e),cc.tween(this.txtGetChips.node).to(1,{y:50},{easing:"smooth"}).call(()=>{this.txtGetChips.string=""}).start()}setBlind(e){this.txtState.node.color=cc.Color.WHITE,0==e?this.bgState.active=!1:1==e?(this.bgState.active=!0,this.txtState.string="B. BLIND"):2==e&&(this.bgState.active=!0,this.txtState.string="S. BLIND")}setStateBar(e){this.txtState.node.color=cc.Color.WHITE,0==e?this.bgState.active=!1:1==e?(this.bgState.active=!0,this.txtState.string="Check"):2==e?(this.bgState.active=!0,this.txtState.string="Call"):3==e?(this.bgState.active=!0,this.txtState.string="Raise"):4==e?(this.bgState.active=!0,this.txtState.node.color=cc.Color.YELLOW,this.txtState.string="All in"):5==e&&(this.bgState.active=!0,this.txtState.string="Fold")}onNtcResetGame(){this.player.resetAllData(),this.clearGame()}onNtcDealCards(){this.clearGame(),this.player.getSeat()==this.gameData.getBigBlindSeat()?this.setBlind(1):this.player.getSeat()==this.gameData.getSmallBlindSeat()?this.setBlind(2):this.setBlind(0)}onNtcCollectAnte(){this.player.isPlaying()&&this.collectBet()}onNtcUpdateBalance(e){e.seat<0?this.updateBalance():e.seat==this.player.getSeat()&&this.updateBalance()}onNtcWaitAction(e){this.player.isPlaying()&&(e.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onNtcFold(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat&&(this.fold(),this.setMask(!0),this.setStateBar(5)),this.stopProgress())}onNtcBetChip(e){this.player.isPlaying()&&this.player.getSeat()==e.seat&&(this.betChips(e.chips),this.player.isAllin()&&this.setStateBar(4))}onNtcCall(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat&&(e.chips>0?(this.bgChips.node.active?this.callBet():this.betChips(e.chips),this.player.isAllin()?this.setStateBar(4):this.setStateBar(2)):this.setStateBar(1),this.bgState.active=!0),this.stopProgress())}onNtcRaise(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat?(e.chips>0&&(this.bgChips.node.active?this.callBet():this.betChips(e.chips),this.player.isAllin()?this.setStateBar(4):this.setStateBar(3)),this.bgState.active=!0):this.player.isFold()||this.player.isAllin()||this.setStateBar(0),this.stopProgress())}onNtcTableShow1st(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||this.setStateBar(0))}onNtcTableShow2nd(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||(this.bgState.active=!1))}onNtcRiverRoundEnd(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||(this.bgState.active=!1))}onNtcShowWinner(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat?(this.imgWinner.node.active=!0,e.cards.forEach(e=>{this.handCards.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})):this.handCards.forEach(e=>{e.setMask(!0)}),this.stopProgress())}onNtcShowMultiWinner(e){this.player.isPlaying()&&(e.seat.forEach((t,i)=>{0==i?this.player.getSeat()==t?(this.imgWinner.node.active=!0,this.txtWinner.string="Main Pot Winner",e.cards.forEach(e=>{this.handCards.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})):this.handCards.forEach(e=>{e.setMask(!0)}):this.player.getSeat()==t&&(this.txtWinner.string="Side Pot Winner")}),this.stopProgress())}onNtcGameEnd(e){this.player.isPlaying()&&this.collectBet()}onNtcShowCard(e){this.player.isPlaying()&&this.player.getSeat()!=this.gameData.getSelfSeat()&&e.seat.forEach(e=>{if(this.player.getSeat()==e){let e=cc.tween(this.txtBalance.node);this.gameData.getNowMaxBet()>0&&e.delay(1),e.call(()=>{let e=new cc.Vec3(0,0,0),t=new cc.Vec3(.4*this.handCards[0].node.width*n.PlayerNodeCardScale,0,0);this.handCards[0].node.position=e,this.handCards[1].node.position=t,this.handCards.forEach(t=>{t.node.position=new cc.Vec3(e.x+.4*t.node.width*n.PlayerNodeCardScale,0,0),t.node.opacity=255}),this.showCard()}),e.start()}})}onNtcShowWinnerAllFold(e){this.player.isPlaying()&&this.player.getSeat()==e.seat&&(this.imgWinner.node.active=!0)}onNtcDisusePlayer(e){this.player.isPlaying()||e.seat==this.player.getSeat()&&(this.bgOut.node.active=!0,this.setMask(!0),this.handCards.forEach(e=>{e.node.active=!1,e.node.stopAllActions()}),this.setStateBar(0))}};a([m({type:cc.Label,displayName:""})],p.prototype,"txtSeat",void 0),a([m({type:cc.Sprite,displayName:""})],p.prototype,"imgSeat",void 0),a([m(cc.ProgressBar)],p.prototype,"imgProgress",void 0),a([m(cc.Sprite)],p.prototype,"imgWinner",void 0),a([m(cc.Sprite)],p.prototype,"headMask",void 0),a([m(cc.Node)],p.prototype,"cardNode",void 0),a([m(cc.Node)],p.prototype,"bgState",void 0),a([m(cc.Label)],p.prototype,"txtState",void 0),a([m(cc.Label)],p.prototype,"txtBalance",void 0),a([m(cc.Node)],p.prototype,"bgInfo",void 0),a([m(cc.Node)],p.prototype,"chipPlaceNode",void 0),a([m(cc.Sprite)],p.prototype,"imgChip",void 0),a([m(cc.Sprite)],p.prototype,"bgChips",void 0),a([m(cc.Label)],p.prototype,"txtChips",void 0),a([m(cc.Label)],p.prototype,"txtWinner",void 0),a([m(cc.Label)],p.prototype,"txtGetChips",void 0),a([m(cc.Sprite)],p.prototype,"bgOut",void 0),a([o.onNotice(r.NtcResetGame)],p.prototype,"onNtcResetGame",null),a([o.onNotice(r.NtcDealCards)],p.prototype,"onNtcDealCards",null),a([o.onNotice(r.NtcCollectAnte)],p.prototype,"onNtcCollectAnte",null),a([o.onNotice(r.NtcUpdateBalance)],p.prototype,"onNtcUpdateBalance",null),a([o.onNotice(r.NtcWaitAction)],p.prototype,"onNtcWaitAction",null),a([o.onNotice(r.NtcFold)],p.prototype,"onNtcFold",null),a([o.onNotice(r.NtcBetChip)],p.prototype,"onNtcBetChip",null),a([o.onNotice(r.NtcCall)],p.prototype,"onNtcCall",null),a([o.onNotice(r.NtcRaise)],p.prototype,"onNtcRaise",null),a([o.onNotice(r.NtcTableShow1st)],p.prototype,"onNtcTableShow1st",null),a([o.onNotice(r.NtcTableShow2nd)],p.prototype,"onNtcTableShow2nd",null),a([o.onNotice(r.NtcRiverRoundEnd)],p.prototype,"onNtcRiverRoundEnd",null),a([o.onNotice(r.NtcShowWinner)],p.prototype,"onNtcShowWinner",null),a([o.onNotice(r.NtcShowMultiWinner)],p.prototype,"onNtcShowMultiWinner",null),a([o.onNotice(r.NtcGameEnd)],p.prototype,"onNtcGameEnd",null),a([o.onNotice(r.NtcShowCard)],p.prototype,"onNtcShowCard",null),a([o.onNotice(r.NtcShowWinnerAllFold)],p.prototype,"onNtcShowWinnerAllFold",null),a([o.onNotice(r.NtcDisusePlayer)],p.prototype,"onNtcDisusePlayer",null),p=a([u],p),i.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/PlayerData":"PlayerData","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],PokerData:[function(e,t,i){"use strict";var a,o;cc._RF.push(t,"49959S7SupJO7nuVF1YYdst","PokerData"),Object.defineProperty(i,"__esModule",{value:!0}),i.PokerData=i.PokerRedJoker=i.PokerBlackJoker=i.PokerCount=i.PokerPointCount=i.PokerPoint=i.PokerColor=void 0,function(e){e[e.Diamond=0]="Diamond",e[e.Club=1]="Club",e[e.Heart=2]="Heart",e[e.Spade=3]="Spade",e[e.Joker=4]="Joker"}(a=i.PokerColor||(i.PokerColor={})),function(e){e[e.PointA=0]="PointA",e[e.Point2=1]="Point2",e[e.Point3=2]="Point3",e[e.Point4=3]="Point4",e[e.Point5=4]="Point5",e[e.Point6=5]="Point6",e[e.Point7=6]="Point7",e[e.Point8=7]="Point8",e[e.Point9=8]="Point9",e[e.Point10=9]="Point10",e[e.PointJ=10]="PointJ",e[e.PointQ=11]="PointQ",e[e.PointK=12]="PointK",e[e.Joker=13]="Joker"}(o=i.PokerPoint||(i.PokerPoint={})),i.PokerPointCount=13,i.PokerCount=54,i.PokerBlackJoker=52,i.PokerRedJoker=53;class s{constructor(){this.color=0,this.point=-1,this.code=-1,this.color=0,this.point=-1,this.code=-1}init(e){this.code=e,this.point=s.getPokerPoint(e),this.color=s.getPokerColor(e)}getPoint(){return this.point}getColor(){return this.color}getCode(){return this.code}static getPokerPoint(e){return s.isJoker(e)?o.Joker:(e%=i.PokerCount)%i.PokerPointCount}static getPokerColor(e){return s.isJoker(e)?a.Joker:(e%=i.PokerCount,Math.floor(e/i.PokerPointCount))}static pokerCompare(e){let t=(e%=i.PokerCount)%i.PokerPointCount;return t==o.PointA&&(t=14),t}static isJoker(e){return(e%=i.PokerCount)==i.PokerBlackJoker||e==i.PokerRedJoker}}i.PokerData=s,cc._RF.pop()},{}],PokerNode:[function(e,t,i){"use strict";cc._RF.push(t,"63e095MnllNM6rVQopCo5Uy","PokerNode");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../Business/Data/PokerData"),{ccclass:s,property:n,menu:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(),this.upNumber=null,this.upImage=null,this.imgPokerBK=null,this.downImage=null,this.bgShadow=null,this.txtCode=null,this.bgMask=null,this.bgHighlight=null,this.poker=new o.PokerData}onLoad(){}setPoker(e){this.poker.init(e),this.makePoker()}getPokerData(){return this.poker}makePoker(){let e=this.poker.getCode(),t=this.poker.getPoint(),i=this.poker.getColor();this.setHighlight(!1),this.setMask(!1),this.bgShadow.node.active=!0,this.txtCode.string=e.toString(),e<0?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.bgShadow.node.active=!1,-2==e?(this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.imgPokerBK.node.color=(new cc.Color).fromHEX("3f3f3d")):this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_back",cc.SpriteFrame)):o.PokerData.isJoker(e)?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/joker_big",cc.SpriteFrame)):t>=10?this.makeFaceCard(t,i):this.makeNormalPoker(t,i)}makeNormalPoker(e,t){let i="";switch(e){case o.PokerPoint.PointA:i="1";break;case o.PokerPoint.Point2:i="2";break;case o.PokerPoint.Point3:i="3";break;case o.PokerPoint.Point4:i="4";break;case o.PokerPoint.Point5:i="5";break;case o.PokerPoint.Point6:i="6";break;case o.PokerPoint.Point7:i="7";break;case o.PokerPoint.Point8:i="8";break;case o.PokerPoint.Point9:i="9";break;case o.PokerPoint.Point10:i="10"}let a="",s="";switch(t){case o.PokerColor.Spade:a=cc.js.formatStr("clubs_%s",i),s="spades_down";break;case o.PokerColor.Heart:a=cc.js.formatStr("diamonds_%s",i),s="hearts_down";break;case o.PokerColor.Club:a=cc.js.formatStr("clubs_%s",i),s="clubs_down";break;case o.PokerColor.Diamond:a=cc.js.formatStr("diamonds_%s",i),s="diamonds_down"}this.upNumber.node.active=!0,this.upImage.node.active=!0,this.downImage.node.active=!0,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.upNumber.spriteFrame=cc.resources.get("Texture/Game/Poker/"+a,cc.SpriteFrame),this.upImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+s,cc.SpriteFrame),this.downImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+s,cc.SpriteFrame),e==o.PokerPoint.Point10?this.upNumber.node.scaleX=1.666:this.upNumber.node.scaleX=1}makeFaceCard(e,t){let i="";switch(e){case o.PokerPoint.PointJ:i="j";break;case o.PokerPoint.PointQ:i="q";break;case o.PokerPoint.PointK:i="k"}let a="";switch(t){case o.PokerColor.Spade:a="spades";break;case o.PokerColor.Heart:a="hearts";break;case o.PokerColor.Club:a="clubs";break;case o.PokerColor.Diamond:a="diamonds"}this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/"+i+"_"+a,cc.SpriteFrame)}setHighlight(e){this.imgPokerBK.node.color=e?(new cc.Color).fromHEX("#FFFAAF"):cc.Color.WHITE}setMask(e){this.bgMask.node.active=e}};a([n(cc.Sprite)],l.prototype,"upNumber",void 0),a([n(cc.Sprite)],l.prototype,"upImage",void 0),a([n(cc.Sprite)],l.prototype,"imgPokerBK",void 0),a([n(cc.Sprite)],l.prototype,"downImage",void 0),a([n(cc.Sprite)],l.prototype,"bgShadow",void 0),a([n(cc.Label)],l.prototype,"txtCode",void 0),a([n(cc.Sprite)],l.prototype,"bgMask",void 0),a([n(cc.Sprite)],l.prototype,"bgHighlight",void 0),l=a([s,r("Game/PokerNode")],l),i.default=l,cc._RF.pop()},{"../Business/Data/PokerData":"PokerData"}],PopupBase:[function(e,t,i){"use strict";cc._RF.push(t,"b6107kAL7dMzqZ3iXRw2h4a","PopupBase");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:n}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.animationDuration=.3,this.blocker=null,this.options=null,this.finishCallback=null}show(e,t){return o(this,void 0,void 0,function*(){this.options=e,this.init(e),this.updateDisplay(e),this.onBeforeShow&&(yield this.onBeforeShow()),null==t&&(t=t<0?0:this.animationDuration),yield this.playShowAnimation(t),this.onAfterShow&&this.onAfterShow()})}hide(e=!1,t){return o(this,void 0,void 0,function*(){const i=this.node;if(0!==t){let e=this.blocker;e||((e=this.blocker=new cc.Node("blocker")).addComponent(cc.BlockInputEvents),e.setParent(i),e.setContentSize(i.getContentSize())),e.active=!0}this.onBeforeHide&&(yield this.onBeforeHide(e)),null==t&&(t=t<0?0:this.animationDuration),yield this.playHideAnimation(t),this.blocker&&(this.blocker.active=!1),i.active=!1,this.onAfterHide&&this.onAfterHide(e),this.finishCallback&&this.finishCallback(e)})}playShowAnimation(e){return new Promise(t=>{const i=this.background,a=this.main;this.node.active=!0,i.active=!0,i.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(i).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}init(e){}updateDisplay(e){}onBeforeShow(){return new Promise(e=>e())}onAfterShow(){}onBeforeHide(e){return new Promise(e=>e())}onAfterHide(e){}onSuspended(){return new Promise(e=>e())}};a([n({type:cc.Node,tooltip:!1})],r.prototype,"background",void 0),a([n({type:cc.Node,tooltip:!1})],r.prototype,"main",void 0),r=a([s],r),i.default=r,cc._RF.pop()},{}],PopupManager:[function(e,t,i){"use strict";cc._RF.push(t,"c0ea1lR4GpK0bTmoo90xNjo","PopupManager");var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PopupBase");var s,n;(function(e){e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent"})(s||(s={})),function(e){e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting"}(n||(n={}));class r{static get prefabCache(){return this._prefabCache}static get nodeCache(){return this._nodeCache}static get current(){return this._current}static get queue(){return this._queue}static get suspended(){return this._suspended}static get container(){return this._container||cc.Canvas.instance.node}static set container(e){this._container=e}static get CacheMode(){return s}static get ShowResultType(){return n}static show(e,t,i){return new Promise(s=>a(this,void 0,void 0,function*(){if(i=this.parseParams(i),this._current||this.locked){if(!i||!i.immediately)return this.push(e,t,i),void s(n.Waiting);this.locked=!1,yield this.suspend()}this._current={path:e,options:t,params:i};let r=this.getNodeFromCache(e);if(!cc.isValid(r)){this.loadStartCallback&&this.loadStartCallback();const t=yield this.load(e);if(this.loadFinishCallback&&this.loadFinishCallback(),!cc.isValid(t))return cc.warn("[PopupManager]","\u5f39\u7a97\u52a0\u8f7d\u5931\u8d25",e),this._current=null,void s(n.Failed);r=cc.instantiate(t)}const l=r.getComponent(o.default);if(!l)return cc.warn("[PopupManager]","\u672a\u627e\u5230\u5f39\u7a97\u7ec4\u4ef6",e),this._current=null,void s(n.Failed);this._current.popup=l,this._current.node=r,r.setParent(this.container),r.setSiblingIndex(cc.macro.MAX_ZINDEX),l.finishCallback=t=>a(this,void 0,void 0,function*(){t||(this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(e,r,i.mode),this._current=null,s(n.Done),yield new Promise(e=>{cc.Canvas.instance.scheduleOnce(e,this.interval)}),this.next())}),l.show(t)}))}static hide(){null!=this._current&&cc.isValid(this._current.popup)&&this._current.popup.hide()}static getNodeFromCache(e){const t=this._nodeCache;if(t.has(e)){const i=t.get(e);if(cc.isValid(i))return i;t.delete(e)}const i=this._prefabCache;if(i.has(e)){const t=i.get(e);if(cc.isValid(t))return t.addRef(),cc.instantiate(t);i.delete(e)}return null}static next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let e=null;if(e=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,cc.isValid(e.popup))return this._current=e,e.node.setParent(this.container),void e.popup.show(e.options);this.show(e.path,e.options,e.params)}static push(e,t,i){this._current||this.locked?(this._queue.push({path:e,options:t,params:i}),this._queue.sort((e,t)=>e.params.priority-t.params.priority)):this.show(e,t,i)}static suspend(){return a(this,void 0,void 0,function*(){if(!this._current)return;const e=this._current;this._suspended.push(e),yield e.popup.onSuspended(),yield e.popup.hide(!0),this._current=null})}static recycle(e,t,i){switch(i){case s.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case s.Normal:this._nodeCache.delete(e),t.destroy();break;case s.Frequent:t.removeFromParent(!1),this._nodeCache.set(e,t)}}static load(e){return new Promise(t=>{const i=this._prefabCache;if(i.has(e)){const a=i.get(e);if(cc.isValid(a))return void t(a);i.delete(e)}cc.resources.load(e,(a,o)=>{a?t(null):(i.set(e,o),t(o))})})}static release(e){const t=this._nodeCache;let i=t.get(e);i&&(t.delete(e),cc.isValid(i)&&i.destroy(),i=null);const a=this._prefabCache;let o=a.get(e);o&&(o.refCount<=1&&a.delete(e),o.decRef(),o=null)}static parseParams(e){return null==e?new l:"[object Object]"!==Object.prototype.toString.call(e)?(cc.warn("[PopupManager]","\u5f39\u7a97\u53c2\u6570\u65e0\u6548\uff0c\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570"),new l):(null==e.mode&&(e.mode=s.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)}}i.default=r,r._prefabCache=new Map,r._nodeCache=new Map,r._current=null,r._queue=[],r._suspended=[],r.locked=!1,r._container=null,r.interval=.05,r.loadStartCallback=null,r.loadFinishCallback=null;class l{constructor(){this.mode=s.Normal,this.priority=0,this.immediately=!1}}cc._RF.pop()},{"./PopupBase":"PopupBase"}],PrefabPool:[function(e,t,i){"use strict";cc._RF.push(t,"66c96CKFiJAvYsrBV2ocv6V","PrefabPool");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:s}=cc._decorator;let n=class{static get(e,t=null){null==this.poolList[e]&&(this.poolList[e]=[]);let i,a=this.poolList[e];0==a.length?(i=cc.instantiate(cc.resources.get(e))).poolKey=e:i=a.pop();var o=t?i.getComponent(t):null;return o&&o.reuse&&o.reuse.apply(o,arguments),i}static put(e,t=null){let i=this.poolList[e.poolKey];if(i&&-1==i.indexOf(e)){e.removeFromParent(!1);var a=t?e.getComponent(t):null;a&&a.unuse&&a.unuse(),i.push(e)}}static clear(e){let t=this.poolList[e];if(t){for(let e=0,i=t.length;e<i;e++)t[e].destroy();t.length=0}}static clearAll(){for(let e in this.poolList)this.clear(e)}static size(e){let t=this.poolList[e];return t?t.length:0}static nodeChildrenPut(e,t){let i=e.childrenCount;for(let a=0;a<i;a++){let i=e.children.find(e=>{if(e.poolKey!=t)return;let i=this.poolList[e.poolKey];return i&&-1==i.indexOf(e)?e:void 0});i&&this.put(i)}}};n.poolList={},n=a([o],n),i.default=n,cc._RF.pop()},{}],RaiseLayer:[function(e,t,i){"use strict";cc._RF.push(t,"1425c5jguBCcrww2BjAuyVS","RaiseLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../Business/Data/DataManager"),s=e("./Common/UIUtils"),n=e("../Business/Data/CommonDefine"),{ccclass:r,property:l,menu:c}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.txtRaise=null,this.txtTopScale=null,this.txtMidScale=null,this.chipValSlider=null,this.btnAdd=null,this.btnReduce=null,this.btnAllin=null,this.txtAllin=null,this.btn1Pot=null,this.btnHalfPot=null,this.btn5Blind=null,this.btn4Blind=null,this.btn3Blind=null,this.raiseChip=0,this.balance=0,this.betUnit=0,this.unitAmount=0,this.minBet=0,this.maxBet=0,this.bet5Blind=0,this.bet4Blind=0,this.bet3Blind=0,this.betOnePot=0,this.betHalfPot=0,this.closeCallback=null}onLoad(){this.chipValSlider.node.on("slide",this.onTouchSlider,this),s.UIUtils.ButtonEvent(this.btnAdd,this.onTouchAdd.bind(this)),s.UIUtils.ButtonEvent(this.btnReduce,this.onTouchReduce.bind(this)),s.UIUtils.ButtonEvent(this.btnAllin,this.onTouchAllIn.bind(this)),s.UIUtils.ButtonEvent(this.btn5Blind,this.onTouch5Blind.bind(this)),s.UIUtils.ButtonEvent(this.btn4Blind,this.onTouch4Blind.bind(this)),s.UIUtils.ButtonEvent(this.btn3Blind,this.onTouch3Blind.bind(this)),s.UIUtils.ButtonEvent(this.btn1Pot,this.onTouch1Pot.bind(this)),s.UIUtils.ButtonEvent(this.btnHalfPot,this.onTouchHalfPot.bind(this))}onEnable(){this.btn5Blind.node.active=!1,this.btn4Blind.node.active=!1,this.btn3Blind.node.active=!1,this.btn1Pot.node.active=!1,this.btnHalfPot.node.active=!1,this.balance=o.default.gameData.getSelfPlayer().getChips(),this.betUnit=o.default.gameData.getBlind()/2,this.maxBet=Math.min(this.balance,o.default.gameData.getCanMaxBet(!0)),this.unitAmount=Math.floor(this.maxBet/this.betUnit)-2;let e=o.default.gameData.getGameRound();if(this.minBet=e==n.GameRound.PreFlop?4*this.betUnit:2*this.betUnit,this.minBet=Math.min(this.maxBet,this.minBet),this.txtTopScale.string=s.UIUtils.getShortNumber(this.maxBet),o.default.gameData.getNowMaxBet()>=o.default.gameData.getRaiseLimit()){let e=o.default.gameData.getNowMaxBet()+2*this.betUnit-o.default.gameData.getSelfPlayer().getRoundBet();this.minBet=Math.min(this.maxBet,e),e+this.betUnit>this.maxBet?this.txtMidScale.string="":this.txtMidScale.string=s.UIUtils.getShortNumber(this.minBet+this.betUnit*Math.floor(.25*this.unitAmount))}else if(this.maxBet<o.default.gameData.getRaiseLimit())this.txtMidScale.string="",this.raiseChip=this.maxBet;else{let e=this.minBet+this.betUnit*Math.floor(.25*this.unitAmount);e>=this.maxBet?this.txtMidScale.string="":this.txtMidScale.string=s.UIUtils.getShortNumber(e)}o.default.gameData.getGameRound()==n.GameRound.PreFlop?(this.bet5Blind=10*this.betUnit,this.bet4Blind=8*this.betUnit,this.bet3Blind=6*this.betUnit,this.maxBet<this.bet5Blind||this.minBet>this.bet5Blind?this.btn5Blind.node.active=!1:this.btn5Blind.node.active=!0,this.maxBet<this.bet4Blind||this.minBet>this.bet4Blind?this.btn4Blind.node.active=!1:this.btn4Blind.node.active=!0,this.maxBet<this.bet3Blind||this.minBet>this.bet3Blind?this.btn3Blind.node.active=!1:this.btn3Blind.node.active=!0):(this.betOnePot=o.default.gameData.getTableChips(),this.betHalfPot=this.betOnePot/2,this.maxBet<this.betOnePot||this.minBet>this.betOnePot?this.btn1Pot.node.active=!1:this.btn1Pot.node.active=!0,this.maxBet<this.betHalfPot||this.minBet>this.betHalfPot?this.btnHalfPot.node.active=!1:this.btnHalfPot.node.active=!0),this.txtAllin.string=this.balance>this.maxBet?"Max":"All in",this.raiseChip=this.minBet,this.updateRaiseChip(),this.setSlider()}setSlider(){let e=(this.raiseChip-this.minBet)/this.betUnit/this.unitAmount,t=Math.sqrt(e);this.raiseChip==this.maxBet&&(t=1),this.chipValSlider.progress=t}setCloseCallback(e){this.closeCallback=e}updateRaiseChip(){this.txtRaise.string=s.UIUtils.getShortNumber(this.raiseChip),o.default.gameData.getSelfPlayer().setRaiseChip(this.raiseChip)}onTouchSlider(e){1==e.progress?this.raiseChip=this.maxBet:this.raiseChip=this.minBet+this.betUnit*Math.floor(this.unitAmount*e.progress*e.progress),this.raiseChip<=this.minBet&&(this.raiseChip=this.minBet),this.raiseChip>=this.maxBet&&(this.raiseChip=this.maxBet),this.updateRaiseChip()}onTouchAdd(){this.raiseChip+this.betUnit>this.maxBet?this.raiseChip=this.maxBet:this.raiseChip+=this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouchReduce(){this.raiseChip-this.betUnit<this.minBet?this.raiseChip=this.minBet:this.raiseChip-=this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouch1Pot(){this.raiseChip=o.default.gameData.getTableChips(),this.setSlider(),this.updateRaiseChip()}onTouchHalfPot(){this.raiseChip=o.default.gameData.getTableChips()/2,this.setSlider(),this.updateRaiseChip()}onTouch5Blind(){this.raiseChip=10*this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouch4Blind(){this.raiseChip=8*this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouch3Blind(){this.raiseChip=6*this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouchAllIn(){this.raiseChip=this.maxBet,this.setSlider(),this.updateRaiseChip()}onTouchClose(){this.closeCallback(),this.node.active=!1}};a([l(cc.Label)],h.prototype,"txtRaise",void 0),a([l(cc.Label)],h.prototype,"txtTopScale",void 0),a([l(cc.Label)],h.prototype,"txtMidScale",void 0),a([l(cc.Slider)],h.prototype,"chipValSlider",void 0),a([l(cc.Button)],h.prototype,"btnAdd",void 0),a([l(cc.Button)],h.prototype,"btnReduce",void 0),a([l(cc.Button)],h.prototype,"btnAllin",void 0),a([l(cc.Label)],h.prototype,"txtAllin",void 0),a([l(cc.Button)],h.prototype,"btn1Pot",void 0),a([l(cc.Button)],h.prototype,"btnHalfPot",void 0),a([l(cc.Button)],h.prototype,"btn5Blind",void 0),a([l(cc.Button)],h.prototype,"btn4Blind",void 0),a([l(cc.Button)],h.prototype,"btn3Blind",void 0),h=a([r,c("Lobby/RaiseLayer")],h),i.default=h,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","./Common/UIUtils":"UIUtils"}],RecordCell:[function(e,t,i){"use strict";cc._RF.push(t,"75785MACgRG245YrCnREBEz","RecordCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.RecordCell=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../Common/UIUtils"),{ccclass:n,property:r,menu:l}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.txtDate=null,this.txtTime=null,this.txtWin=null}onLoad(){}setData(e){this.txtDate.string=o.Utils.dateFormat("dd.mm.YYYY",e.time),this.txtTime.string=o.Utils.dateFormat("HH:MM:SS",e.time),this.txtBalance.string=s.UIUtils.getShortNumber(e.balance),e.isWin?(this.txtWin.node.color=cc.Color.GREEN,this.txtWin.string="WIN",this.txtBalance.node.color=cc.Color.GREEN):(this.txtWin.node.color=cc.Color.RED,this.txtWin.string="LOST",this.txtBalance.node.color=cc.Color.RED)}};a([r(cc.Label)],c.prototype,"txtBalance",void 0),a([r(cc.Label)],c.prototype,"txtDate",void 0),a([r(cc.Label)],c.prototype,"txtTime",void 0),a([r(cc.Label)],c.prototype,"txtWin",void 0),c=a([n,l("Lobby/RecordCell")],c),i.RecordCell=c,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],RecordPage:[function(e,t,i){"use strict";cc._RF.push(t,"dd16dRnmJBB2IlydX2gyB4C","RecordPage");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.RecordPage=void 0;const o=e("../../Business/Data/CommonDefine"),s=e("./RecordCell"),n=e("../Common/PrefabPool"),{ccclass:r,property:l,menu:c}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.recordNode=null,this.recordCellList=[]}onLoad(){for(let e=0;e<10;e++){let e=n.default.get(o.PrefabList.RecordCell),t=e.getComponent(s.RecordCell);e.setParent(this.recordNode),e.active=!1,this.recordCellList.push(t)}}setRecordList(e){this.showRecordList(e)}showRecordList(e){e.forEach((e,t)=>{this.recordCellList[t].setData(e),this.recordCellList[t].node.active=!0})}};a([l(cc.Node)],h.prototype,"recordNode",void 0),h=a([r,c("Lobby/RecordPage")],h),i.RecordPage=h,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../Common/PrefabPool":"PrefabPool","./RecordCell":"RecordCell"}],ResultCell:[function(e,t,i){"use strict";cc._RF.push(t,"57f5aPH8ohO6LqeOpWQVm3U","ResultCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("./Common/UIUtils"),n=e("./PokerNode"),r=e("../Business/Data/CommonDefine"),l=e("./Common/PrefabPool"),{ccclass:c,property:h,menu:d}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.txtName=null,this.txtChips=null,this.txtScore=null,this.imgWinner=null,this.imgItemBg=null,this.txtLost=null,this.panelHandCards=null,this.circleList=[],this.jokerPoint=-1,this.handCardsList=null}onLoad(){let e=[];for(let t=0;t<r.DEAL_CARDS_COUNT;++t){let t=l.default.get(r.PrefabList.PokerNode).getComponent(n.default);t.node.active=!1,this.panelHandCards.addChild(t.node),e.push(t),t.node.scale=.35}this.handCardsList=e}onDestroy(){}setData(e,t){this.jokerPoint=t,this.txtName.string=o.Utils.strMaxCut(e.getNickName(),12),this.txtChips.string=s.UIUtils.getShortNumber(e.getWinLose()),e.isWinner()?(this.imgWinner.node.active=!0,this.txtLost.node.active=!1,this.imgItemBg.node.active=!0,this.circleList.forEach(e=>{e.color=(new cc.Color).fromHEX("#FFCD69")})):(this.imgWinner.node.active=!1,this.txtLost.node.active=!0,this.imgItemBg.node.active=!1,this.circleList.forEach(e=>{e.color=cc.Color.WHITE}))}};a([h(cc.Label)],u.prototype,"txtName",void 0),a([h(cc.Label)],u.prototype,"txtChips",void 0),a([h(cc.Label)],u.prototype,"txtScore",void 0),a([h(cc.Sprite)],u.prototype,"imgWinner",void 0),a([h(cc.Sprite)],u.prototype,"imgItemBg",void 0),a([h(cc.Label)],u.prototype,"txtLost",void 0),a([h(cc.Node)],u.prototype,"panelHandCards",void 0),a([h([cc.Node])],u.prototype,"circleList",void 0),u=a([c],u),i.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],ResultLayer:[function(e,t,i){"use strict";cc._RF.push(t,"1ed4fNOYxdAtIAHOWSyYuDz","ResultLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),n=e("./ResultCell"),r=e("../Business/Logic/GameNotice"),l=e("./Common/PopupBase"),{ccclass:c,property:h,menu:d}=cc._decorator;let u=class extends l.default{constructor(){super(...arguments),this.item=null,this.listContent=null,this.txtTips=null}onLoad(){this.item.active=!1,this.setListData(),this.showStartingTips(s.default.gameData.getStageLeftTime()),o.noticeCenter.registAllNotice(this)}onDestroy(){o.noticeCenter.targetOff(this)}setDelayShow(e){if(e>0){this.node.opacity=0;let t=cc.tween(this.node);t.delay(e),t.set({opacity:255}),t.start()}}onTouchClose(){this.hide()}onNtcPrepare(){this.showStartingTips(s.default.gameData.getStageLeftTime())}setListData(){let e=s.default.gameData.getResultData(),t=e.players;for(let i=0;i<t.length;++i){let a=cc.instantiate(this.item).getComponent(n.default);this.listContent.addChild(a.node),a.node.active=!0,a.setData(t[i],e.jokerPoint)}}showStartingTips(e){if(e<=0)return;e>30&&(e=30);let t=Math.floor(e)-1;if(t<=0)return void(this.txtTips.node.active=!1);this.txtTips.node.active=!0;let i=cc.tween(this.node);for(let a=t;a>0;a--)i.call(()=>{this.txtTips.string=o.LocalLang.get("game_result_new_game",[a])}),i.delay(1);i.call(()=>{this.txtTips.node.active=!1,this.hide()}),this.node.stopAllActions(),i.start()}};a([h(cc.Node)],u.prototype,"item",void 0),a([h(cc.Node)],u.prototype,"listContent",void 0),a([h(cc.Label)],u.prototype,"txtTips",void 0),a([o.onNotice(r.NtcDealCards)],u.prototype,"onTouchClose",null),a([o.onNotice(r.NtcPrepare)],u.prototype,"onNtcPrepare",null),u=a([c],u),i.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./ResultCell":"ResultCell"}],SaveDataManager:[function(e,t,i){"use strict";cc._RF.push(t,"b5bf4wNauFNv7zVDbOkrZQ9","SaveDataManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{static init(){"1"!=cc.sys.localStorage.getItem("storageInited")&&(cc.sys.localStorage.setItem("isGameInitialized",1),cc.sys.localStorage.setItem("isEffect",1),cc.sys.localStorage.setItem("EffectVolume","1.0"),cc.sys.localStorage.setItem("isMusic",1),cc.sys.localStorage.setItem("MusicVolume","0.5"),cc.sys.localStorage.setItem("login_data",""),cc.sys.localStorage.setItem("update_version","0.0.0"),cc.sys.localStorage.setItem("storageInited",1),cc.sys.localStorage.setItem("AFConversionSource",0))}static setMusiceVolume(e){cc.sys.localStorage.setItem("MusicVolume",e+"")}static getMusiceVolume(){return parseFloat(cc.sys.localStorage.getItem("MusicVolume"))}static setEffectVolume(e){cc.sys.localStorage.setItem("EffectVolume",e+"")}static getEffectVolume(){return parseFloat(cc.sys.localStorage.getItem("EffectVolume"))}static setEffectEnable(e){cc.sys.localStorage.setItem("isEffect",e?1:-1)}static getEffectEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isEffect"))}static setMusicEnable(e){cc.sys.localStorage.setItem("isMusic",e?1:-1)}static getMusicEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isMusic"))}static setLoginData(e){cc.sys.localStorage.setItem("login_data",e)}static getLoginData(){return cc.sys.localStorage.getItem("login_data")}static setUpdateVersion(e){cc.sys.localStorage.setItem("update_version",e)}static getUpdateVersion(){return cc.sys.localStorage.getItem("update_version")}static setLastLoginTime(e){cc.sys.localStorage.setItem("last_login_time",e)}static getLastLoginTime(){return Number(cc.sys.localStorage.getItem("last_login_time"))}},cc._RF.pop()},{}],SceneController:[function(e,t,i){"use strict";cc._RF.push(t,"0e547EKRatPwbOjldagOfi/","SceneController");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SceneController=i.CmdScene=void 0;const o=e("../../MobileKit/MKIndex"),s=e("../Data/CommonDefine");let n=class{constructor(e){this.sceneType=e}};n=a([o.createCommand],n),i.CmdScene=n;class r extends o.Controller{constructor(){super(),this.setName("SceneController"),o.commandCenter.registAllCommand(this)}onCmdScene(e){let t=e.sceneType,i=null;t===s.SceneType.Game?i="Game":t==s.SceneType.Loading?i="Loading":t==s.SceneType.Lobby&&(i="Lobby"),null!=i&&cc.director.loadScene(i)}}a([o.onCommand(n)],r.prototype,"onCmdScene",null),i.SceneController=r,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Data/CommonDefine":"CommonDefine"}],ScrollBarEnhance:[function(e,t,i){"use strict";cc._RF.push(t,"b1e2dgHsFtEUJDgCS9zOo13","ScrollBarEnhance");var a,o=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.ScrollBarEnhance=void 0;const{ccclass:s,property:n,requireComponent:r,menu:l}=cc._decorator;let c=a=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.renderEvent=[],this.vSlider=null}static creatEventHandler(e,t,i){const a=new cc.Component.EventHandler;return a.target=e,a.component=t,a.handler=i,a}refresh(e){let t,i=this.vSlider||this.node.getComponent(cc.Slider);t=Math.min(e,1),t=Math.max(e,0),i.progress=t,this.onSliderEvent(i,"")}start(){this.addScrollChildIndex()}addScrollChildIndex(){const e=this.scrollView;this.vSlider=this.node.getComponent(cc.Slider);let t=cc.js.getClassName(this);this.vSlider.slideEvents.push(a.creatEventHandler(this.node,t,"onSliderEvent")),e.scrollEvents.push(a.creatEventHandler(this.node,t,"onScrollEvent")),this.scrollMoveEvent()}onScrollEvent(e,t,i){switch(t){case cc.ScrollView.EventType.SCROLL_BEGAN:case cc.ScrollView.EventType.SCROLL_ENDED:break;case cc.ScrollView.EventType.SCROLLING:this.scrollMoveEvent()}}scrollMoveEvent(){let e,t;this.scrollView.vertical?(e=this.scrollView.getMaxScrollOffset().y,t=this.scrollView.getScrollOffset().y):(e=this.scrollView.getMaxScrollOffset().x,t=-1*this.scrollView.getScrollOffset().x),this.vSlider.progress=t/e>0&&t/e<1?t/e:t/e<=0?0:1,this.renderEvent&&this.renderEvent.length&&cc.Component.EventHandler.emitEvents(this.renderEvent,this.vSlider.progress)}onSliderEvent(e,t){let i=0,a=0;this.scrollView.vertical?(i=this.scrollView.getScrollOffset().x,a=this.scrollView.getMaxScrollOffset().y*e.progress):(i=this.scrollView.getMaxScrollOffset().x*e.progress,a=this.scrollView.getScrollOffset().y),this.scrollView.scrollToOffset(cc.v2(i,a),.05)}};o([n({tooltip:"\u5bf9\u5e94\u7684\uff08ScrollView\uff09\u6ed1\u52a8\u5217\u8868",type:cc.ScrollView})],c.prototype,"scrollView",void 0),o([n({type:[cc.Component.EventHandler],tooltip:!1})],c.prototype,"renderEvent",void 0),c=a=o([s,r(cc.Slider),l("\u7ec4\u4ef6\u5e93/ScrollBarEnhance")],c),i.ScrollBarEnhance=c,cc._RF.pop()},{}],ShowLayer:[function(e,t,i){"use strict";cc._RF.push(t,"a3d7bfp1ERBXYxK+8bqg9tL","ShowLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../Business/Data/DataManager"),s=e("./Common/UIUtils"),n=e("./PokerNode"),{ccclass:r,property:l,menu:c}=cc._decorator,h=(e,t)=>JSON.stringify(e)===JSON.stringify(t);let d=class extends cc.Component{constructor(){super(...arguments),this.leftPoker=null,this.rightPoker=null,this.twoPokers=[],this.closeCallback=null,this.playerShow=[]}onLoad(){this.gameData=o.default.gameData,s.UIUtils.NodeClickEvent(this.leftPoker.node,this.onTouchLeft.bind(this)),s.UIUtils.NodeClickEvent(this.rightPoker.node,this.onTouchRight.bind(this)),s.UIUtils.NodeClickEvent(this.twoPokers[0].node,this.onTouchTwo.bind(this)),s.UIUtils.NodeClickEvent(this.twoPokers[1].node,this.onTouchTwo.bind(this))}onEnable(){let e=this.gameData.getHandCardData().getHandCardList();this.playerShow=this.gameData.getSelfPlayer().getShowList(),this.leftPoker.setPoker(e[0]),this.rightPoker.setPoker(e[1]),this.twoPokers.forEach((t,i)=>{t.setPoker(e[i])}),this.updateCardShow()}setCloseCallback(e){this.closeCallback=e}updateCardShow(){this.leftPoker.setHighlight(!1),this.rightPoker.setHighlight(!1),this.twoPokers.forEach(e=>{e.setHighlight(!1)}),-1!=this.playerShow[0]&&-1==this.playerShow[1]?this.leftPoker.setHighlight(!0):-1==this.playerShow[0]&&-1!=this.playerShow[1]?this.rightPoker.setHighlight(!0):-1!=this.playerShow[0]&&-1!=this.playerShow[1]&&this.twoPokers.forEach(e=>{e.setHighlight(!0)})}onTouchLeft(){let e=[this.leftPoker.getPokerData().getCode(),-1];h(this.playerShow,e)?this.gameData.getSelfPlayer().setShowList([-1,-1]):this.gameData.getSelfPlayer().setShowList(e),this.onTouchClose()}onTouchRight(){let e=[-1,this.rightPoker.getPokerData().getCode()];h(this.playerShow,e)?this.gameData.getSelfPlayer().setShowList([-1,-1]):this.gameData.getSelfPlayer().setShowList(e),this.onTouchClose()}onTouchTwo(){let e=this.twoPokers.map(e=>e.getPokerData().getCode());h(this.playerShow,e)?this.gameData.getSelfPlayer().setShowList([-1,-1]):this.gameData.getSelfPlayer().setShowList(e),this.onTouchClose()}onTouchClose(){this.closeCallback(),this.node.active=!1}};a([l(n.default)],d.prototype,"leftPoker",void 0),a([l(n.default)],d.prototype,"rightPoker",void 0),a([l([n.default])],d.prototype,"twoPokers",void 0),d=a([r,c("Lobby/ShowLayer")],d),i.default=d,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],SngAwardCell:[function(e,t,i){"use strict";cc._RF.push(t,"7cdc4N80EhPZ4Zn/tt+ihHN","SngAwardCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SngAwardCell=void 0;const o=e("../Common/UIUtils"),{ccclass:s,property:n,menu:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtRanking=null,this.txtAward=null}onLoad(){}setData(e){this.txtRanking.string=e.ranking.toString(),this.txtAward.string=o.UIUtils.getShortNumber(e.award)}};a([n(cc.Label)],l.prototype,"txtRanking",void 0),a([n(cc.Label)],l.prototype,"txtAward",void 0),l=a([s,r("Lobby/SngAwardCell")],l),i.SngAwardCell=l,cc._RF.pop()},{"../Common/UIUtils":"UIUtils"}],SngDetailInGameLayer:[function(e,t,i){"use strict";cc._RF.push(t,"93a03+nhJ1CVIApKnHM3ItC","SngDetailInGameLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),n=e("../Business/Data/DataManager"),r=e("./Common/UIUtils"),l=e("./Common/PrefabPool"),c=e("../Business/Data/CommonDefine"),h=e("./Lobby/SngStructureCell"),d=e("./Lobby/SngAwardCell"),u=e("./SngRankingCell"),m=e("../Business/Logic/GameNotice"),{ccclass:g,property:p,menu:f}=cc._decorator;let y=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.toggleInfo=null,this.toggleBlind=null,this.toggleAward=null,this.toggleLeaderboard=null,this.information=null,this.blindsStructure=null,this.awardStructure=null,this.leaderboard=null,this.txtRoomName=null,this.txtEntranceFee=null,this.txtStartingChip=null,this.blindScrollView=null,this.awardScrollView=null,this.leaderoardScrollView=null,this.roomData=null,this.animationDuration=.3,this.canClose=!1}onLoad(){s.noticeCenter.registAllNotice(this),this.initUI()}initUI(){this.toggleInfo.node.on("toggle",this.onTouchToggle,this),this.toggleBlind.node.on("toggle",this.onTouchToggle,this),this.toggleAward.node.on("toggle",this.onTouchToggle,this),this.toggleLeaderboard.node.on("toggle",this.onTouchToggle,this)}onEnable(){this.canClose=!0,this.playShowAnimation(this.animationDuration),this.updateView()}updateView(){this.roomData=n.default.gameData.getSngRoomData(),this.updateShow(),this.updateToggle(),this.showBlindList(),this.showAwardList(),this.showLeadboard()}updateShow(){this.txtRoomName.string=this.roomData.roomName,this.txtEntranceFee.string=r.UIUtils.getShortNumber(this.roomData.fee),this.txtStartingChip.string=r.UIUtils.getShortNumber(this.roomData.startingChip)}showBlindList(){l.default.nodeChildrenPut(this.blindScrollView.content,c.PrefabList.SngStructureCell),this.roomData.structure.forEach((e,t)=>{let i=l.default.get(c.PrefabList.SngStructureCell);i.setParent(this.blindScrollView.content);let a=i.getComponent(h.SngStructureCell);a.setData(e),i.active=!0,t==n.default.gameData.getBlindLevel()-1&&a.setHighLight()})}showAwardList(){l.default.nodeChildrenPut(this.awardScrollView.content,c.PrefabList.SngAwardCell),this.roomData.award.forEach(e=>{let t=l.default.get(c.PrefabList.SngAwardCell);t.setParent(this.awardScrollView.content),t.getComponent(d.SngAwardCell).setData(e),t.active=!0})}showLeadboard(){l.default.nodeChildrenPut(this.leaderoardScrollView.content,c.PrefabList.SngRankingCell);let e=n.default.gameData.getPlayerList().filter(e=>e.isPlaying());e.sort((e,t)=>t.getLeftChipSum()-e.getLeftChipSum());let t=n.default.gameData.getPlayerList().filter(e=>e.isOut());t.sort((e,t)=>e.getRanking()-t.getRanking()),t.forEach(t=>{e.push(t)}),e.forEach((e,t)=>{let i=l.default.get(c.PrefabList.SngRankingCell);i.setParent(this.leaderoardScrollView.content),i.active=!0;let a=i.getComponent(u.SngRankingCell);a.setData(t+1,e.getNickName(),e.getLeftChipSum()),e.getSeat()==n.default.gameData.getSelfSeat()&&a.setHighLight()})}updateToggle(){this.information.active=this.toggleInfo.isChecked,this.blindsStructure.active=this.toggleBlind.isChecked,this.awardStructure.active=this.toggleAward.isChecked,this.leaderboard.active=this.toggleLeaderboard.isChecked}onTouchClose(){return o(this,void 0,void 0,function*(){this.canClose&&(this.canClose=!1,yield this.playHideAnimation(this.animationDuration),this.node.active=!1)})}onTouchToggle(){this.updateToggle()}playShowAnimation(e){return new Promise(t=>{const i=this.background,a=this.main;this.node.active=!0,i.active=!0,i.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(i).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}onNtcWaitAction(e){this.onTouchClose()}};a([p({type:cc.Node,tooltip:!1})],y.prototype,"background",void 0),a([p({type:cc.Node,tooltip:!1})],y.prototype,"main",void 0),a([p(cc.Toggle)],y.prototype,"toggleInfo",void 0),a([p(cc.Toggle)],y.prototype,"toggleBlind",void 0),a([p(cc.Toggle)],y.prototype,"toggleAward",void 0),a([p(cc.Toggle)],y.prototype,"toggleLeaderboard",void 0),a([p(cc.Node)],y.prototype,"information",void 0),a([p(cc.Node)],y.prototype,"blindsStructure",void 0),a([p(cc.Node)],y.prototype,"awardStructure",void 0),a([p(cc.Node)],y.prototype,"leaderboard",void 0),a([p(cc.Label)],y.prototype,"txtRoomName",void 0),a([p(cc.Label)],y.prototype,"txtEntranceFee",void 0),a([p(cc.Label)],y.prototype,"txtStartingChip",void 0),a([p(cc.ScrollView)],y.prototype,"blindScrollView",void 0),a([p(cc.ScrollView)],y.prototype,"awardScrollView",void 0),a([p(cc.ScrollView)],y.prototype,"leaderoardScrollView",void 0),a([s.onNotice(m.NtcWaitAction)],y.prototype,"onNtcWaitAction",null),y=a([g,f("Game/SngDetailInGameLayer")],y),i.default=y,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./Lobby/SngAwardCell":"SngAwardCell","./Lobby/SngStructureCell":"SngStructureCell","./SngRankingCell":"SngRankingCell"}],SngDetailLayer:[function(e,t,i){"use strict";cc._RF.push(t,"ae7f2oUhBlPJrGaSk0cSuyt","SngDetailLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../MobileKit/MKIndex"),n=e("../../Business/Data/DataManager"),r=e("../Common/UIUtils"),l=e("../Common/PrefabPool"),c=e("../../Business/Data/CommonDefine"),h=e("./SngStructureCell"),d=e("./SngAwardCell"),u=e("../../Business/Logic/SceneController"),{ccclass:m,property:g,menu:p}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.toggleInfo=null,this.toggleBlind=null,this.toggleAward=null,this.infomation=null,this.blindsStructure=null,this.awardStructure=null,this.txtRoomName=null,this.txtEntranceFee=null,this.txtStartingChip=null,this.cellScrollView=null,this.awardScrollView=null,this.roomData=null,this.animationDuration=.3,this.canClose=!1}onLoad(){this.initUI()}initUI(){this.toggleInfo.node.on("toggle",this.onTouchToggle,this),this.toggleBlind.node.on("toggle",this.onTouchToggle,this),this.toggleAward.node.on("toggle",this.onTouchToggle,this)}onEnable(){this.canClose=!0,this.playShowAnimation(this.animationDuration)}setUpdateView(e){this.roomData=n.default.homeData.getSngRoomList()[e],this.updateShow(),this.updateToggle(),this.showBlindList(),this.showAwardList()}updateShow(){this.txtRoomName.string=this.roomData.roomName,this.txtEntranceFee.string=r.UIUtils.getShortNumber(this.roomData.fee),this.txtStartingChip.string=r.UIUtils.getShortNumber(this.roomData.startingChip),this.toggleInfo.check()}showBlindList(){l.default.nodeChildrenPut(this.cellScrollView.content,c.PrefabList.SngStructureCell),this.roomData.structure.forEach(e=>{let t=l.default.get(c.PrefabList.SngStructureCell);t.setParent(this.cellScrollView.content),t.getComponent(h.SngStructureCell).setData(e),t.active=!0})}showAwardList(){l.default.nodeChildrenPut(this.awardScrollView.content,c.PrefabList.SngAwardCell),this.roomData.award.forEach(e=>{let t=l.default.get(c.PrefabList.SngAwardCell);t.setParent(this.awardScrollView.content),t.getComponent(d.SngAwardCell).setData(e),t.active=!0})}updateToggle(){this.infomation.active=this.toggleInfo.isChecked,this.blindsStructure.active=this.toggleBlind.isChecked,this.awardStructure.active=this.toggleAward.isChecked}onTouchClose(){return o(this,void 0,void 0,function*(){this.canClose&&(this.canClose=!1,yield this.playHideAnimation(this.animationDuration),this.node.active=!1)})}onTouchToggle(){this.updateToggle()}onTouchPlay(){n.default.homeData.setGameId(this.roomData.roomCode),s.commandCenter.emit(new u.CmdScene(c.SceneType.Game))}playShowAnimation(e){return new Promise(t=>{const i=this.background,a=this.main;this.node.active=!0,i.active=!0,i.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(i).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}};a([g({type:cc.Node,tooltip:!1})],f.prototype,"background",void 0),a([g({type:cc.Node,tooltip:!1})],f.prototype,"main",void 0),a([g(cc.Toggle)],f.prototype,"toggleInfo",void 0),a([g(cc.Toggle)],f.prototype,"toggleBlind",void 0),a([g(cc.Toggle)],f.prototype,"toggleAward",void 0),a([g(cc.Node)],f.prototype,"infomation",void 0),a([g(cc.Node)],f.prototype,"blindsStructure",void 0),a([g(cc.Node)],f.prototype,"awardStructure",void 0),a([g(cc.Label)],f.prototype,"txtRoomName",void 0),a([g(cc.Label)],f.prototype,"txtEntranceFee",void 0),a([g(cc.Label)],f.prototype,"txtStartingChip",void 0),a([g(cc.ScrollView)],f.prototype,"cellScrollView",void 0),a([g(cc.ScrollView)],f.prototype,"awardScrollView",void 0),f=a([m,p("Lobby/SngDetailLayer")],f),i.default=f,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/SceneController":"SceneController","../../MobileKit/MKIndex":"MKIndex","../Common/PrefabPool":"PrefabPool","../Common/UIUtils":"UIUtils","./SngAwardCell":"SngAwardCell","./SngStructureCell":"SngStructureCell"}],SngRankingCell:[function(e,t,i){"use strict";cc._RF.push(t,"c1ac74lKk9KK7RyXaRYqAa6","SngRankingCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SngRankingCell=void 0;const o=e("./Common/UIUtils"),{ccclass:s,property:n,menu:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtRanking=null,this.txtPlayerName=null,this.txtChips=null}onLoad(){}setData(e,t,i){let a="";a=1==e?"st":2==e?"nd":3==e?"rd":"th",this.txtRanking.string=e+a,this.txtPlayerName.string=t,this.txtChips.string=o.UIUtils.getShortNumber(i),this.node.color=(new cc.Color).fromHEX("#515F9D")}setHighLight(){this.node.color=cc.Color.RED}};a([n(cc.Label)],l.prototype,"txtRanking",void 0),a([n(cc.Label)],l.prototype,"txtPlayerName",void 0),a([n(cc.Label)],l.prototype,"txtChips",void 0),l=a([s,r("Game/SngRankingCell")],l),i.SngRankingCell=l,cc._RF.pop()},{"./Common/UIUtils":"UIUtils"}],SngRoomCell:[function(e,t,i){"use strict";cc._RF.push(t,"ced99I1ygVFsJyr+w0ZC/Bc","SngRoomCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SngRoomCell=void 0;const o=e("../Common/UIUtils"),{ccclass:s,property:n,menu:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtRoomName=null,this.txtPlayerSum=null,this.txt1stAward=null,this.txt2ndAward=null,this.txtFee=null,this.idx=0}onLoad(){}setData(e,t,i){this.idx=t,this.txtRoomName.string=e.roomName,this.txtPlayerSum.string=e.playerSum.toString(),this.txt1stAward.string=o.UIUtils.getShortNumber(e.firstAward),this.txt2ndAward.string=o.UIUtils.getShortNumber(e.secondAward),this.txtFee.string=o.UIUtils.getShortNumber(e.fee),this.callback=i}onTouchCallback(){this.callback(this.idx)}};a([n(cc.Label)],l.prototype,"txtRoomName",void 0),a([n(cc.Label)],l.prototype,"txtPlayerSum",void 0),a([n(cc.Label)],l.prototype,"txt1stAward",void 0),a([n(cc.Label)],l.prototype,"txt2ndAward",void 0),a([n(cc.Label)],l.prototype,"txtFee",void 0),l=a([s,r("Lobby/SngRoomCell")],l),i.SngRoomCell=l,cc._RF.pop()},{"../Common/UIUtils":"UIUtils"}],SngRoomListLayer:[function(e,t,i){"use strict";cc._RF.push(t,"bc1e7zhYQBG3aj+l/kA/g7u","SngRoomListLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../MobileKit/MKIndex"),n=e("../../Business/Data/DataManager"),r=e("../Common/PrefabPool"),l=e("../../Business/Data/CommonDefine"),c=e("./SngRoomCell"),h=e("../../Business/Logic/HomeNotice"),d=e("./SngDetailLayer"),{ccclass:u,property:m,menu:g}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.roomScrollView=null,this.animationDuration=.3,this.canClose=!1,this.sngDetailLayer=null}onLoad(){s.noticeCenter.registAllNotice(this),this.initUI()}initUI(){let e=r.default.get(l.PrefabList.SngDetailLayer);this.sngDetailLayer=e.getComponent(d.default),this.sngDetailLayer.node.setParent(this.node),this.sngDetailLayer.node.active=!1}showRoomList(){n.default.homeData.getSngRoomList().forEach((e,t)=>{let i=r.default.get(l.PrefabList.SngRoomCell);i.setParent(this.roomScrollView.content),i.getComponent(c.SngRoomCell).setData(e,t,this.onTouchPlay.bind(this)),i.active=!0})}onEnable(){this.canClose=!0,this.playShowAnimation(this.animationDuration),this.roomScrollView.content.removeAllChildren()}onTouchClose(){return o(this,void 0,void 0,function*(){this.canClose&&(this.canClose=!1,yield this.playHideAnimation(this.animationDuration),this.node.active=!1)})}onTouchPlay(e){this.sngDetailLayer.node.active=!0,this.sngDetailLayer.setUpdateView(e)}playShowAnimation(e){return new Promise(t=>{const i=this.background,a=this.main;this.node.active=!0,i.active=!0,i.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(i).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}onNtcShowSngRoomList(e){this.showRoomList()}};a([m({type:cc.Node,tooltip:!1})],p.prototype,"background",void 0),a([m({type:cc.Node,tooltip:!1})],p.prototype,"main",void 0),a([m(cc.ScrollView)],p.prototype,"roomScrollView",void 0),a([s.onNotice(h.NtcShowSngRoomList)],p.prototype,"onNtcShowSngRoomList",null),p=a([u,g("Lobby/SngRoomListLayer")],p),i.default=p,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/HomeNotice":"HomeNotice","../../MobileKit/MKIndex":"MKIndex","../Common/PrefabPool":"PrefabPool","./SngDetailLayer":"SngDetailLayer","./SngRoomCell":"SngRoomCell"}],SngStructureCell:[function(e,t,i){"use strict";cc._RF.push(t,"28b8899UJlE9KeYNRHJEdls","SngStructureCell");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SngStructureCell=void 0;const o=e("../Common/UIUtils"),{ccclass:s,property:n,menu:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtLevel=null,this.txtBlinds=null,this.txtAnte=null,this.txtMinutes=null}onLoad(){}setData(e){this.txtLevel.string=e.level.toString(),this.txtBlinds.string=o.UIUtils.getShortNumber(e.blinds),this.txtAnte.string=o.UIUtils.getShortNumber(e.ante),this.txtMinutes.string=e.minutes.toString(),this.node.color=(new cc.Color).fromHEX("#515F9D")}setHighLight(){this.node.color=cc.Color.RED}};a([n(cc.Label)],l.prototype,"txtLevel",void 0),a([n(cc.Label)],l.prototype,"txtBlinds",void 0),a([n(cc.Label)],l.prototype,"txtAnte",void 0),a([n(cc.Label)],l.prototype,"txtMinutes",void 0),l=a([s,r("Lobby/SngStructureCell")],l),i.SngStructureCell=l,cc._RF.pop()},{"../Common/UIUtils":"UIUtils"}],TapStartLayer:[function(e,t,i){"use strict";cc._RF.push(t,"8af22+ff8xIEZPrZ9IIR4Zu","TapStartLayer");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:s,menu:n}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.innerCircle=null,this.outerCircle=null}static get path(){return"Scenes/Game/award_layer"}onLoad(){cc.tween(this.innerCircle).to(.7,{scale:1.2},{easing:"smooth"}).to(.5,{scale:1},{easing:"smooth"}).union().repeatForever().start(),cc.tween(this.outerCircle).to(.7,{scale:3,opacity:0},{easing:"smooth"}).to(0,{scale:1,opacity:255},{easing:"smooth"}).delay(.5).union().repeatForever().start(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this)}onTouchStart(){cc.tween(this.node).by(.3,{y:this.node.height},{easing:"smooth"}).call(()=>{this.node.active=!1}).start()}};a([s(cc.Node)],r.prototype,"innerCircle",void 0),a([s(cc.Node)],r.prototype,"outerCircle",void 0),r=a([o],r),i.default=r,cc._RF.pop()},{}],UIUtils:[function(e,t,i){"use strict";cc._RF.push(t,"42718I/3LJJtKtCYuOhAlRx","UIUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIUtils=i.UnitKilo=i.UnitLakh=i.UnitCrore=void 0;const a=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/DataManager"),s=e("../../Business/Data/CommonDefine");i.UnitCrore=1e7,i.UnitLakh=1e5,i.UnitKilo=1e3;class n{static getIndiaFormat(e){let t=e<0,i=t?String(-e):String(e),a=[],o=i.indexOf(".");if(-1===o)o=i.length;else{for(let e=i.length-1;e>o;e--)a.push(i[e]);a.push(".")}o--;for(let s=0;o>=0;o--,s++)s>2&&s%2==1&&a.push(","),a.push(i[o]);return t&&a.push("-"),a.reverse().join("")}static getShortStr(e,t,i){let a=e/t;return Math.floor(100*a)/100+i}static getSeparatorNumber(e,t=!1){let i=e%1;i=Math.floor(100*(i+cc.macro.FLT_EPSILON))/100;let a=Math.floor(e).toString(),o="",s=0,n=a.length;for(;s<n;){let e=n-s;e>10?(o=o+a.substr(s,n-10)+",",s=n-10):e>7?(o=o+a.substr(s,n-7)+",",s=n-7):e>5?(o=o+a.substr(s,n-5)+",",s=n-5):e>3?(o=o+a.substr(s,n-3)+",",s=n-3):(o+=a.substr(s,n),s=n)}return o}static cardFly(e,t,i,a,o,s,n){return new Promise(r=>{const l=cc.tween,c=o,h=null!=s?s:e.angle;e.scale=a,e.opacity=255,e.setPosition(t),l(e).to(c,{x:i.x,y:i.y,angle:h},{easing:"smooth"}).call(()=>{n&&n()}).call(r).start()})}static flipToFront(e,t,i,a){return new Promise(o=>{const s=cc.tween,n=t/2,r=e.angle;s(e).to(n,{eulerAngles:cc.v3(0,-270,r)},{easing:"quadIn"}).call(()=>{i&&i()}).to(n,{eulerAngles:cc.v3(0,0,r)},{easing:"quadOut"}).call(()=>{a&&a()}).call(o).start()})}static flipToBack(e,t,i,a){return new Promise(o=>{const s=cc.tween,n=t,r=n/2;s(e).to(n,{scale:1}).start(),s(e).to(r,{eulerAngles:cc.v3(0,-90,0)},{easing:"quadIn"}).call(()=>{i&&i()}).to(r,{eulerAngles:cc.v3(0,-180,0)},{easing:"quadOut"}).call(()=>{a&&a()}).call(o).start()})}static ButtonEvent(e,t,i=.1){e.node.on(cc.Node.EventType.TOUCH_END,()=>{e.interactable?(a.AudioEngine.playEffect(s.SoundList.Click),i>0&&(e.interactable=!1,window.setTimeout(()=>{e&&(e.interactable=!0)},1e3*i)),t()):a.AudioEngine.playEffect(s.SoundList.BtnWrong)})}static NodeClickEvent(e,t){e.on(cc.Node.EventType.TOUCH_END,()=>{a.AudioEngine.playEffect(s.SoundList.Click),t()})}static nodeToNewParent(e,t){let i=e.parent.convertToWorldSpaceAR(e.position),a=t.convertToNodeSpaceAR(i);e.setPosition(a),e.setParent(t)}static posTransform(e,t){let i=t.parent.convertToWorldSpaceAR(t.position);return e.parent.convertToNodeSpaceAR(i)}static setCardType(e,t){let i="";switch(t){case s.CardType.RoyalFlush:i="Royal Flush";break;case s.CardType.StraightFlush:i="Straight Flush";break;case s.CardType.FourKind:i="Four of a Kind";break;case s.CardType.Fullhouse:i="Fullhouse";break;case s.CardType.Flush:i="Flush";break;case s.CardType.Straight:i="Straight";break;case s.CardType.ThreeKind:i="Three of a kind";break;case s.CardType.TwoPairs:i="Two Pairs";break;case s.CardType.OnePair:i="One Pair";break;case s.CardType.Highcard:i="High card"}e.getComponentInChildren(cc.Label).string=i}static setChipType(e,t){let i=0,a=o.default.homeData.getChipLst();for(let o=0;o<a.length;o++){let e=a[o],s=a[o+1];o==a.length-1?e<=t&&(i=o):e<=t&&t<s&&(i=o)}e.spriteFrame=cc.resources.get("Texture/Game/Chip/chip_normal"+i,cc.SpriteFrame)}}i.UIUtils=n,n.getShortNumber=function(e,t,a){e/=o.default.homeData.getChipsUnit();let s,r=Math.abs(e);return s=r>=i.UnitCrore?n.getShortStr(r,i.UnitCrore,"Cr"):r>=i.UnitLakh?n.getShortStr(r,i.UnitLakh,"L"):n.getSeparatorNumber(r,t),e<0?s="-"+s:e>0&&a&&(s="+"+s),s},cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex"}],UserData:[function(e,t,i){"use strict";cc._RF.push(t,"dad16pPzIBPJKEhCrLrDRq7","UserData"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[],this.m_isGotRecord=!1,this.reset()}reset(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[]}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setToken(e){this.m_token=e}getToken(){return this.m_token}setLogined(e){this.m_isLogined=e}isLogined(){return this.m_isLogined}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getBalance(){return this.m_balance}setBalance(e){this.m_balance=e}getGameRecordLst(){return this.m_gameRecordLst}setGameRecordLst(e){this.m_gameRecordLst=e}isGotRecord(){return this.m_isGotRecord}setGotRecord(e){this.m_isGotRecord=e}},cc._RF.pop()},{}],i18nLabel:[function(e,t,i){"use strict";cc._RF.push(t,"3e7e1yL3ltF4Ld2ONOefDbB","i18nLabel");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.i18nLabel=void 0;const o=e("./MKLocalLang"),{ccclass:s,property:n,executeInEditMode:r,disallowMultiple:l,requireComponent:c,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.i18n_string="",this.i18n_params=[]}start(){o.LocalLang._addOrDelLabel(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e,this.setEndValue()}get params(){return this.i18n_params}set params(e){this.i18n_params=e,this.setEndValue()}init(e,t){this.i18n_string=e,this.i18n_params=t,this.setEndValue()}setEndValue(){let e=this.getComponent(cc.Label);cc.isValid(e)&&(e.string=o.LocalLang.get(this.i18n_string,this.i18n_params))}_resetValue(){this.string=this.i18n_string}onDestroy(){o.LocalLang._addOrDelLabel(this,!1)}};a([n({visible:!1})],d.prototype,"i18n_string",void 0),a([n({visible:!1})],d.prototype,"i18n_params",void 0),a([n({type:cc.String})],d.prototype,"string",null),a([n({type:[cc.String]})],d.prototype,"params",null),d=a([s,r,c(cc.Label),l,h("\u591a\u8bed\u8a00/i18nLabel")],d),i.i18nLabel=d,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],i18nSprite:[function(e,t,i){"use strict";cc._RF.push(t,"a8777HUMEtKZKZSmfQV4Q10","i18nSprite");var a=this&&this.__decorate||function(e,t,i,a){var o,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.i18nSprite=void 0;const o=e("./MKLocalLang"),{ccclass:s,property:n,executeInEditMode:r,disallowMultiple:l,requireComponent:c,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.i18n_string=""}start(){o.LocalLang._addOrDelSprite(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e;let t=this.getComponent(cc.Sprite);cc.isValid(t)&&o.LocalLang._getSprite(e,e=>{cc.isValid(t)&&(t.spriteFrame=e)})}_resetValue(){this.string=this.i18n_string}onDestroy(){o.LocalLang._addOrDelSprite(this,!1)}};a([n({visible:!1})],d.prototype,"i18n_string",void 0),a([n({type:cc.String})],d.prototype,"string",null),d=a([s,r,c(cc.Sprite),l,h("\u591a\u8bed\u8a00/i18nSprite")],d),i.i18nSprite=d,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}]},{},["BroadcastData","CommonDefine","ConfigManager","DataManager","GameData","HandCardsData","HomeData","PlayerData","PokerData","SaveDataManager","UserData","GameController","GameNotice","HomeController","HomeNotice","SceneController","GameSocket","HttpUtils","NetworkConstants","NetworkController","NetworkManager","NetworkNotice","HeartBeatHandler","MKAudioEngine","MKCryptoUtils","MKImageDownloader","MKLocalLang","MKSystem","MKUtils","i18nLabel","i18nSprite","ClickSoundComponent","MKActionQueue","MKCommandCenter","MKNoticeCenter","MKIndex","MKHttp","MKSocket","BroadcastCell","ConfirmDialog","GradientColor","MessageView","PopupBase","PopupManager","PrefabPool","ScrollBarEnhance","UIUtils","DropLayer","GameAction","GameScene","HelpLayer","InforLayer","LanguageLayer","LoadingConfig","LoadingScene","FilterCell","GameEntryCell","GameRecordLayer","LobbyScene","RecordCell","RecordPage","SngAwardCell","SngDetailLayer","SngRoomCell","SngRoomListLayer","SngStructureCell","MenuLayer","PlayerNode","PokerNode","RaiseLayer","ResultCell","ResultLayer","ShowLayer","SngDetailInGameLayer","SngRankingCell","TapStartLayer"]);