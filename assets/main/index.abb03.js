window.__require=function e(t,i,a){function s(n,r){if(!i[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var h=i[n]={exports:{}};t[n][0].call(h.exports,function(e){return s(t[n][1][e]||e)},h,h.exports,e,t,i,a)}return i[n].exports}for(var o="function"==typeof __require&&__require,n=0;n<a.length;n++)s(a[n]);return s}({BroadcastCell:[function(e,t,i){"use strict";cc._RF.push(t,"6a348oaKzBDPokIf73R3P4e","BroadcastCell");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("./Common/UIUtils"),n=e("./Common/PrefabPool"),{ccclass:r,property:c,menu:l}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.txtBroadcast=null,this.txtBigWin=null,this.txtMegaWin=null}onLoad(){s.noticeCenter.registAllNotice(this)}setShowText(e,t,i){0==t?(this.txtBroadcast.string=s.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string=s.LocalLang.get("game_broadcast_big_win",[o.UIUtils.getShortNumber(i)]),this.txtMegaWin.string=""):(this.txtBroadcast.string=s.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string="",this.txtMegaWin.string=s.LocalLang.get("game_broadcast_mega_win",[e,o.UIUtils.getShortNumber(i)])),cc.tween(this.node).delay(3).call(()=>{n.default.put(this.node)}).start()}};a([c(cc.Label)],h.prototype,"txtBroadcast",void 0),a([c(cc.Label)],h.prototype,"txtBigWin",void 0),a([c(cc.Label)],h.prototype,"txtMegaWin",void 0),h=a([r],h),i.default=h,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils"}],BroadcastData:[function(e,t,i){"use strict";cc._RF.push(t,"a24010QIg5H5YyoCppz8brV","BroadcastData"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.m_localNotices=["test001","test002"],this.m_pushNotices=new Array,this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0,this.m_localNotices=["test001","test002"],this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0}addPushNotice(e,t=1){this.m_pushNotices.push({notice:e,loop:t})}getCurNotice(){if(this.m_pushNotices.length>0){this.m_pushNoticeIndex=this.m_pushNoticeIndex>=this.m_pushNotices.length?0:this.m_pushNoticeIndex;let e=this.m_pushNotices[this.m_pushNoticeIndex];return e.loop--,0==e.loop?this.m_pushNotices.splice(this.m_pushNoticeIndex,1):this.m_pushNoticeIndex++,e.notice}return this.getLocalNotice()}getLocalNotice(){if(this.m_localNotices.length>0){this.m_localNoticeIndex=this.m_localNoticeIndex>=this.m_localNotices.length?0:this.m_localNoticeIndex;let e=this.m_localNotices[this.m_localNoticeIndex];return this.m_localNoticeIndex++,e}return""}},cc._RF.pop()},{}],ClickSoundComponent:[function(e,t,i){"use strict";cc._RF.push(t,"00bf4ztalhNVoWG4SmO7AfR","ClickSoundComponent");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MKIndex"),o=e("../../Business/Data/CommonDefine"),{ccclass:n,property:r}=cc._decorator;let c=class extends cc.Component{onLoad(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchNode,this)}onDestroy(){}onTouchNode(){0==this.node.getComponent(cc.Button).interactable?s.AudioEngine.playEffect(o.SoundList.BtnWrong):s.AudioEngine.playEffect(o.SoundList.Click)}};c=a([n],c),i.default=c,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../MKIndex":"MKIndex"}],CommonDefine:[function(e,t,i){"use strict";cc._RF.push(t,"9efc0rsiaVG/piSLAHE8XaR","CommonDefine"),Object.defineProperty(i,"__esModule",{value:!0}),i.RecordData=i.SpriteList=i.SoundList=i.PrefabList=i.PointScoreArr=i.OriginalDesign=i.FlipTime=i.PlayerCardScale=i.PlayerNodeCardScale=i.DEAL_CARDS_COUNT=i.MAX_HAND_CARDS=i.TOTAL_CARDS_COUNT=i.MAX_PLAYERS=i.CardType=i.LangList=i.GameRound=i.GameStage=i.SceneType=i.UserType=void 0,function(e){e[e.Guest=1]="Guest",e[e.Account=2]="Account"}(i.UserType||(i.UserType={})),function(e){e[e.Loading=0]="Loading",e[e.Lobby=1]="Lobby",e[e.Game=2]="Game"}(i.SceneType||(i.SceneType={})),function(e){e[e.Waiting=0]="Waiting",e[e.Prepare=1]="Prepare",e[e.Preflop=2]="Preflop",e[e.Action=3]="Action",e[e.Flop=4]="Flop",e[e.Turn=5]="Turn",e[e.River=6]="River",e[e.Compare=7]="Compare",e[e.Finish=8]="Finish"}(i.GameStage||(i.GameStage={})),function(e){e[e.PreFlop=0]="PreFlop",e[e.FlopRound=1]="FlopRound",e[e.TurnRound=2]="TurnRound",e[e.RiverRound=3]="RiverRound"}(i.GameRound||(i.GameRound={})),function(e){e[e.en=0]="en",e[e.hi=1]="hi"}(i.LangList||(i.LangList={})),function(e){e[e.Highcard=0]="Highcard",e[e.OnePair=1]="OnePair",e[e.TwoPairs=2]="TwoPairs",e[e.ThreeKind=3]="ThreeKind",e[e.Straight=4]="Straight",e[e.Flush=5]="Flush",e[e.Fullhouse=6]="Fullhouse",e[e.FourKind=7]="FourKind",e[e.StraightFlush=8]="StraightFlush",e[e.RoyalFlush=9]="RoyalFlush"}(i.CardType||(i.CardType={})),i.MAX_PLAYERS=5,i.TOTAL_CARDS_COUNT=52,i.MAX_HAND_CARDS=2,i.DEAL_CARDS_COUNT=2,i.PlayerNodeCardScale=.35,i.PlayerCardScale=.75,i.FlipTime=.2,i.OriginalDesign=cc.size(1280,720),i.PointScoreArr=[10,2,3,4,5,6,7,8,9,10,10,10,10];class a{}i.PrefabList=a,a.AwardLayer="Scenes/Game/award_layer",a.DropLayer="Scenes/Game/drop_layer",a.MenuLayer="Scenes/Game/menu_layer",a.PaytableLayer="Scenes/Game/paytable_layer",a.HelpLayer="Scenes/Game/help_layer",a.GameRecordLayer="Scenes/Lobby/game_record_layer",a.RecordCell="Scenes/Lobby/RecordCell",a.RecordPage="Scenes/Lobby/RecordPage",a.BroadCastCell="Scenes/Game/BroadCastCell",a.PlayerNode="Scenes/Game/PlayerNode",a.PokerNode="Scenes/Game/PokerNode",a.ResultLayer="Scenes/Game/result_layer",a.GameEntyuCell="Scenes/Lobby/GameEntyuCell",a.InforLayer="Scenes/Game/infor_layer";class s{}i.SoundList=s,s.Bgm="Sound/bgm_hall",s.Click="Sound/click",s.Win="Sound/win",s.BigWin="Sound/big_winner",s.DiceSpin="Sound/dice_spin",s.Chip="Sound/chip",s.BtnWrong="Sound/btn_wrong",s.Dealcard2="Sound/deal_card2",s.Button01="Sound/btn01",s.Button02="Sound/btn02",s.CardFlip1="Sound/card_flip1",s.CardFlip2="Sound/card_flip2",s.Alarm="Sound/alarm";class o{}i.SpriteList=o,o.GameEntey="Texture/Lobby/img_entry",o.TipsDiscard="Texture/Game/Background/img_msg_discard",o.TipsPick="Texture/Game/Background/img_msg_pick",i.RecordData=class{},cc._RF.pop()},{}],ConfigManager:[function(e,t,i){"use strict";cc._RF.push(t,"61ecdS7zDhJaIyXsWMOoGLM","ConfigManager"),Object.defineProperty(i,"__esModule",{value:!0});class a{static setUrlConfig(e){a.urlConfig=e}static setAppInfo(e){a.appInfo=e}}i.default=a,a.urlConfig=null,a.appInfo=null,cc._RF.pop()},{}],ConfirmDialog:[function(e,t,i){"use strict";cc._RF.push(t,"a824eCDWdpEqJh4R8QjqzfN","ConfirmDialog");var a,s=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:n}=cc._decorator;let r=a=class extends cc.Component{constructor(){super(...arguments),this.m_txtContent=null,this.m_btnOK=null,this.m_btnCancel=null,this.m_btnClose=null,this.m_okPos=null,this.m_callback=null,this.m_showCancel=null}onLoad(){this.m_okPos=this.m_btnOK.node.position}onDestroy(){}show(e,t,i){this.m_callback=t,this.m_txtContent.string=e,this.m_showCancel=void 0===i||i,this.m_showCancel?(this.m_btnCancel.node.active=!0,this.m_btnClose.node.active=!0,this.m_btnOK.node.position=this.m_okPos):(this.m_btnCancel.node.active=!1,this.m_btnClose.node.active=!1,this.m_btnOK.node.x=0)}onTouchOK(){this.m_callback&&this.m_callback(!0),this.closeSelf()}onTouchCancel(){this.m_callback&&this.m_callback(!1),this.closeSelf()}onTouchClose(){this.m_showCancel&&(this.m_callback&&this.m_callback(!1),this.closeSelf())}closeSelf(){this.node&&this.node.destroy()}static show(e,t,i,s){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/ConfirmDialog",cc.Prefab);if(null==e)return void cc.log("Please init ConfirmDialog defaultSkin on app init");a.defaultSkin=e}a.showWithFile(a.defaultSkin,e,t,i)}static showWithFile(e,t,i,s){let o=cc.director.getScene(),n=null,r=o.getChildByName("ConfirmDialog");null==r?((n=cc.instantiate(e).getComponent(a)).node.name="ConfirmDialog",o.addChild(n.node)):n=r.getComponent(a),n.show(t,i,s)}static hide(){let e=cc.director.getScene().getChildByName("ConfirmDialog");e&&e.destroy()}};r.defaultSkin=null,s([n(cc.Label)],r.prototype,"m_txtContent",void 0),s([n(cc.Button)],r.prototype,"m_btnOK",void 0),s([n(cc.Button)],r.prototype,"m_btnCancel",void 0),s([n(cc.Button)],r.prototype,"m_btnClose",void 0),r=a=s([o],r),i.default=r,cc._RF.pop()},{}],DataManager:[function(e,t,i){"use strict";cc._RF.push(t,"bb44c7d08JNtpYy1h8nVOKI","DataManager"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("./UserData"),s=e("./HomeData"),o=e("./GameData");class n{static init(){n.userData=new a.default,n.homeData=new s.HomeData,n.gameData=new o.GameData}}i.default=n,cc._RF.pop()},{"./GameData":"GameData","./HomeData":"HomeData","./UserData":"UserData"}],DropLayer:[function(e,t,i){"use strict";cc._RF.push(t,"3683b6O0P5B7bSFXLzzHfZu","DropLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("./Common/PopupBase"),r=e("./Common/UIUtils"),c=e("../Business/Logic/GameController"),{ccclass:l,property:h,menu:d}=cc._decorator;let u=class extends n.default{constructor(){super(...arguments),this.txtTips=null,this.btnCancel=null,this.btnOK=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}updateDisplay(){let e="\u20b9"+r.UIUtils.getShortNumber(o.default.gameData.getDropChips());this.txtTips.string=s.LocalLang.get("game_drop_tips",[e]),r.UIUtils.ButtonEvent(this.btnCancel,this.onTouchClose.bind(this)),r.UIUtils.ButtonEvent(this.btnOK,this.onTouchOkey.bind(this))}onTouchOkey(){s.commandCenter.emit(new c.CmdDrop),this.hide()}onTouchClose(){this.hide()}};a([h(cc.Label)],u.prototype,"txtTips",void 0),a([h(cc.Button)],u.prototype,"btnCancel",void 0),a([h(cc.Button)],u.prototype,"btnOK",void 0),u=a([l],u),i.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],FilterCell:[function(e,t,i){"use strict";cc._RF.push(t,"0f153SLIxZJAprC+YSThgRZ","FilterCell");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.FilterCell=void 0;const s=e("../../Business/Data/DataManager"),o=e("../Common/UIUtils"),{ccclass:n,property:r,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.pointValueIdx=0,this.callback=null}onLoad(){o.UIUtils.NodeClickEvent(this.node,this.onToucFilterRecord.bind(this))}setData(e,t){this.pointValueIdx=e;let i=s.default.homeData.getPointValueList();this.txtPointValue.string=i[e].toString(),e=e>4?4:e,this.callback=t}onToucFilterRecord(){this.callback(this.pointValueIdx)}};a([r(cc.Label)],l.prototype,"txtPointValue",void 0),l=a([n,c("Lobby/FilterCell")],l),i.FilterCell=l,cc._RF.pop()},{"../../Business/Data/DataManager":"DataManager","../Common/UIUtils":"UIUtils"}],GameAction:[function(e,t,i){"use strict";cc._RF.push(t,"5725aL0vPtBNqkFplGAH0Ve","GameAction");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("../Business/Logic/GameController"),h=e("./Common/PrefabPool"),d=e("./PokerNode"),u=e("./RaiseLayer"),{ccclass:p,property:m,menu:g}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.btnFold=null,this.btnCall=null,this.btnCheck=null,this.btnRaise=null,this.btnAutoFold=null,this.btnAutoCheck=null,this.btnAutoCallAny=null,this.txtBalance=null,this.txtBtnCall=null,this.txtBtnAutoCheck=null,this.txtBtnAutoFold=null,this.dealCardPos=null,this.playerCardNode=null,this.tableCardNode=null,this.raiseLayer=null,this.gameData=null,this.handPokerList=[],this.cardWidth=0,this.tableCardGap=0,this.handCardPosList=[],this.handCardAngleList=[],this.tableCardList=[]}onLoad(){s.noticeCenter.registAllNotice(this),this.gameData=o.default.gameData,this.initUI(),this.resetGameStage(),this.clearGame()}initUI(){this.handPokerList=[];for(let e=0;e<n.MAX_HAND_CARDS;e++){let e=h.default.get(n.PrefabList.PokerNode);e.setParent(this.playerCardNode),e.setPosition(0,0),e.active=!1,this.handPokerList.push(e.getComponent(d.default))}this.cardWidth=this.handPokerList[0].node.width*n.PlayerCardScale,this.tableCardGap=20+this.cardWidth,this.handPokerList.forEach((e,t)=>{this.handCardPosList[t]=new cc.Vec3(this.cardWidth/3*t,0),this.handCardAngleList[t]=new cc.Vec3(this.cardWidth/3*t,0)});for(let e=0;e<5;e++){let e=h.default.get(n.PrefabList.PokerNode);e.setParent(this.tableCardNode),e.setPosition(0,0),e.active=!1,e.scale=n.PlayerCardScale,this.tableCardList.push(e.getComponent(d.default))}this.btnFold.node.on("click",this.onTouchFold,this),this.btnCall.node.on("click",this.onTouchCall,this),this.btnRaise.node.on("click",this.onTouchRaise,this),this.btnAutoFold.node.on("toggle",this.onTouchAutoFold,this),this.btnAutoCheck.node.on("toggle",this.onTouchAutoCheck,this),this.btnAutoCallAny.node.on("toggle",this.onTouchAutoCallAny,this)}resizeUI(){this.componentReplace(this.dealCardPos)}componentReplace(e){let t=cc.view.getDesignResolutionSize();e.x=e.x*t.width/n.OriginalDesign.width,e.y=e.y*t.height/n.OriginalDesign.height}clearGame(){this.clearHandCards(),this.clearTableCards(),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1}stopDealCardsAction(){let e=this.handPokerList;for(let t=0;t<e.length;++t){let i=e[t];i.node.scaleX=1,i.node.stopAllActions()}}clearHandCards(){this.handPokerList.forEach(e=>{e.node.active=!1,e.node.x=0,e.node.y=0,e.node.scale=1,e.node.stopAllActions(),e.setPoker(-1)})}clearTableCards(){this.tableCardList.forEach(e=>{e.node.active=!1,e.node.x=0,e.node.stopAllActions(),e.setPoker(-1)})}resetGameStage(){}onTouchFold(){s.commandCenter.emit(new l.CmdFold),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1}onTouchCall(){s.commandCenter.emit(new l.CmdCall),this.setActionBtnState(!1),this.setAutoBtnState(!1),this.raiseLayer.node.active=!1}onTouchCheck(){}onTouchRaise(){if(0==this.raiseLayer.node.active)return this.raiseLayer.node.active=!0,this.raiseLayer.setCloseCallback(()=>{this.btnRaise.interactable=!0}),void(this.gameData.getSelfPlayer().getChips()<this.gameData.getRaiseLimit()?this.btnRaise.interactable=!1:this.btnRaise.interactable=!0);if(1==this.raiseLayer.node.active){let e=new l.CmdRaise;e.chip=this.gameData.getSelfPlayer().getRaiseChip(),s.commandCenter.emit(e),this.raiseLayer.node.active=!1}}onTouchAutoFold(){this.btnAutoCheck.isChecked=!1,this.btnAutoCallAny.isChecked=!1}onTouchAutoCheck(){this.btnAutoFold.isChecked=!1,this.btnAutoCallAny.isChecked=!1}onTouchAutoCallAny(){this.btnAutoFold.isChecked=!1,this.btnAutoCheck.isChecked=!1}dealCards(){let e=this.gameData.getHandCardData().getHandCardList(),t=cc.tween(this.playerCardNode);for(let i=0;i<n.MAX_HAND_CARDS;i++){let e=this.handPokerList[i];e.setPoker(-1),e.node.stopAllActions(),t.call(()=>{let t=this.dealCardPos.parent.convertToWorldSpaceAR(this.dealCardPos.position),a=this.playerCardNode.convertToNodeSpaceAR(t),s=this.handCardPosList[i];e.node.active=!0,c.UIUtils.cardFly(e.node,a,s,n.PlayerCardScale,.5,10-20*i)}),t.delay(.5)}this.handPokerList.forEach((i,a)=>{t.call(()=>{c.UIUtils.flipToFront(i.node,.5,()=>{i.setPoker(e[a])})})}),t.start()}dealTableCard1st(e){let t=o.default.gameData.getTableCards(),i=this.cardWidth/2,a=this.tableCardGap,s=cc.tween(this.tableCardNode);t.forEach((e,t)=>{s.call(()=>{let s=this.tableCardList[t];s.node.active=!0,s.node.x=i,s.setPoker(-1),cc.tween(s.node).to(.5,{x:i+a*t},{easing:"smooth"}).start(),c.UIUtils.flipToFront(s.node,.5,()=>{this.tableCardList[t].setPoker(e)})})}),s.delay(.5).call(()=>{e()}).start()}dealTableCard2nd(e,t){let i=o.default.gameData.getTableCards()[e],a=this.cardWidth/2+this.tableCardGap*e,s=this.tableCardList[e];s.setPoker(-1),s.node.active=!0,s.node.x=a,c.UIUtils.flipToFront(s.node,.5,()=>{s.setPoker(i),t()})}setAutoBtnState(e){if(this.btnAutoFold.node.active=e,this.btnAutoCheck.node.active=e,this.btnAutoCallAny.node.active=e,e){this.gameData.getSelfPlayer().getChips();let e=this.gameData.getNowMaxBet()-this.gameData.getSelfPlayer().getRoundBet();e>0?this.txtBtnAutoCheck.string="CALL "+c.UIUtils.getShortNumber(e):0==e&&(this.txtBtnAutoCheck.string="CHECK")}}setActionBtnState(e){if(this.btnFold.node.active=e,this.btnCall.node.active=e,this.btnRaise.node.active=e,this.btnRaise.interactable=e,e||(this.raiseLayer.node.active=!1),e){let e=this.gameData.getSelfPlayer().getChips(),t=this.gameData.getNowMaxBet()-this.gameData.getSelfPlayer().getRoundBet();t>0?t>=e?(this.txtBtnCall.string="All in",this.btnRaise.node.active=!1):this.txtBtnCall.string="CALL "+c.UIUtils.getShortNumber(t):0==t&&(this.txtBtnCall.string="CHECK")}}setAutoBtnCheck(e){this.btnAutoFold.isChecked=e,this.btnAutoCheck.isChecked=e,this.btnAutoCallAny.isChecked=e}updateBtnState(){let e=this.gameData.getGameStage();this.gameData.getSelfPlayer().isFold()?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):this.gameData.getSelfPlayer().isAllin()?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Waiting?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Prepare?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Action?this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.setAutoBtnState(!1),this.setActionBtnState(!0)):(this.setAutoBtnState(!0),this.setActionBtnState(!1)):e==n.GameStage.Flop?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Turn?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.River?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Compare?(this.setAutoBtnState(!1),this.setActionBtnState(!1)):e==n.GameStage.Finish&&(this.setAutoBtnState(!1),this.setActionBtnState(!1))}highlightCards(e){this.handPokerList.forEach(e=>{e.setHighlight(!1)}),this.tableCardList.forEach(e=>{e.setHighlight(!1)}),e.forEach(e=>{this.handPokerList.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)}),this.tableCardList.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})}updateDropChips(){}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(o.default.userData.getBalance())}showHandCardMask(){this.handPokerList.forEach(e=>{e.setMask(!0)})}onNtcGameInfo(e){if(this.gameData.getSelfSeat()<0||!this.gameData.getSelfPlayer().isPlaying())return;let t=this.gameData.getGameStage();t!=n.GameStage.Prepare&&t!=n.GameStage.Waiting&&(this.updateBtnState(),this.updateDropChips())}onNtcResetGame(e){this.clearGame()}onNtcStandUp(e){this.gameData.getSelfSeat()}onNtcDealCards(e){this.clearGame()}onNtcWaitAction(e){if(this.updateBtnState(),e.seat==this.gameData.getSelfSeat()){let e=this.gameData.getSelfPlayer().getRoundBet(),t=this.gameData.getNowMaxBet();this.btnAutoFold.isChecked&&(e<t?this.onTouchFold():this.onTouchCall()),this.btnAutoCheck.isChecked&&this.onTouchCall(),this.btnAutoCallAny.isChecked&&this.onTouchCall(),this.setAutoBtnCheck(!1)}}onNtcTableShow1st(e){this.updateBtnState(),this.setAutoBtnCheck(!1)}onNtcTableShow2nd(e){this.updateBtnState(),this.setAutoBtnCheck(!1)}onNtcRiverRoundEnd(e){this.updateBtnState()}onNtcFold(e){e.seat==this.gameData.getSelfSeat()&&(this.showHandCardMask(),this.updateBtnState())}onNtcRaise(e){this.btnAutoCheck.isChecked=!1}onNtcShowWinner(e){this.highlightCards(e.cards),e.seat!=this.gameData.getSelfSeat()&&this.showHandCardMask()}onNtcShowMultiWinner(e){this.highlightCards(e.cards),e.seat[0]!=this.gameData.getSelfSeat()&&this.showHandCardMask()}};a([m({type:cc.Button,displayName:""})],f.prototype,"btnFold",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnCall",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnCheck",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnRaise",void 0),a([m({type:cc.Toggle,displayName:""})],f.prototype,"btnAutoFold",void 0),a([m({type:cc.Toggle,displayName:""})],f.prototype,"btnAutoCheck",void 0),a([m({type:cc.Toggle,displayName:""})],f.prototype,"btnAutoCallAny",void 0),a([m(cc.Label)],f.prototype,"txtBalance",void 0),a([m(cc.Label)],f.prototype,"txtBtnCall",void 0),a([m(cc.Label)],f.prototype,"txtBtnAutoCheck",void 0),a([m(cc.Label)],f.prototype,"txtBtnAutoFold",void 0),a([m({type:cc.Node,displayName:"\u767c\u724c\u4f4d\u7f6e"})],f.prototype,"dealCardPos",void 0),a([m({type:cc.Node,displayName:""})],f.prototype,"playerCardNode",void 0),a([m({type:cc.Node,displayName:""})],f.prototype,"tableCardNode",void 0),a([m(u.default)],f.prototype,"raiseLayer",void 0),a([s.onNotice(r.NtcGameInfo)],f.prototype,"onNtcGameInfo",null),a([s.onNotice(r.NtcResetGame)],f.prototype,"onNtcResetGame",null),a([s.onNotice(r.NtcStandUp)],f.prototype,"onNtcStandUp",null),a([s.onNotice(r.NtcDealCards)],f.prototype,"onNtcDealCards",null),a([s.onNotice(r.NtcWaitAction)],f.prototype,"onNtcWaitAction",null),a([s.onNotice(r.NtcTableShow1st)],f.prototype,"onNtcTableShow1st",null),a([s.onNotice(r.NtcTableShow2nd)],f.prototype,"onNtcTableShow2nd",null),a([s.onNotice(r.NtcRiverRoundEnd)],f.prototype,"onNtcRiverRoundEnd",null),a([s.onNotice(r.NtcFold)],f.prototype,"onNtcFold",null),a([s.onNotice(r.NtcRaise)],f.prototype,"onNtcRaise",null),a([s.onNotice(r.NtcShowWinner)],f.prototype,"onNtcShowWinner",null),a([s.onNotice(r.NtcShowMultiWinner)],f.prototype,"onNtcShowMultiWinner",null),f=a([p],f),i.default=f,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode","./RaiseLayer":"RaiseLayer"}],GameController:[function(e,t,i){"use strict";cc._RF.push(t,"b33e4rPpodINYZCfe4x62BN","GameController");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.GameController=i.CmdDrop=i.CmdQuitGame=i.CmdRaise=i.CmdCall=i.CmdFold=i.CmdSwitchTable=i.CmdIntoGame=i.CmdTestRiverRound=i.CmdTestJudge=i.CmdTestAction=i.CmdTestTable2nd=i.CmdTestTable1st=i.CmdTestDealCard=i.CmdTestKickNoMoney=i.CmdTestStart=void 0;const s=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),r=e("./GameNotice"),c=e("../NetWork/NetworkManager"),l=e("./SceneController"),h=e("../Data/PokerData");let d=class{};d=a([s.createCommand],d),i.CmdTestStart=d;let u=class{};u=a([s.createCommand],u),i.CmdTestKickNoMoney=u;let p=class{};p=a([s.createCommand],p),i.CmdTestDealCard=p;let m=class{};m=a([s.createCommand],m),i.CmdTestTable1st=m;let g=class{constructor(e){this.index=-1,this.index=e}};g=a([s.createCommand],g),i.CmdTestTable2nd=g;let f=class{constructor(e){this.seat=-1,this.seat=e}};f=a([s.createCommand],f),i.CmdTestAction=f;let C=class{};C=a([s.createCommand],C),i.CmdTestJudge=C;let y=class{};y=a([s.createCommand],y),i.CmdTestRiverRound=y;let S=class{constructor(e){this.gameCode="",this.gameCode=e}};S=a([s.createCommand],S),i.CmdIntoGame=S;let b=class{};b=a([s.createCommand],b),i.CmdSwitchTable=b;let _=class{};_=a([s.createCommand],_),i.CmdFold=_;let P=class{};P=a([s.createCommand],P),i.CmdCall=P;let D=class{constructor(){this.chip=0}};D=a([s.createCommand],D),i.CmdRaise=D;let v=class{};v=a([s.createCommand],v),i.CmdQuitGame=v;let N=class{};N=a([s.createCommand],N),i.CmdDrop=N;class L extends s.Controller{constructor(){super(),this.m_socket=null,this.pokerList=[],this.setName("SettingController"),s.noticeCenter.registAllNotice(this),s.commandCenter.registAllCommand(this),this.m_socket=c.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.gameData=o.default.gameData}onExit(){s.noticeCenter.targetOff(this),s.commandCenter.targetOff(this)}onCmdTestKickNoMoney(e){this.gameData.getPlayerList().forEach(e=>{if(e.getChips()<this.gameData.getBetLimit()&&e.getSeat()!=this.gameData.getSelfSeat()&&e.isPlaying()){let t={player:{}};t.player.index=e.getSeat(),this.onNetStandUp(t)}}),cc.tween(this).delay(.5).call(()=>{for(let e=0;e<5;e++)if(this.gameData.getPlayerList()[e],null==this.gameData.getPlayerBySeat(e)){let t={player:{}};t.player.index=e,t.player.canPlay=!0,t.player.isPlaying=!0,t.player.chip=s.Utils.randRange(1e3,4e3),this.onNetSitDown(t)}}).start()}onCmdTestStart(e){let t={};cc.tween(this).call(()=>{(t={}).player={};let e=0;for(let i=0;i<3;i++)e==this.gameData.getSelfSeat()&&(e+=1),t.player.index=e,t.player.canPlay=!0,t.player.isPlaying=!0,t.player.chip=s.Utils.randRange(1e3,4e3),this.onNetSitDown(t),e+=1}).delay(.5).call(()=>{(t={}).timeout=1e3,this.onNetReady(t)}).delay(1).call(()=>{s.commandCenter.emit(new p)}).start()}onCmdTestDealCard(e){let t={};this.pokerList=[];for(let s=0;s<52;s++)this.pokerList.push(s);let i=o.default.gameData.getPlayerList(),a=[];i.forEach(e=>{if(e.getSeat()>-1){let t=[];for(let e=0;e<2;e++){let e=s.Utils.randRange(0,this.pokerList.length-1),i=this.pokerList[e];this.pokerList.splice(e,1),t.push(i)}e.setHandCards(t),a.push(t.slice(0))}else a.push([])}),t.timeout=1e4,t.myPokers=this.gameData.getSelfPlayer().getHandCards().slice(0);let n=this.gameData.getPlayerCount()-1,r=s.Utils.randRange(0,n),c=r-1<0?n:r-1,l=r+1>n?0:r+1;t.index=l,t.bBlindSeat=r,t.sBlindSeat=c,t.bBlindChip=this.gameData.getPlayerBySeat(r).getChips()-this.gameData.getBetLimit(),t.sBlindChip=this.gameData.getPlayerBySeat(c).getChips()-this.gameData.getBetLimit()/2,t.testPokerList=a.slice(0),this.onNetDealCards(t)}onCmdTestTable1st(e){let t={tableCards:[]};for(let a=0;a<3;a++){let e=s.Utils.randRange(0,this.pokerList.length-1),i=this.pokerList[e];this.pokerList.splice(e,1),t.tableCards.push(i)}let i=0;this.gameData.getPlayerList().forEach(e=>{i+=e.getRoundBet()}),t.chips=i,this.onNetTableShow1st(t)}onCmdTestTable2nd(e){let t={},i=s.Utils.randRange(0,this.pokerList.length-1),a=this.pokerList[i];this.pokerList.splice(i,1),t.tableCard=a,e.index;let o=0;this.gameData.getPlayerList().forEach(e=>{o+=e.getRoundBet()}),t.chips=o+this.gameData.getTableChips(),t.index=e.index,this.onNetTableShow2nd(t)}onCmdTestAction(e){let t={},i=e.seat,a=this.gameData.getPlayerBySeat(i);for(let s=0;s<this.gameData.getPlayerCount()&&(i>this.gameData.getPlayerCount()-1&&(i=0),(a.isFold()||a.isAllin())&&(i+=1),i>this.gameData.getPlayerCount()-1&&(i=0),a.isFold()&&a.isAllin());s++);this.gameData.setActiveSeat(i),this.gameData.getPlayerList().filter(e=>{if(e.isPlaying()&&!e.isFold()&&!e.isAllin())return e}).length>1?(t.index=this.gameData.getActiveSeat(),t.timeout=1e4,this.gameData.getPlayerBySeat(t.index).canAction()?this.onNetWaitAction(t):s.commandCenter.emit(new f(t.index))):s.commandCenter.emit(new C)}onCmdIntoGame(e){this.sendIntoGame(e.gameCode)}sendIntoGame(e){let t={};t.gameCode=e,cc.log("[send] IntoRoom = "+JSON.stringify(t)),this.m_socket.send("INTO_ROOM",t);let i={status:{}};i.status.state=n.GameStage.Prepare,i.status.nowPlayerIndex=1,i.players=[];let a={};a.index=i.status.nowPlayerIndex,a.canPlay=!0,i.players.push(a),i.my={},i.my.index=i.status.nowPlayerIndex,i.start={},i.start.baseBet=20,i.start.balance=2e3,this.onAckIntoGame(i)}onAckIntoGame(e){let t=e;cc.log("IntoRoomRsp = "+JSON.stringify(t)),this.setGameDataFromMsg(t),s.noticeCenter.emit(new r.NtcGameInfo)}setGameDataFromMsg(e){let t=this.gameData;t.resetAllData(),t.setGameStage(e.status.state),t.setStageLeftTime(e.status.timeout/1e3);let i=t.getPlayerList();for(let a=0;a<e.players.length;++a){let t=e.players[a],s=i[t.index];s&&this.setPlayerFromMsg(s,t)}t.setSelfSeat(e.my.index),t.setActiveSeat(e.status.nowPlayerIndex),t.setBetLimit(e.start.baseBet),t.getSelfPlayer().setChips(e.start.balance),e.status.state>n.GameStage.Prepare&&(e.my.playRoundNum,t.getHandCardData())}setPlayerFromMsg(e,t){e.setSeat(t.index),e.setPlaying(t.canPlay),e.setChips(t.chip),e.setPlaying(t.isPlaying)}BackToLobby(){s.commandCenter.emit(new l.CmdScene(n.SceneType.Lobby))}onNetSitDown(e){let t=e;cc.log("[receive] PushUpTable = "+JSON.stringify(t)),this.setSitDownData(t)}setSitDownData(e){let t=this.gameData.getPlayerList()[e.player.index];if(!t)return void cc.log("error, cannot find player");this.setPlayerFromMsg(t,e.player);let i=new r.NtcSitDown;i.seat=t.getSeat(),s.noticeCenter.emit(i)}onNetStandUp(e){let t=e;cc.log("[receive] PushDownTable = "+JSON.stringify(t)),this.setStandUpData(t)}setStandUpData(e){let t=e.player.index,i=this.gameData,a=i.getPlayerIndexBySeat(e.player.index);if(!a)return void cc.log("error, cannot find player");a.resetAllData(),t==i.getSelfSeat()&&i.setSelfSeat(-1);let o=new r.NtcStandUp;o.seat=t,s.noticeCenter.emit(o)}onNetReady(e){let t=e;cc.log("[receive] Ready = "+JSON.stringify(t)),this.gameData.setStageLeftTime(t.timeout/1e3),this.gameData.setGameStage(n.GameStage.Prepare);let i=new r.NtcPrepare;s.noticeCenter.emit(i)}onNetDealCards(e){let t=e;cc.log("[receive] Deal Cards = "+JSON.stringify(t));let i=this.gameData;i.resetGameData(),i.setGameStage(n.GameStage.Preflop),i.setGameRound(n.GameRound.PreFlop),i.setStageLeftTime(t.timeout/1e3),i.setActiveSeat(t.index);let a=i.getPlayerList();for(let s of a)s.getSeat()>=0&&s.setPlaying(!0);i.getPlayerList().forEach((e,a)=>{e.getSeat()!=i.getSelfSeat()&&e.setHandCards(t.testPokerList[a])}),this.gameData.getHandCardData().dealCards(t.myPokers),this.gameData.getSelfPlayer().setHandCards(t.myPokers),i.setBigBlindSeat(t.bBlindSeat);let o=i.getPlayerBySeat(t.bBlindSeat);o.setRoundBet(i.getBetLimit()),o.setChips(t.bBlindChip),i.setNowMaxBet(i.getBetLimit()),i.setSmallBlindSeat(t.sBlindSeat);let c=i.getPlayerBySeat(t.sBlindSeat);c.setRoundBet(i.getBetLimit()/2),c.setChips(t.sBlindChip);let l=new r.NtcDealCards;l.bigBlindSeat=t.bBlindSeat,l.smallBlindSeat=t.sBlindSeat,s.noticeCenter.emit(l);let h=new r.NtcBetChip;h.seat=t.bBlindSeat,h.chips=i.getBetLimit(),s.noticeCenter.emit(h);let d=new r.NtcBetChip;d.seat=t.sBlindSeat,d.chips=i.getBetLimit()/2,s.noticeCenter.emit(d),s.noticeCenter.emit(new r.NtcUpdateBalance)}onCmdSwitchTable(e){cc.log("[send] SwitchTable = "+JSON.stringify(void 0)),this.m_socket.send("SWITCH_TABLE",void 0)}onAckSwitchTable(e){cc.log("[receive] SwitchTableRsp code = "+e.state.code);let t=e;cc.log("ChangeTableRsp = "+JSON.stringify(t)),this.gameData.resetAllData(),s.noticeCenter.emit(new r.NtcResetGame),this.setGameDataFromMsg(t),s.noticeCenter.emit(new r.NtcGameInfo)}onCmdTestRiverRound(e){let t={players:[]};this.gameData.getPlayerList().forEach(e=>{if(e.isPlaying()&&!e.isFold()){let i={};i.index=e.getSeat(),0==e.getSeat()&&e.setHandCards([2,1]),e.getSeat(),i.cards=e.getHandCards(),t.players.push(i);let a=this.gameData.getTableCards(),s=this.gameData.getHandCardData().getCardsType(a,e.getHandCards());e.setCardTypeData(s)}});let i=this.gameData.getPlayerList().filter(e=>{if(e.getSeat()>-1&&!e.isFold())return e}).sort((e,t)=>{let i=e.getCardTypeData(),a=t.getCardTypeData(),s=i.compare,o=a.compare;if(i.type!=a.type)return a.type-i.type;for(let n=0;n<s.length;n++)if(o[n]!=s[n])return h.PokerData.pokerCompare(a.compare[n])-h.PokerData.pokerCompare(i.compare[n])});i.forEach(()=>{});let a=0;this.gameData.getPlayerList().forEach(e=>{a+=e.getRoundBet(),e.setBetSum(e.getBetSum()+e.getRoundBet())}),t.chips=a+this.gameData.getTableChips();let s=[];this.gameData.getPlayerList().forEach(e=>{let t=e.getBetSum();s.includes(t)||s.push(t)}),s.sort((e,t)=>t-e);let o=this.gameData.getPlayerList(),n=i[0].getBetSum(),r=[],c=[],l=0;if(n<s[0])for(let h=0;h<i.length;h++){let e=i[h],t=e.getBetSum();if(t<l)continue;let a=o.filter(e=>e.getBetSum()>=t),s=o.filter(e=>e.getBetSum()<t),n=t*a.length;if(s.forEach(e=>{n+=e.getBetSum()}),c.forEach(e=>{n-=e}),!(n>0))break;r.push(e.getSeat()),c.push(n),l=t}if(r.length>0){t.multiWin=!0,t.winSeats=r,t.winChips=c;let e=[];r.forEach((t,i)=>{let a=this.gameData.getPlayerBySeat(t).getChips()+c[i];e.push(a)}),t.winChip=e}else t.multiWin=!1,t.winIndex=i[0].getSeat(),t.winChip=i[0].getChips()+t.chips;this.onNetRiverRoundEnd(t)}onCmdTestJudge(e){let t=this.gameData.getActiveSeat()+1,i=this.gameData.getPlayerList(),a=this.gameData.getPlayerList().filter(e=>{if(e.getSeat()>-1)return e.isAllin()}),o=this.gameData.getPlayerList().filter(e=>{if(e.getSeat()>-1)return e.canAction()}),r=this.gameData.getPlayerList().filter(e=>{if(e.getSeat()>-1)return!e.isFold()&&!e.isAllin()}),c=!1;if(o.length>0&&(c=!0),a.length>0&&1==o.length&&o[0].getRoundBet()==this.gameData.getNowMaxBet()&&1==r.length&&(c=!1),c){for(let e=0;e<this.gameData.getPlayerCount();e++){t>this.gameData.getPlayerCount()-1&&(t=0);let e=this.gameData.getPlayerBySeat(t);if((e.isFold()||e.isActioned()||e.isAllin())&&(t+=1),t>this.gameData.getPlayerCount()-1&&(t=0),!this.gameData.getPlayerBySeat(t).isFold()||this.gameData.getPlayerBySeat(t).getRoundBet()<this.gameData.getNowMaxBet())break}if(this.gameData.getPlayerBySeat(t).canAction()){let e={};this.gameData.setActiveSeat(t),e.index=t,e.timeout=1e4,this.onNetWaitAction(e)}else this.gameData.setActiveSeat(t),s.commandCenter.emit(new C)}else cc.tween(this).delay(.3).call(()=>{let e=0;if(i.forEach(t=>{t.isPlaying()&&t.isFold()&&(e+=1)}),e==this.gameData.getPlayerCount()-1){let e={},t=0;this.gameData.getPlayerList().forEach(e=>{t+=e.getRoundBet()});let i=this.gameData.getPlayerList().find(e=>{if(!e.isFold())return e});return e.chips=t+this.gameData.getTableChips(),e.winIndex=i.getSeat(),e.winChip=i.getChips()+e.chips,void this.onNetGameEnd(e)}let t=this.gameData.getGameRound();t==n.GameRound.PreFlop?s.commandCenter.emit(new m):t==n.GameRound.FlopRound?s.commandCenter.emit(new g(3)):t==n.GameRound.TurnRound?s.commandCenter.emit(new g(4)):t==n.GameRound.RiverRound&&s.commandCenter.emit(new y)}).start()}onCmdFold(e){let t={};cc.log("[send] PlayerFold = "+JSON.stringify(t)),this.m_socket.send("FOLD",t);let i={};i.index=o.default.gameData.getSelfSeat(),this.onNetFold(i),s.commandCenter.emit(new C)}onNetFold(e){let t=e;cc.log("[receive] Fold = "+JSON.stringify(t)),this.gameData.getPlayerBySeat(t.index).setFold(!0);let i=new r.NtcFold;i.seat=t.index,s.noticeCenter.emit(i)}onCmdCall(e){let t={};cc.log("[send] PlayerCall = "+JSON.stringify(t)),this.m_socket.send("CALL",t);let i={};i.index=this.gameData.getSelfSeat();let a=this.gameData.getNowMaxBet()-this.gameData.getSelfPlayer().getRoundBet();a>this.gameData.getSelfPlayer().getChips()?i.chips=this.gameData.getSelfPlayer().getChips():i.chips=a,this.onNetCall(i),s.commandCenter.emit(new C)}onNetCall(e){let t=e;cc.log("[receive] Call = "+JSON.stringify(t));let i=this.gameData.getPlayerBySeat(t.index),a=i.getRoundBet()+t.chips;i.setRoundBet(a),i.setChips(i.getChips()-t.chips),0==i.getChips()&&i.setAllin(!0);let o=new r.NtcCall;o.seat=t.index,o.chips=t.chips,s.noticeCenter.emit(o),s.noticeCenter.emit(new r.NtcUpdateBalance)}onCmdRaise(e){let t={};cc.log("[send] PlayerRaise = "+JSON.stringify(t)),t.chip=e.chip,this.m_socket.send("RAISE",t);let i={};i.index=o.default.gameData.getSelfSeat(),i.chips=e.chip,this.onNetRaise(i),s.commandCenter.emit(new C)}onNetRaise(e){let t=e;cc.log("[receive] Raise = "+JSON.stringify(t));let i=this.gameData,a=i.getPlayerBySeat(t.index),o=a.getRoundBet()+t.chips;a.setRoundBet(o),a.getChips()==t.chips&&a.setAllin(!0),a.setChips(a.getChips()-t.chips),i.setNowMaxBet(o),i.getPlayerList().forEach(e=>{e.getSeat()!=t.index&&(e.isAllin()||e.setActioned(!1))});let n=new r.NtcRaise;n.seat=t.index,n.chips=t.chips,s.noticeCenter.emit(n),s.noticeCenter.emit(new r.NtcUpdateBalance)}onCmdQuitGame(e){this.m_socket.isConnected(),cc.log("[send] ExitGame = "+JSON.stringify(void 0)),this.m_socket.send("EXIT_GAME",void 0),this.onAckExitGame({}),cc.Tween.stopAllByTarget(this)}onAckExitGame(e){let t=e;cc.log("ExitRoomRsp = "+JSON.stringify(t)),this.BackToLobby()}onNetTableShow1st(e){let t=e;cc.log("[receive] TableShow1st = "+JSON.stringify(t)),this.gameData.setGameStage(n.GameStage.Flop),this.gameData.setTableCards(t.tableCards),this.gameData.setTableChips(t.chips),this.gameData.getPlayerList().forEach(e=>{e.setBetSum(e.getBetSum()+e.getRoundBet()),e.setRoundBet(0),e.setActioned(!1)}),this.gameData.setNowMaxBet(0),this.gameData.setGameRound(n.GameRound.FlopRound),s.noticeCenter.emit(new r.NtcTableShow1st)}onNetTableShow2nd(e){let t=e;cc.log("[receive] TableShow2nd = "+JSON.stringify(t)),this.gameData.getTableCards().push(t.tableCard),this.gameData.setTableChips(t.chips),this.gameData.getPlayerList().forEach(e=>{e.setBetSum(e.getBetSum()+e.getRoundBet()),e.setRoundBet(0),e.setActioned(!1)}),this.gameData.setNowMaxBet(0),3==t.index?(this.gameData.setGameStage(n.GameStage.Turn),this.gameData.setGameRound(n.GameRound.TurnRound)):4==t.index&&(this.gameData.setGameStage(n.GameStage.River),this.gameData.setGameRound(n.GameRound.RiverRound));let i=new r.NtcTableShow2nd;i.index=t.index,s.noticeCenter.emit(i)}onNetRiverRoundEnd(e){let t=e;if(cc.log("[receive] RiverRoundEnd = "+JSON.stringify(t)),t.players.forEach(e=>{this.gameData.getPlayerBySeat(e.index).setHandCards(e.cards)}),this.gameData.getPlayerList().forEach(()=>{}),this.gameData.setGameStage(n.GameStage.Compare),this.gameData.setTableChips(t.chips),t.multiWin){this.gameData.setWinSeat(t.winSeats),t.winSeats.forEach((e,i)=>{this.gameData.getPlayerBySeat(e).setChips(t.winChip[i])});let e=new r.NtcRiverRoundEndMulti;e.chips=t.winChips,s.noticeCenter.emit(e)}else this.gameData.setWinSeat([t.winIndex]),this.gameData.getPlayerBySeat(t.winIndex).setChips(t.winChip),s.noticeCenter.emit(new r.NtcRiverRoundEnd)}onNetWaitAction(e){let t=e;cc.log("[receive] WaitAction = "+JSON.stringify(t));let i=this.gameData;i.setActiveSeat(t.index),i.setStageLeftTime(t.timeout/1e3),i.setGameStage(n.GameStage.Action),i.getPlayerBySeat(t.index).setActioned(!0);let a=new r.NtcWaitAction;a.seat=t.index,s.noticeCenter.emit(a),t.index!=this.gameData.getSelfSeat()&&cc.tween(this).delay(1).call(()=>{let e={};e.index=t.index;let i=this.gameData.getPlayerBySeat(t.index);if(i.getChips()<=this.gameData.getNowMaxBet())return s.Utils.randRange(1,100)<51?void this.onNetFold(e):(e.chips=i.getChips(),void this.onNetCall(e));let a=s.Utils.randRange(1,100);if(a<11)this.onNetFold(e);else if(10<a&&a<91){let t=this.gameData.getNowMaxBet()-i.getRoundBet();e.chips=t,this.onNetCall(e)}else{let t=s.Utils.randRange(1,100),a=this.gameData.getBetLimit(),o=0==this.gameData.getTableChips()?2*a:a,n=0==this.gameData.getNowMaxBet()?o:o+this.gameData.getNowMaxBet();if(t>70&&(n+=a/2*(t%20)),n>90&&(n=i.getChips()),i.getChips()<n){let t=this.gameData.getNowMaxBet()-i.getRoundBet();e.chips=t,this.onNetCall(e)}e.chips=n,this.onNetRaise(e)}}).delay(.5).call(()=>{s.commandCenter.emit(new C)}).start()}onNetGameEnd(e){let t=e;cc.log("[receive] GameEnd = "+JSON.stringify(t)),this.gameData.setGameStage(n.GameStage.Finish),this.gameData.setTableChips(t.chips),this.gameData.setWinSeat([t.winIndex]),this.gameData.getPlayerBySeat(t.winIndex).setChips(t.winChip);let i=new r.NtcGameEnd;s.noticeCenter.emit(i)}}a([s.onCommand(u)],L.prototype,"onCmdTestKickNoMoney",null),a([s.onCommand(d)],L.prototype,"onCmdTestStart",null),a([s.onCommand(p)],L.prototype,"onCmdTestDealCard",null),a([s.onCommand(m)],L.prototype,"onCmdTestTable1st",null),a([s.onCommand(g)],L.prototype,"onCmdTestTable2nd",null),a([s.onCommand(f)],L.prototype,"onCmdTestAction",null),a([s.onCommand(S)],L.prototype,"onCmdIntoGame",null),a([s.onMsg("INTO_ROOM")],L.prototype,"onAckIntoGame",null),a([s.onMsg("PLAYER_SIT_DOWN")],L.prototype,"onNetSitDown",null),a([s.onMsg("PLAYER_STAND_UP")],L.prototype,"onNetStandUp",null),a([s.onMsg("READY")],L.prototype,"onNetReady",null),a([s.onMsg("DEAL_CARDS")],L.prototype,"onNetDealCards",null),a([s.onCommand(b)],L.prototype,"onCmdSwitchTable",null),a([s.onMsg("SWITCH_TABLE")],L.prototype,"onAckSwitchTable",null),a([s.onCommand(y)],L.prototype,"onCmdTestRiverRound",null),a([s.onCommand(C)],L.prototype,"onCmdTestJudge",null),a([s.onCommand(_)],L.prototype,"onCmdFold",null),a([s.onMsg("FOLD")],L.prototype,"onNetFold",null),a([s.onCommand(P)],L.prototype,"onCmdCall",null),a([s.onMsg("CALL")],L.prototype,"onNetCall",null),a([s.onCommand(D)],L.prototype,"onCmdRaise",null),a([s.onMsg("RAISE")],L.prototype,"onNetRaise",null),a([s.onCommand(v)],L.prototype,"onCmdQuitGame",null),a([s.onMsg("EXIT_GAME")],L.prototype,"onAckExitGame",null),a([s.onMsg("TABLE_SHOW_1ST")],L.prototype,"onNetTableShow1st",null),a([s.onMsg("TABLE_SHOW_2ND")],L.prototype,"onNetTableShow2nd",null),a([s.onMsg("RIVER_ROUND_END")],L.prototype,"onNetRiverRoundEnd",null),a([s.onMsg("WAIT_FOR_ACTION")],L.prototype,"onNetWaitAction",null),a([s.onMsg("GAME_END")],L.prototype,"onNetGameEnd",null),i.GameController=L,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Data/PokerData":"PokerData","../NetWork/NetworkManager":"NetworkManager","./GameNotice":"GameNotice","./SceneController":"SceneController"}],GameData:[function(e,t,i){"use strict";cc._RF.push(t,"587c8jaYAZM36hqR3idCuRU","GameData"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameData=i.ResultData=void 0;const a=e("./CommonDefine"),s=e("./PlayerData"),o=e("./HandCardsData");class n{constructor(){this.jokerPoint=-1,this.players=[]}}i.ResultData=n,i.GameData=class{constructor(){this.m_gameStage=a.GameStage.Prepare,this.m_players=new Array(a.MAX_PLAYERS),this.m_posTrans=0,this.m_selfSeat=-1,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_handCardData=null,this.m_tableChips=0,this.m_winSeat=[],this.m_resultData=new n,this.m_tableCards=[],this.m_betLimit=0,this.m_nowMaxBet=0,this.m_bBlindSeat=0,this.m_sBlindSeat=0,this.m_gameRound=a.GameRound.PreFlop,this.m_sideBetWinSeat=[],this.m_sideBetWinChips=[],this.m_handCardData=new o.HandCardsData;for(var e=0;e<a.MAX_PLAYERS;++e)this.m_players[e]=new s.PlayerData}resetGameData(){this.m_gameStage=a.GameStage.Prepare,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_tableChips=0,this.m_winSeat=[],this.m_tableCards=[],this.m_nowMaxBet=0,this.m_bBlindSeat=0,this.m_sBlindSeat=0,this.m_gameRound=a.GameRound.PreFlop,this.m_handCardData.resetGameData();for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetGameData()}}resetAllData(){this.resetGameData(),this.m_selfSeat=-1,this.m_posTrans=0,this.m_betLimit=0;for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetAllData()}}getGameStage(){return this.m_gameStage}setGameStage(e){this.m_gameStage=e}setSelfSeat(e){this.m_selfSeat=e,e>=0&&(this.m_posTrans=(2-this.m_selfSeat+a.MAX_PLAYERS)%a.MAX_PLAYERS)}getSelfSeat(){return this.m_selfSeat}getSelfPlayer(){return this.m_selfSeat>=0?this.getPlayerBySeat(this.m_selfSeat):null}getPlayerList(){return this.m_players}getPlayerCount(){for(var e=0,t=0;t<this.m_players.length;++t)this.m_players[t].getSeat()>=0&&e++;return e}getPlayerBySeat(e){if(e<0)return null;let t=null;for(let i=0;i<this.m_players.length;++i){let a=this.m_players[i];if(a.getSeat()==e){t=a;break}}return t}getPosBySeat(e){return(e+this.m_posTrans)%a.MAX_PLAYERS}getSeatByPos(e){return(e-this.m_posTrans+a.MAX_PLAYERS)%a.MAX_PLAYERS}getActiveSeat(){return this.m_activeSeat}setActiveSeat(e){this.m_activeSeat=e}getStageLeftTime(){return this.m_stageLeftTime}setStageLeftTime(e){this.m_stageLeftTime=e}getHandCardData(){return this.m_handCardData}setTableChips(e){this.m_tableChips=e}getTableChips(){return this.m_tableChips}getDropChips(){return 1}getWinSeat(){return this.m_winSeat[0]}setWinSeat(e){this.m_winSeat=e}getWinSeats(){return this.m_winSeat}getResultData(){return this.m_resultData}getTableCards(){return this.m_tableCards}setTableCards(e){this.m_tableCards=e}getBetLimit(){return this.m_betLimit}setBetLimit(e){this.m_betLimit=e}getNowMaxBet(){return this.m_nowMaxBet}setNowMaxBet(e){this.m_nowMaxBet=e}getBigBlindSeat(){return this.m_bBlindSeat}setBigBlindSeat(e){this.m_bBlindSeat=e}getSmallBlindSeat(){return this.m_sBlindSeat}setSmallBlindSeat(e){this.m_sBlindSeat=e}getGameRound(){return this.m_gameRound}setGameRound(e){this.m_gameRound=e}getPlayerSeatList(){let e=[];return this.m_players.forEach(t=>{t.isPlaying()&&e.push(t.getSeat())}),e}getPlayerIndexBySeat(e){return e<0?null:this.m_players.find(t=>t.getSeat()==e)}getRaiseLimit(){return this.m_gameRound==a.GameRound.PreFlop?2*this.m_betLimit:this.m_betLimit}getSideBetWinSeat(){return this.m_sideBetWinSeat}setSideBetWinSeat(e){this.m_sideBetWinSeat=e}getSideBetWinChips(){return this.m_sideBetWinChips}setSideBetWinChips(e){this.m_sideBetWinChips=e}isInGame(){let e=!0;if(this.getGameStage()==a.GameStage.Prepare||this.getGameStage()==a.GameStage.Finish)e=!1;else if(this.getSelfSeat()<0)e=!1;else{let t=this.getSelfPlayer();t.isPlaying()?t.isWinner()&&(e=!1):e=!1}return e}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./HandCardsData":"HandCardsData","./PlayerData":"PlayerData"}],GameEntryCell:[function(e,t,i){"use strict";cc._RF.push(t,"5b909jhCMVA1KYQM3pMKkzO","GameEntryCell");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.GameEntryCell=void 0;const s=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/DataManager"),n=e("../../Business/Logic/SceneController"),r=e("../Common/UIUtils"),c=e("../../Business/Data/CommonDefine"),{ccclass:l,property:h,menu:d}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.imgBg=null,this.pointValueIdx=0}onLoad(){r.UIUtils.NodeClickEvent(this.node,this.onTouchEnterGame.bind(this))}setData(e){this.pointValueIdx=e;let t=o.default.homeData.getPointValueList();this.txtPointValue.string=t[e].toString(),e=e>4?4:e,this.imgBg.spriteFrame=cc.resources.get(c.SpriteList.GameEntey+e,cc.SpriteFrame)}onTouchEnterGame(){o.default.homeData.setGameId(this.pointValueIdx.toString()),s.commandCenter.emit(new n.CmdScene(c.SceneType.Game))}};a([h(cc.Label)],u.prototype,"txtPointValue",void 0),a([h(cc.Sprite)],u.prototype,"imgBg",void 0),u=a([l,d("Lobby/GameEntryCell")],u),i.GameEntryCell=u,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/SceneController":"SceneController","../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],GameNotice:[function(e,t,i){"use strict";cc._RF.push(t,"31af3V/1NxB4o3CuR3dhUJ9","GameNotice");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NtcShowMultiWinner=i.NtcShowWinner=i.NtcBetChip=i.NtcRaise=i.NtcCall=i.NtcFold=i.NtcWaitAction=i.NtcShowWinnerAllFold=i.NtcGameEnd=i.NtcRiverRoundEndMulti=i.NtcRiverRoundEnd=i.NtcTableShow2nd=i.NtcTableShow1st=i.NtcUpdateBalance=i.NtcPrepare=i.NtcStandUp=i.NtcSitDown=i.NtcResetGame=i.NtcGameInfo=i.NtcDealCards=i.NtcDisConnect=void 0;const s=e("../../MobileKit/MKIndex");let o=class{};o=a([s.createNotice],o),i.NtcDisConnect=o;let n=class{constructor(){this.bigBlindSeat=-1,this.smallBlindSeat=-1}};n=a([s.createNotice],n),i.NtcDealCards=n;let r=class{};r=a([s.createNotice],r),i.NtcGameInfo=r;let c=class{};c=a([s.createNotice],c),i.NtcResetGame=c;let l=class{constructor(){this.seat=-1}};l=a([s.createNotice],l),i.NtcSitDown=l;let h=class{constructor(){this.seat=-1}};h=a([s.createNotice],h),i.NtcStandUp=h;let d=class{};d=a([s.createNotice],d),i.NtcPrepare=d;let u=class{constructor(e=-1){this.seat=-1,this.seat=e}};u=a([s.createNotice],u),i.NtcUpdateBalance=u;let p=class{};p=a([s.createNotice],p),i.NtcTableShow1st=p;let m=class{constructor(){this.index=-1}};m=a([s.createNotice],m),i.NtcTableShow2nd=m;let g=class{};g=a([s.createNotice],g),i.NtcRiverRoundEnd=g;let f=class{constructor(){this.chips=[]}};f=a([s.createNotice],f),i.NtcRiverRoundEndMulti=f;let C=class{constructor(){this.seat=-1}};C=a([s.createNotice],C),i.NtcGameEnd=C;let y=class{constructor(){this.seat=-1}};y=a([s.createNotice],y),i.NtcShowWinnerAllFold=y;let S=class{constructor(){this.seat=-1}};S=a([s.createNotice],S),i.NtcWaitAction=S;let b=class{constructor(){this.seat=-1}};b=a([s.createNotice],b),i.NtcFold=b;let _=class{constructor(){this.seat=-1,this.chips=-1}};_=a([s.createNotice],_),i.NtcCall=_;let P=class{constructor(){this.seat=-1,this.chips=-1}};P=a([s.createNotice],P),i.NtcRaise=P;let D=class{constructor(){this.seat=-1,this.chips=-1}};D=a([s.createNotice],D),i.NtcBetChip=D;let v=class{constructor(){this.seat=-1,this.cards=[]}};v=a([s.createNotice],v),i.NtcShowWinner=v;let N=class{constructor(){this.seat=[],this.cards=[]}};N=a([s.createNotice],N),i.NtcShowMultiWinner=N,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GameRecordLayer:[function(e,t,i){"use strict";cc._RF.push(t,"4b45aHvWhBEwoYHbbdBHw2o","GameRecordLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/DataManager"),n=e("../Common/PopupBase"),r=e("../Common/PrefabPool"),c=e("../../Business/Data/CommonDefine"),l=e("./RecordPage"),h=e("./FilterCell"),{ccclass:d,property:u,menu:p}=cc._decorator;let m=class extends n.default{constructor(){super(...arguments),this.txtPage=null,this.noDataTips=null,this.pageView=null,this.btnSwitchRight=null,this.btnSwitchLeft=null,this.filterLayerNode=null,this.btnShowFilter=null,this.txtNowShow=null,this.filterExpendLayer=null,this.filterCell=null,this.selectPointValue=-1,this.filterCellList=[]}static get path(){return"Scenes/Game/game_record_layer"}onLoad(){this.main||(this.main=this.node),this.btnShowFilter.node.on("click",this.onTouchShowFilter,this),this.btnSwitchRight.node.on("click",this.onTouchRight,this),this.btnSwitchLeft.node.on("click",this.onTouchLeft,this),this.pageView.node.on("page-turning",this.onPageTurning,this),this.initUI(),this.clearPage(),this.resetBtnState()}initUI(){this.filterCell.removeFromParent(!1),o.default.homeData.getPointValueList().forEach((e,t)=>{let i=cc.instantiate(this.filterCell);i.setParent(this.filterExpendLayer),i.getComponent(h.FilterCell).setData(t,this.showRecord.bind(this)),this.filterCellList.push(i)}),this.resizeFilterLayer(),this.filterLayerNode.active=!1}updateDisplay(){this.showRecord(0)}onAfterHide(){this.clearPage()}showRecord(e){if(e==this.selectPointValue)return;this.clearPage(),this.filterCellList.forEach((t,i)=>{t.active=i!=e}),this.selectPointValue=e;let t=o.default.homeData.getPointValueList();this.txtNowShow.string=t[e].toString();let i=o.default.userData.getGameRecordLst();if(0==i.length)return this.noDataTips.active=!0,this.btnSwitchLeft.interactable=!1,void(this.btnSwitchRight.interactable=!1);this.noDataTips.active=!1,i.length,i.sort((e,t)=>t.time-e.time);let a=i.filter(t=>t.pv==e),s=a.length/10,n=a.length%10==0?s:Math.floor(s)+1;for(let o=0;o<n;o++){let e=r.default.get(c.PrefabList.RecordPage),t=e.getComponent(l.RecordPage);this.pageView.addPage(e);let i=10*o,s=o==n-1?a.length:i+10,h=[];for(let o=i;o<s;o++)h.push(a[o]);t.setRecordList(h)}this.resetBtnState()}clearPage(){this.pageView.removeAllPages()}onTouchClose(){this.hide()}onTouchRight(){let e=this.pageView.getCurrentPageIndex()+1;e<this.pageView.getPages().length&&this.pageView.setCurrentPageIndex(e)}onTouchLeft(){let e=this.pageView.getCurrentPageIndex()-1;e<0||this.pageView.setCurrentPageIndex(e)}onTouchShowFilter(){this.filterLayerNode.active=!this.filterLayerNode.active,this.filterLayerNode.active&&s.AudioEngine.playEffect(c.SoundList.Click)}onPageTurning(e){this.resetBtnState()}resetBtnState(){let e=this.pageView.getCurrentPageIndex();this.txtPage.string=(e+1).toString();let t=this.pageView.getPages().length;0==e?(this.btnSwitchLeft.interactable=!1,this.btnSwitchRight.interactable=t>1):e+1==t?(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!1):(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!0)}resizeFilterLayer(){let e=o.default.homeData.getPointValueList();this.filterExpendLayer.height=27+(this.filterCell.height+6)*(e.length-1)}};a([u(cc.Label)],m.prototype,"txtPage",void 0),a([u(cc.Node)],m.prototype,"noDataTips",void 0),a([u(cc.PageView)],m.prototype,"pageView",void 0),a([u(cc.Button)],m.prototype,"btnSwitchRight",void 0),a([u(cc.Button)],m.prototype,"btnSwitchLeft",void 0),a([u(cc.Node)],m.prototype,"filterLayerNode",void 0),a([u(cc.Button)],m.prototype,"btnShowFilter",void 0),a([u(cc.Label)],m.prototype,"txtNowShow",void 0),a([u(cc.Node)],m.prototype,"filterExpendLayer",void 0),a([u(cc.Node)],m.prototype,"filterCell",void 0),m=a([d,p("Lobby/GameRecordLayer")],m),i.default=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Common/PopupBase":"PopupBase","../Common/PrefabPool":"PrefabPool","./FilterCell":"FilterCell","./RecordPage":"RecordPage"}],GameScene:[function(e,t,i){"use strict";cc._RF.push(t,"a7d62FcWh5K2YaaMxNMEQCG","GameScene");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("./Common/PopupManager"),h=e("../Business/Logic/GameController"),d=e("./Common/PrefabPool"),u=e("./PlayerNode"),p=e("./GameAction"),m=e("../Business/Data/SaveDataManager"),g=e("./Common/ConfirmDialog"),f=e("./RaiseLayer"),{ccclass:C,property:y,menu:S}=cc._decorator;let b=class extends cc.Component{constructor(){super(...arguments),this.nowLanguage=n.LangList.en,this.txtBalance=null,this.imgBottomTips=null,this.imgMsg=null,this.txtMsg=null,this.txtTableChips=null,this.bgTableChips=null,this.bgCardType=null,this.txtWinnerTableChips=null,this.bgWinnerTableChips=null,this.btnMenu=null,this.btnInfor=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.menuLayer=null,this.btnSwitch=null,this.btnExit=null,this.btnHowToPlay=null,this.playerPosNode=null,this.dealCardNode=null,this.raiseLayer=null,this.playerList=[],this.leftTimeTag=11,this.firstInGame=!0,this.tableChipsPos=null,this.bgSideBetChipList=[],this.musicOn=!1,this.soundOn=!1}get language(){return this.nowLanguage}set language(e){this.nowLanguage=e,s.LocalLang.setLanguage(n.LangList[e])}onLoad(){s.noticeCenter.registAllNotice(this),this.gameData=o.default.gameData,this.gameAction=this.node.getComponent(p.default),s.Utils.resize(),this.resizeUI(),this.initUI(),this.clearGame(),cc.view.setResizeCallback(()=>{s.Utils.resize(),this.resizeUI()}),s.AudioEngine.playMusic(n.SoundList.Bgm,!0),s.AudioEngine.setMusicVolume(.4),cc.tween(this.node).call(()=>{s.commandCenter.emit(new h.CmdIntoGame(o.default.homeData.getGameId()))}).delay(.5).call(()=>{s.commandCenter.emit(new h.CmdTestStart)}).start()}initUI(){cc.macro.ENABLE_MULTI_TOUCH=!1,c.UIUtils.ButtonEvent(this.btnMenu,this.onTouchMenu.bind(this)),c.UIUtils.ButtonEvent(this.btnInfor,this.onTouchInfor.bind(this)),c.UIUtils.ButtonEvent(this.btnSwitch,this.onTouchSwitch.bind(this)),c.UIUtils.ButtonEvent(this.btnExit,this.onTouchExit.bind(this)),c.UIUtils.ButtonEvent(this.btnHowToPlay,this.onTouchHowToPlay.bind(this)),c.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),c.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.menuLayer.active=!1,this.musicOn=m.default.getMusicEnable(),this.soundOn=m.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,this.playerPosNode.children.forEach((e,t)=>{let i=d.default.get(n.PrefabList.PlayerNode);i.setPosition(0,0),i.setParent(e);let a=i.getComponent(u.default);this.playerList.push(a),a.setTablePos(this.bgTableChips,this.dealCardNode,t);let s=cc.instantiate(this.bgTableChips);s.parent=this.bgTableChips.parent,s.active=!1,this.bgSideBetChipList.push(s)}),this.tableChipsPos=this.bgTableChips.position}resizeUI(){this.gameAction.resizeUI()}clearGame(){this.bgTableChips.active=!1,this.bgCardType.active=!1,this.bgTableChips.position=this.tableChipsPos,this.hideMsg(),this.shwoWinnerCardType(!1)}onTouchMenu(){s.commandCenter.emit(new h.CmdQuitGame)}onTouchInfor(){l.default.show(n.PrefabList.InforLayer),this.menuLayer.active=!1}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,m.default.setMusicEnable(this.musicOn),s.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,m.default.setEffectEnable(this.soundOn),s.AudioEngine.setEffectsEnabled(this.soundOn),s.AudioEngine.playEffect(n.SoundList.Click)}onTouchSwitch(){s.commandCenter.emit(new h.CmdSwitchTable),this.menuLayer.active=!1}onTouchExit(){if(this.gameData.isInGame()){let e="\u20b9"+c.UIUtils.getShortNumber(o.default.gameData.getDropChips());g.default.show(s.LocalLang.get("game_quit_tips",[e]),e=>{e&&s.commandCenter.emit(new h.CmdQuitGame)})}else s.commandCenter.emit(new h.CmdQuitGame);this.menuLayer.active=!1}onTouchHowToPlay(){l.default.show(n.PrefabList.HelpLayer),this.menuLayer.active=!1}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(this.gameData.getSelfPlayer().getChips(),!0)}updatePlayers(){let e=this.gameData.getPlayerList();for(let t=0;t<e.length;++t){let i=e[t],a=this.gameData.getPosBySeat(t),s=this.playerList[a];s&&(i.getSeat()>=0?s.sitDown(i):s.standUp())}}updateTableChips(){let e=this.gameData.getTableChips();if(e>0){this.bgTableChips.active=!0,this.txtTableChips.string=c.UIUtils.getShortNumber(e);let t=this.bgTableChips.getComponentInChildren(cc.Sprite);c.UIUtils.setChipType(t,e)}else this.bgTableChips.active=!1}showMsg(e,t=2){this.imgMsg.node.opacity=255,this.txtMsg.string=e,this.imgMsg.node.stopAllActions(),cc.tween(this.imgMsg.node).delay(t).to(0,{opacity:0}).start()}hideMsg(){this.node.stopActionByTag(this.leftTimeTag),this.imgMsg.node.stopAllActions(),this.imgMsg.node.opacity=0}showBottomTips(e,t=2){this.imgBottomTips.node.opacity=255,this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.spriteFrame=0==e?cc.resources.get(n.SpriteList.TipsDiscard,cc.SpriteFrame):cc.resources.get(n.SpriteList.TipsPick,cc.SpriteFrame),cc.tween(this.imgBottomTips.node).delay(t).to(0,{opacity:0}).start()}hideBottomTips(){this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.node.opacity=0}showStartingMsg(e){let t=Math.floor(e)-1;if(t<=0)return void this.showMsg(s.LocalLang.get("game_starting_game"));let i=cc.tween(this.node);i.tag(this.leftTimeTag);for(let a=t;0<a;a--)i.call(()=>{this.showMsg(s.LocalLang.get("game_starting_in_sec",[a]))}),i.delay(1);i.call(()=>{this.showMsg(s.LocalLang.get("game_starting_game"))}),cc.Tween.stopAllByTag(this.leftTimeTag),i.start()}updateCardType(){let e=[];o.default.gameData.getTableCards().forEach(t=>{e.push(t)});let t=o.default.gameData.getHandCardData().getHandCardList(),i=o.default.gameData.getHandCardData().getCardsType(e,t);if(!(e.length<3)){if(!this.gameData.getSelfPlayer().isFold()){let e=i.card.slice(0);this.gameAction.highlightCards(e)}this.bgCardType.active=!0,c.UIUtils.setCardType(this.bgCardType,i.type)}}shwoWinnerCardType(e){if(e){let e=this.gameData.getTableCards(),t=this.gameData.getPlayerBySeat(this.gameData.getWinSeat()).getHandCards(),i=o.default.gameData.getHandCardData().getCardsType(e,t);if(c.UIUtils.setCardType(this.bgWinnerTableChips,i.type),this.gameData.getWinSeats().length>1){let e=new r.NtcShowMultiWinner;e.seat=this.gameData.getWinSeats(),e.cards=i.card,s.noticeCenter.emit(e)}else{let e=new r.NtcShowWinner;e.seat=this.gameData.getWinSeat(),e.cards=i.card,s.noticeCenter.emit(e)}}this.bgWinnerTableChips.active=e}sendTableChips(e){let t=this.gameData.getPosBySeat(this.gameData.getWinSeat()),i=c.UIUtils.posTransform(this.bgTableChips,this.playerList[t].node);cc.tween(this.bgTableChips).to(1,{position:i},{easing:"smooth"}).call(()=>{this.bgTableChips.active=!1,this.playerList[t].getChip(this.gameData.getTableChips()),e()}).start()}sendSidePotChip(e,t){let i=this.gameData.getWinSeats(),a=this.bgTableChips.position;this.txtTableChips.string=c.UIUtils.getShortNumber(e[0]);let o=cc.tween(this.node);i.forEach((i,n)=>{o.call(()=>{let o=e[n],l=this.bgSideBetChipList[n];l.position=a,l.active=!0,l.getComponentInChildren(cc.Label).string=c.UIUtils.getShortNumber(o);let h=this.gameData.getTableChips()-o;this.gameData.setTableChips(h),this.updateTableChips(),c.UIUtils.setChipType(l.getComponentInChildren(cc.Sprite),o);let d=this.gameData.getPosBySeat(i),u=c.UIUtils.posTransform(l,this.playerList[d].node);cc.tween(l).to(1,{position:u},{easing:"smooth"}).call(()=>{l.active=!1,this.playerList[d].getChip(o),s.noticeCenter.emit(new r.NtcUpdateBalance(i)),i==this.gameData.getSelfSeat()&&t()}).start()}),o.delay(1)}),o.start()}onNtcGameInfo(){this.updatePlayers(),this.updateBalance();let e=this.gameData.getGameStage();if(e!=n.GameStage.Prepare&&e!=n.GameStage.Waiting){let e=this.gameData.getActiveSeat(),t=this.gameData.getPosBySeat(e),i=this.playerList[t];i&&i.startProgress(),this.updateTableChips()}e!=n.GameStage.Finish&&e!=n.GameStage.Prepare||this.showStartingMsg(this.gameData.getStageLeftTime()),e==n.GameStage.Waiting&&this.showMsg(s.LocalLang.get("game_waiting_players"),999),this.firstInGame&&e==n.GameStage.Prepare&&(this.firstInGame=!1)}onNtcResetGame(){for(var e=0;e<this.playerList.length;++e)this.playerList[e].standUp();this.clearGame()}onNtcSitDown(e){let t=this.gameData.getPosBySeat(e.seat),i=this.playerList[t];i&&i.sitDown(this.gameData.getPlayerBySeat(e.seat))}onNtcStandUp(e){let t=this.gameData.getPosBySeat(e.seat),i=this.playerList[t];i&&i.standUp()}onNtcPrepare(){this.showStartingMsg(this.gameData.getStageLeftTime())}onNtcDealCards(e){this.clearGame(),this.node.stopActionByTag(this.leftTimeTag),this.showMsg(s.LocalLang.get("game_dealing_cards"));let t=cc.tween(this.node),i=this.gameData.getPlayerCount(),a=e.smallBlindSeat;for(let s=0;s<i;s++){a>=i&&(a=0);let e=this.gameData.getPosBySeat(a);a!=this.gameData.getSelfSeat()?this.playerList[e].getPlayerData().isPlaying()&&t.call(()=>{this.playerList[e].dealCards()}):t.call(()=>{this.gameAction.dealCards()}),t.delay(.2),a+=1}t.delay(.1).call(()=>{s.commandCenter.emit(new h.CmdTestAction(this.gameData.getActiveSeat()))}).start(),s.AudioEngine.playEffect(n.SoundList.Dealcard2)}onNtcUpdateBalance(){this.updateBalance()}onNtcTableShow1st(e){cc.tween(this.node).delay(.5).call(()=>{this.updateTableChips(),this.gameAction.dealTableCard1st(this.updateCardType.bind(this))}).delay(1).call(()=>{this.gameData.setActiveSeat(this.gameData.getSmallBlindSeat());let e=new h.CmdTestJudge;s.commandCenter.emit(e)}).start()}onNtcTableShow2nd(e){cc.tween(this.node).delay(.5).call(()=>{this.updateTableChips(),this.gameAction.dealTableCard2nd(e.index,this.updateCardType.bind(this))}).delay(1).call(()=>{this.gameData.setActiveSeat(this.gameData.getSmallBlindSeat());let e=new h.CmdTestJudge;s.commandCenter.emit(e)}).start()}onNtcRiverRoundEnd(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.call(()=>{this.playerList.forEach(e=>{let t=e.getPlayerData();t.isPlaying()&&!t.isFold()&&t.getSeat()!=this.gameData.getSelfSeat()&&e.showCard()})}).delay(2).call(()=>{this.shwoWinnerCardType(!0)}).delay(1).call(()=>{this.sendTableChips(()=>{s.noticeCenter.emit(new r.NtcUpdateBalance),this.updateBalance()})}).delay(1).call(()=>{s.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{s.commandCenter.emit(new h.CmdTestDealCard)}).start()}onNtcRiverRoundEndMulti(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.call(()=>{this.playerList.forEach(e=>{let t=e.getPlayerData();t.isPlaying()&&!t.isFold()&&t.getSeat()!=this.gameData.getSelfSeat()&&e.showCard()})}).delay(2).call(()=>{this.shwoWinnerCardType(!0)}).delay(1).call(()=>{this.sendSidePotChip(e.chips,()=>{this.updateBalance()})}).delay(1*this.gameData.getWinSeats().length).call(()=>{s.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{s.commandCenter.emit(new h.CmdTestDealCard)}).start()}onNtcWaitAction(e){e.seat,this.gameData.getSelfSeat()}onNtcFold(e){}onNtcGameEnd(e){this.updateTableChips();let t=cc.tween(this.node);this.gameData.getNowMaxBet()>0&&t.delay(1),t.delay(0).call(()=>{let e=new r.NtcShowWinnerAllFold;e.seat=this.gameData.getWinSeat(),s.noticeCenter.emit(e),this.sendTableChips(()=>{s.noticeCenter.emit(new r.NtcUpdateBalance),this.updateBalance()})}).delay(1).call(()=>{s.commandCenter.emit(new h.CmdTestKickNoMoney)}).delay(2).call(()=>{s.commandCenter.emit(new h.CmdTestDealCard)}).start()}};a([y({visible:!1})],b.prototype,"nowLanguage",void 0),a([y({type:cc.Enum(n.LangList),displayName:"\u8bed\u8a00"})],b.prototype,"language",null),a([y(cc.Label)],b.prototype,"txtBalance",void 0),a([y({type:cc.Sprite,displayName:""})],b.prototype,"imgBottomTips",void 0),a([y({type:cc.Sprite,displayName:""})],b.prototype,"imgMsg",void 0),a([y({type:cc.Label,displayName:""})],b.prototype,"txtMsg",void 0),a([y({type:cc.Label,displayName:""})],b.prototype,"txtTableChips",void 0),a([y({type:cc.Node,displayName:""})],b.prototype,"bgTableChips",void 0),a([y({type:cc.Node,displayName:""})],b.prototype,"bgCardType",void 0),a([y({type:cc.Label,displayName:""})],b.prototype,"txtWinnerTableChips",void 0),a([y({type:cc.Node,displayName:""})],b.prototype,"bgWinnerTableChips",void 0),a([y(cc.Button)],b.prototype,"btnMenu",void 0),a([y(cc.Button)],b.prototype,"btnInfor",void 0),a([y(cc.Sprite)],b.prototype,"imgMusic",void 0),a([y(cc.Sprite)],b.prototype,"imgSound",void 0),a([y(cc.SpriteFrame)],b.prototype,"imgMusicOn",void 0),a([y(cc.SpriteFrame)],b.prototype,"imgMusicOff",void 0),a([y(cc.SpriteFrame)],b.prototype,"imgSoundOn",void 0),a([y(cc.SpriteFrame)],b.prototype,"imgSoundOff",void 0),a([y(cc.Node)],b.prototype,"menuLayer",void 0),a([y(cc.Button)],b.prototype,"btnSwitch",void 0),a([y(cc.Button)],b.prototype,"btnExit",void 0),a([y(cc.Button)],b.prototype,"btnHowToPlay",void 0),a([y(cc.Node)],b.prototype,"playerPosNode",void 0),a([y({type:cc.Node,displayName:""})],b.prototype,"dealCardNode",void 0),a([y(f.default)],b.prototype,"raiseLayer",void 0),a([s.onNotice(r.NtcGameInfo)],b.prototype,"onNtcGameInfo",null),a([s.onNotice(r.NtcResetGame)],b.prototype,"onNtcResetGame",null),a([s.onNotice(r.NtcSitDown)],b.prototype,"onNtcSitDown",null),a([s.onNotice(r.NtcStandUp)],b.prototype,"onNtcStandUp",null),a([s.onNotice(r.NtcPrepare)],b.prototype,"onNtcPrepare",null),a([s.onNotice(r.NtcDealCards)],b.prototype,"onNtcDealCards",null),a([s.onNotice(r.NtcUpdateBalance)],b.prototype,"onNtcUpdateBalance",null),a([s.onNotice(r.NtcTableShow1st)],b.prototype,"onNtcTableShow1st",null),a([s.onNotice(r.NtcTableShow2nd)],b.prototype,"onNtcTableShow2nd",null),a([s.onNotice(r.NtcRiverRoundEnd)],b.prototype,"onNtcRiverRoundEnd",null),a([s.onNotice(r.NtcRiverRoundEndMulti)],b.prototype,"onNtcRiverRoundEndMulti",null),a([s.onNotice(r.NtcWaitAction)],b.prototype,"onNtcWaitAction",null),a([s.onNotice(r.NtcFold)],b.prototype,"onNtcFold",null),a([s.onNotice(r.NtcGameEnd)],b.prototype,"onNtcGameEnd",null),b=a([C],b),i.default=b,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/ConfirmDialog":"ConfirmDialog","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./GameAction":"GameAction","./PlayerNode":"PlayerNode","./RaiseLayer":"RaiseLayer"}],GameSocket:[function(e,t,i){"use strict";cc._RF.push(t,"6fc34cSKCtFQIY3btRfWLAm","GameSocket"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");i.default=class extends a.Socket{constructor(){super()}connect(e){if(this.disconnect(),cc.sys.isNative){let t=cc.url.raw("resources/raw/android.cer");cc.log("Websocket : penUrl = ",t),cc.loader.md5Pipe?(t=cc.loader.md5Pipe.transformURL(t),cc.log("Websocket : md5Pipe = ",t),this.m_socket=new WebSocket(e,null,t)):(cc.log("Websocket : cc.loader.md5Pipe:",cc.loader.md5Pipe),this.m_socket=new WebSocket(e,null,t))}else this.m_socket=new WebSocket(e);this.m_socket.binaryType="arraybuffer",this.m_socket.onopen=this.onConnect.bind(this),this.m_socket.onmessage=this.onSocketDataReceived.bind(this),this.m_socket.onerror=this.onError.bind(this),this.m_socket.onclose=this.onClose.bind(this)}disconnect(){super.disconnect(),null!==this.m_socket&&(this.m_socket.onopen=null,this.m_socket.onmessage=null,this.m_socket.onerror=null,this.m_socket.onclose=null,this.m_socket.close(),this.m_socket=null)}send(e,t){this.isConnected()&&this.m_socket.send(this.encodeMsgID(e,t))}encodeMsgID(e,t){}decodeMsgID(e){}onSocketDataReceived(e){var t=e.data,i=this.decodeMsgID(t);this.onMessage(i)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GradientColor:[function(e,t,i){"use strict";cc._RF.push(t,"926bagTp+JG/5Bxdn0uOLz4","GradientColor");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:o,requireComponent:n,disallowMultiple:r,executeInEditMode:c,help:l,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this._colors=[cc.Color.RED,cc.Color.BLUE,cc.Color.RED,cc.Color.BLUE]}get colors(){return this._colors}set colors(e){e.length>4&&(e.length=4),this._colors=e,this.markForRender()}onEnable(){this.replaceFunction()}onDisable(){this.restoreFunction()}resetInEditor(){this.markForRender()}replaceFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=()=>{const e=t._renderData.uintVDatas[0];if(!e)return;const i=t.floatsPerVert,a=t.colorOffset,s=this.node.color;let o=0;for(let t=a,n=e.length;t<n;t+=i)e[t]=(this.colors[o++]||s)._val},this.markForRender())}restoreFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=cc.Assembler2D.prototype.updateColor,this.markForRender())}markForRender(){this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR}};a([o()],d.prototype,"_colors",void 0),a([o({type:[cc.Color],tooltip:!1})],d.prototype,"colors",null),d=a([s,n(cc.RenderComponent),r,c,l("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/renderers/GradientColor.ts"),h("\u7ec4\u4ef6\u5e93/GradientColor")],d),i.default=d,cc._RF.pop()},{}],HandCardsData:[function(e,t,i){"use strict";cc._RF.push(t,"8bbb8wyyidJpaBr4siF6KSX","HandCardsData"),Object.defineProperty(i,"__esModule",{value:!0}),i.HandCardsData=i.CardTypeData=void 0;const a=e("./CommonDefine"),s=e("./PokerData");function o(e,t){return(e-1+13)%13-(t-1+13)%13}function n(e,t){return s.PokerData.getPokerPoint(e)-s.PokerData.getPokerPoint(t)}class r{constructor(){this.card=[],this.type=a.CardType.Highcard,this.compare=[]}}i.CardTypeData=r,i.HandCardsData=class{constructor(){}resetGameData(){this.handCardList=[]}getHandCardList(){return this.handCardList}dealCards(e){e.length>a.MAX_HAND_CARDS&&(e=e.slice(0,a.MAX_HAND_CARDS),cc.log("dealCards card error")),this.handCardList=e}getCardsType(e,t){let i=((e,t)=>[...e,...t])(t,e),c={},l={};i.sort(n);let h=s.PokerData.getPokerPoint(i[0]),d=!0,u=[h];i.forEach((e,t)=>{let a=s.PokerData.getPokerPoint(e);t>0&&(a===h+1?((d||u.length)&&(d=!0,u.push(e)),u[u.length-1]==s.PokerPoint.PointK&&s.PokerData.getPokerPoint(i[0])==s.PokerPoint.PointA&&u.push(i[0])):a===h||(d=!1,u.length<5&&(u=[e])),h=a),c[a]||(c[a]=[]),c[a].push(e),l[s.PokerData.getPokerColor(e)]||(l[s.PokerData.getPokerColor(e)]=[]),l[s.PokerData.getPokerColor(e)].push(e)}),u.length;let p=[],m=[],g=[];for(let a in c)4==c[a].length&&p.push(Number(a)),3==c[a].length&&m.push(Number(a)),2==c[a].length&&g.push(Number(a));p.length,m.length>0&&(m.sort(o),m.reverse()),g.length>0&&(g.sort(o),g.reverse());let f=[];for(let a in l)l[a].length>=5&&(f=l[a]);f.length;let C=[];if(f.length>0){let e=f[0],t=!0;C=[e],f.forEach(i=>{s.PokerData.getPokerPoint(i)===s.PokerData.getPokerPoint(e)+1?(t||C.length)&&(t=!0,C.push(i),C[C.length-1]==s.PokerPoint.PointK&&s.PokerData.getPokerPoint(f[0])==s.PokerPoint.PointA&&C.push(f[0])):s.PokerData.getPokerPoint(i)===s.PokerData.getPokerPoint(e)||(t=!1,C.length<5&&(C=[i])),e=i}),C.length}let y=new r;if(C&&C.length>=5)s.PokerData.getPokerPoint(C[C.length-1])==s.PokerPoint.PointA?y.type=a.CardType.RoyalFlush:y.type=a.CardType.StraightFlush,y.compare=[C[C.length-1]],y.card=C.slice(C.length-5,C.length);else if(p.length>0)y.type=a.CardType.FourKind,s.PokerData.getPokerPoint(i[i.length-1])!=s.PokerData.getPokerPoint(p[0])?y.compare.push(i[i.length-1]):i.length>4&&y.compare.push(i[i.length-5]),y.card=c[p[0]];else if(m.length>1||m.length>0&&g.length>0)y.type=a.CardType.Fullhouse,m.length>1?(y.compare=m,y.card=c[m[0]].concat(c[m[1]]),y.card.pop()):m.length>0&&g.length>0&&(y.compare=[m[0],g[0]],y.card=c[m[0]].concat(c[g[0]]));else if(f.length>0)y.type=a.CardType.Flush,f.sort(o),f.length>5?y.card=f.slice(f.length-5,f.length):y.card=f,y.compare=y.card.slice(),y.compare.reverse();else if(u.length>=5)y.type=a.CardType.Straight,y.compare=[u[u.length-1]],y.card=u.slice(u.length-5,u.length);else if(1==m.length){y.type=a.CardType.ThreeKind,y.compare=[m[0]],y.card=c[m[0]];for(let e=i.length-1;e>=0;e--)y.compare.length<3&&s.PokerData.getPokerPoint(i[e])!=m[0]&&y.compare.push(i[e])}else if(g.length>1){y.type=a.CardType.TwoPairs,y.compare=[g[0],g[1]],y.card=c[g[0]].concat(c[g[1]]);for(let e=i.length-1;e>=0;e--)y.compare.length<3&&s.PokerData.getPokerPoint(i[e])!=g[0]&&s.PokerData.getPokerPoint(i[e])!=g[1]&&y.compare.push(i[e])}else if(1==g.length){y.type=a.CardType.OnePair,y.compare=[g[0]],y.card=c[g[0]];for(let e=i.length-1;e>=0;e--)y.compare.length<4&&s.PokerData.getPokerPoint(i[e])!=g[0]&&y.compare.push(i[e])}else{y.type=a.CardType.Highcard,i.sort(o),y.card=[],y.compare=[];for(let e=i.length-1;e>=0;e--)y.compare.length<5&&y.compare.push(i[e])}return y}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./PokerData":"PokerData"}],HeartBeatHandler:[function(e,t,i){"use strict";cc._RF.push(t,"cbbe6PK4uNJaqhiv8nPLltL","HeartBeatHandler"),Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeatHandler=void 0,i.HeartBeatHandler=class{constructor(){this.m_idle=10,this.m_maxMissCount=2,this.m_idleCallBack=null,this.m_timeOutCallBack=null,this.m_missCallBack=null,this.m_logName="",this.m_curMissCount=0,this.m_lastTickTime=-1,this.m_curIdle=-1,cc.director.getScheduler().enableForTarget(this)}set idle(e){this.m_idle=e}set maxMissCount(e){this.m_maxMissCount=e}set idleCallBack(e){this.m_idleCallBack=e}set timeOutCallBack(e){this.m_timeOutCallBack=e}set missCallBack(e){this.m_missCallBack=e}set logName(e){this.m_logName=e}startIdle(){this.clearState();let e=(new Date).getTime();this.m_lastTickTime=e,cc.director.getScheduler().unscheduleAllForTarget(this),cc.director.getScheduler().schedule(this.onIdleTime,this,1),cc.log(this.m_logName+" start idle.")}stopIdle(){this.m_curMissCount=0,this.m_lastTickTime=-1,cc.director.getScheduler().unscheduleAllForTarget(this),cc.log(this.m_logName+" stop idle.")}onReceiveHeartBeat(){this.clearState()}clearState(){this.m_curMissCount=0,this.m_curIdle=this.m_idle}sendIdle(){this.m_curMissCount++,2==this.m_curMissCount&&(cc.log(this.m_logName+" miss heart beat."),null!=this.m_missCallBack&&this.m_missCallBack()),this.m_maxMissCount>0&&this.m_curMissCount>this.m_maxMissCount?this.onHeartBeatTimeOut():null!=this.m_idleCallBack&&this.m_idleCallBack()}onIdleTime(e){let t=(new Date).getTime();this.m_lastTickTime>0&&(e=(t-this.m_lastTickTime)/1e3),this.m_lastTickTime=t,e>this.m_idle*this.m_maxMissCount?this.onHeartBeatTimeOut():(this.m_curIdle-=e,this.m_curIdle<=0&&(this.m_curIdle=this.m_idle,this.sendIdle()))}onHeartBeatTimeOut(){cc.log(this.m_logName+" heart beat time out."),this.stopIdle(),null!=this.m_timeOutCallBack&&this.m_timeOutCallBack()}},cc._RF.pop()},{}],HelpLayer:[function(e,t,i){"use strict";cc._RF.push(t,"e4adfdVRVBBArTusuUkFp/l","HelpLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("./Common/PopupBase"),n=e("../Business/Data/CommonDefine"),{ccclass:r,property:c,menu:l}=cc._decorator;let h=class extends o.default{constructor(){super(...arguments),this.shortcutLayer=null,this.scrollView=null,this.animationDuration=.3}static get path(){return"Scenes/Game/HelpLayer"}onLoad(){this.shortcutLayer.children.forEach(e=>{e.on(cc.Node.EventType.TOUCH_END,this.onTouchShortcut,this)})}updateDisplay(){this.scrollView.scrollToTop(.1)}onTouchShortcut(e){let t=e.target.name,i=this.scrollView.content.children.find(e=>e.name==t);if(!i)return;s.AudioEngine.playEffect(n.SoundList.Click);let a=0;a=i.getSiblingIndex()>7?40:30;let o=(-i.y+a*i.getSiblingIndex())/this.scrollView.content.height;this.scrollView.stopAutoScroll(),this.scrollView.scrollToPercentVertical(1-o,.1,!0)}onTouchOkey(){this.hide()}onTouchClose(){this.hide()}};a([c(cc.Node)],h.prototype,"shortcutLayer",void 0),a([c(cc.ScrollView)],h.prototype,"scrollView",void 0),h=a([r,l("Game/HelpLayer")],h),i.default=h,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],HomeData:[function(e,t,i){"use strict";cc._RF.push(t,"43833cz8yRD7r9Zq0qV9kBo","HomeData"),Object.defineProperty(i,"__esModule",{value:!0}),i.HomeData=i.MaintainData=void 0;const a=e("./BroadcastData");i.MaintainData=class{constructor(){this.m_start=0,this.m_end=0,this.m_content=new Map,this.m_hasData=!1}isNearTime(){return this.m_hasData}isMaintainTime(){var e=(new Date).getTime();return e>this.m_start&&e<this.m_end}},i.HomeData=class{constructor(){this.m_chipsUnit=1,this.m_pointValueList=[],this.m_gameId="",this.m_ws="",this.m_chipLst=[],this.m_broadcastData=new a.default}getChipsUnit(){return this.m_chipsUnit}setChipsUnit(e){this.m_chipsUnit=e}getPointValueList(){return this.m_pointValueList}setPointValueList(e){this.m_pointValueList=e}getGameId(){return this.m_gameId}setGameId(e){this.m_gameId=e}getWs(){return this.m_ws}setWs(e){this.m_ws=e}getBroadcastData(){return this.m_broadcastData}getChipLst(){return this.m_chipLst}setChipLst(e){this.m_chipLst=e}},cc._RF.pop()},{"./BroadcastData":"BroadcastData"}],HttpUtils:[function(e,t,i){"use strict";cc._RF.push(t,"6dcb9C9N2ZAg5+91n23jf2N","HttpUtils"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");i.default=class{static generateSign(e){var t=[];for(var i in e)t.push(i);t.sort();for(var s="",o=0;o<t.length;++o){let i=t[o];s+=i+e[i]}return s+="ddgame",a.CryptoUtils.md5(s)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],InforLayer:[function(e,t,i){"use strict";cc._RF.push(t,"57a2aHqg8VNequMt7ge6nb7","InforLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("./Common/PopupBase"),r=e("./Common/UIUtils"),{ccclass:c,property:l,menu:h}=cc._decorator;let d=class extends n.default{constructor(){super(...arguments),this.txtTips=null,this.txtPointValue=null,this.txtMaxWin=null,this.txtDecks=null,this.btnOkey=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}onLoad(){r.UIUtils.ButtonEvent(this.btnOkey,this.onTouchClose.bind(this))}updateDisplay(e=!1){let t="\u20b9"+r.UIUtils.getShortNumber(o.default.gameData.getDropChips());this.txtTips.string=s.LocalLang.get("game_infor_tips",[t]),this.txtDecks.string="2",e&&this.setAutoClose()}setAutoClose(){cc.tween(this.node).delay(3).call(this.onTouchClose.bind(this)).start()}onTouchClose(){this.hide()}};a([l(cc.Label)],d.prototype,"txtTips",void 0),a([l(cc.Label)],d.prototype,"txtPointValue",void 0),a([l(cc.Label)],d.prototype,"txtMaxWin",void 0),a([l(cc.Label)],d.prototype,"txtDecks",void 0),a([l(cc.Button)],d.prototype,"btnOkey",void 0),d=a([c,h("Game/InforLayer")],d),i.default=d,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],LanguageLayer:[function(e,t,i){"use strict";cc._RF.push(t,"de8164TwFRB+LdFXf1H7BpI","LanguageLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("./Common/PopupBase"),{ccclass:n,property:r,menu:c}=cc._decorator;let l=class extends o.default{constructor(){super(...arguments),this.langBtnArr=[],this.animationDuration=0,this.langIdx=0}static get path(){return"Scenes/Game/language_layer"}onLoad(){this.main||(this.main=this.node),s.noticeCenter.registAllNotice(this),this.langArr=["en","hi"];let e=s.LocalLang.getLanguage(),t=this.langArr.indexOf(e);t>=0&&(this.langBtnArr[t].check(),this.langIdx=t)}onTouchClose(){this.hide()}onTouchLang(e,t){this.langIdx=Number(t)}onTouchConfirm(){s.LocalLang.setLanguage(this.langArr[this.langIdx]),this.hide()}};a([r([cc.Toggle])],l.prototype,"langBtnArr",void 0),l=a([n],l),i.default=l,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],LoadingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ce28cPR/G1B07ofLePg+SKH","LoadingConfig"),Object.defineProperty(i,"__esModule",{value:!0}),i.SpriteFrameResLst=i.LoadingResLst=void 0;const a=e("../Business/Data/CommonDefine");i.LoadingResLst=new Map,i.SpriteFrameResLst=new Map,i.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Click,cc.AudioClip),i.LoadingResLst.set("Sound/win",cc.AudioClip),i.LoadingResLst.set("Sound/big_winner",cc.AudioClip),i.LoadingResLst.set("Sound/chip",cc.AudioClip),i.LoadingResLst.set(a.SoundList.BtnWrong,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Dealcard2,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Button01,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Button02,cc.AudioClip),i.LoadingResLst.set(a.SoundList.CardFlip1,cc.AudioClip),i.LoadingResLst.set(a.SoundList.CardFlip2,cc.AudioClip),i.LoadingResLst.set(a.SoundList.Alarm,cc.AudioClip),i.LoadingResLst.set(a.PrefabList.PlayerNode,cc.Prefab),i.LoadingResLst.set(a.PrefabList.PokerNode,cc.Prefab),i.LoadingResLst.set(a.PrefabList.GameEntyuCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.RecordCell,cc.Prefab),i.LoadingResLst.set(a.PrefabList.RecordPage,cc.Prefab),i.LoadingResLst.set("Scenes/Common/MessageView",cc.Prefab),i.LoadingResLst.set("Scenes/Common/ConfirmDialog",cc.Prefab),i.SpriteFrameResLst.set(a.SpriteList.TipsPick,cc.SpriteFrame),i.SpriteFrameResLst.set(a.SpriteList.TipsDiscard,cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/img_group_green",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/img_group_blue",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/img_group_red",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry0",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Lobby/img_entry4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_5",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_6",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_7",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_8",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_9",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_10",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_j",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_q",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_k",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/clubs_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_5",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_6",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_7",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_8",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_9",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_10",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_j",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_q",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_k",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/hearts_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/joker_big",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/joker_small",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/poker_bg",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/poker_back",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/spades_down",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_clubs",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_hearts",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_spades",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/j_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/q_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Poker/k_diamonds",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal0",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal1",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal2",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal3",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal4",cc.SpriteFrame),i.SpriteFrameResLst.set("Texture/Game/Chip/chip_normal5",cc.SpriteFrame),cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine"}],LoadingScene:[function(e,t,i){"use strict";cc._RF.push(t,"b3227XK/V5PI5kdwcCTTjvS","LoadingScene");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("../Business/Data/ConfigManager"),r=e("../Business/Data/CommonDefine"),c=e("../Business/Logic/SceneController"),l=e("./LoadingConfig"),h=e("../Business/Logic/GameController"),d=e("../Business/Data/SaveDataManager"),u=e("../Business/NetWork/NetworkController"),p=e("../Business/NetWork/NetworkNotice"),{ccclass:m,property:g,menu:f}=cc._decorator;let C=class extends cc.Component{constructor(){super(...arguments),this.urlConfig=null,this.appInfo=null,this.progressBar=null,this.txtLoading=null,this.loadResOK=!1,this.loadSpriteFrameOK=!1,this.loginOK=!0}onLoad(){s.noticeCenter.registAllNotice(this),this.initApp(),cc.director.preloadScene("Game",this.onSceneProgress.bind(this),()=>{}),this.txtLoading.string="0 %",this.progressBar.progress=0}initApp(){o.default.init(),d.default.init(),s.commandCenter.addController(new c.SceneController),s.commandCenter.addController(new h.GameController),s.commandCenter.addController(new u.NetworkController),s.AudioEngine.setEffectsEnabled(d.default.getEffectEnable()),s.AudioEngine.setMusicEnabled(d.default.getMusicEnable()),s.AudioEngine.setEffectsVolume(.5),s.AudioEngine.setMusicVolume(.5),s.LocalLang.setLanguage("en"),this.initTestData(),n.default.setUrlConfig(this.urlConfig.json),n.default.setAppInfo(this.appInfo.json),this.loadRes()}initTestData(){o.default.userData.setUid(5566),o.default.userData.setNickName("User 1234567890"),o.default.userData.setBalance(5e4),o.default.homeData.setPointValueList([5,10,20,40,100]),o.default.homeData.setChipsUnit(1),o.default.homeData.setGameId("0"),o.default.homeData.setChipLst([5,10,50,100,500,1e3]),o.default.userData.setGameRecordLst([{balance:767,time:1660210006147,pv:4,isWin:!1},{balance:1801,time:1659537223957,pv:3,isWin:!0},{balance:324,time:1659477042944,pv:1,isWin:!1},{balance:1775,time:1660554944361,pv:0,isWin:!0},{balance:815,time:1659688686469,pv:0,isWin:!1},{balance:984,time:1660066596467,pv:4,isWin:!0},{balance:101,time:1660351832652,pv:0,isWin:!1},{balance:807,time:1660266918017,pv:2,isWin:!0},{balance:520,time:1659536063783,pv:3,isWin:!0},{balance:1768,time:1660205692424,pv:1,isWin:!1},{balance:1657,time:1660415139657,pv:1,isWin:!0},{balance:1483,time:1660531764400,pv:0,isWin:!0},{balance:1927,time:1659347722903,pv:3,isWin:!0},{balance:1330,time:1660071385718,pv:1,isWin:!1},{balance:916,time:1660427852131,pv:1,isWin:!0},{balance:1935,time:1660203458317,pv:4,isWin:!0},{balance:1704,time:1659479313312,pv:1,isWin:!1},{balance:675,time:1659433504892,pv:3,isWin:!0},{balance:146,time:1660060789960,pv:2,isWin:!0},{balance:1105,time:1660429411071,pv:0,isWin:!1},{balance:455,time:1660072578178,pv:3,isWin:!0},{balance:469,time:1660283031166,pv:0,isWin:!0},{balance:597,time:1659407293598,pv:1,isWin:!0},{balance:960,time:1660281561832,pv:1,isWin:!1},{balance:1228,time:1660405372961,pv:0,isWin:!1},{balance:1615,time:1660093538168,pv:2,isWin:!1},{balance:971,time:1660222691920,pv:3,isWin:!1},{balance:353,time:1660103088442,pv:3,isWin:!0},{balance:204,time:1659856606624,pv:2,isWin:!1},{balance:1893,time:1660065351504,pv:2,isWin:!1},{balance:888,time:1659805156089,pv:2,isWin:!0},{balance:223,time:1659669666060,pv:0,isWin:!0},{balance:1049,time:1660484766966,pv:1,isWin:!0},{balance:170,time:1660254553870,pv:2,isWin:!1},{balance:1419,time:1659618906950,pv:1,isWin:!0},{balance:1532,time:1659567352788,pv:3,isWin:!1},{balance:220,time:1660565727907,pv:1,isWin:!0},{balance:937,time:1659364886782,pv:2,isWin:!0},{balance:927,time:1659763699500,pv:3,isWin:!1},{balance:1675,time:1660322288903,pv:2,isWin:!0},{balance:746,time:1659791005751,pv:0,isWin:!1},{balance:1688,time:1660016766384,pv:3,isWin:!0},{balance:539,time:1659592131477,pv:4,isWin:!0},{balance:1316,time:1660370688376,pv:0,isWin:!1},{balance:174,time:1659392759810,pv:3,isWin:!1},{balance:1556,time:1660280505561,pv:1,isWin:!1},{balance:740,time:1659914727240,pv:4,isWin:!1},{balance:1488,time:1659601067817,pv:0,isWin:!1},{balance:1568,time:1660300598747,pv:0,isWin:!0},{balance:944,time:1660078074904,pv:0,isWin:!0},{balance:729,time:1659539671704,pv:1,isWin:!0},{balance:1462,time:1660535647840,pv:3,isWin:!0},{balance:1928,time:1660376298332,pv:1,isWin:!1},{balance:835,time:1660498321689,pv:2,isWin:!0},{balance:1473,time:1659626088745,pv:0,isWin:!0},{balance:941,time:1660275922569,pv:0,isWin:!0},{balance:914,time:1659706692501,pv:4,isWin:!0},{balance:1421,time:1659684137158,pv:3,isWin:!1}])}loadRes(){cc.resources.load(Array.from(l.LoadingResLst.keys()),null,this.onLoadProgress.bind(this),this.onLoadResComplete.bind(this)),cc.resources.load(Array.from(l.SpriteFrameResLst.keys()),cc.SpriteFrame,this.onLoadProgress.bind(this),this.onLoadSpriteFrameComplete.bind(this))}onLoadProgress(){}onLoadResComplete(){this.loadResOK=!0,this.gotoNextScene()}onLoadSpriteFrameComplete(){this.loadSpriteFrameOK=!0,this.gotoNextScene()}onSceneProgress(e,t,i){try{this.progressBar.progress=e/t,this.txtLoading.string=Math.floor(e/t*100)+" %"}catch(a){}}gotoNextScene(){this.loadResOK&&this.loadSpriteFrameOK&&this.loginOK&&s.commandCenter.emit(new c.CmdScene(r.SceneType.Lobby))}onNtcLogin(e){0==e.result&&(this.loginOK=!0,this.gotoNextScene())}};a([g(cc.JsonAsset)],C.prototype,"urlConfig",void 0),a([g(cc.JsonAsset)],C.prototype,"appInfo",void 0),a([g(cc.ProgressBar)],C.prototype,"progressBar",void 0),a([g(cc.Label)],C.prototype,"txtLoading",void 0),a([s.onNotice(p.NtcLogin)],C.prototype,"onNtcLogin",null),C=a([m],C),i.default=C,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/ConfigManager":"ConfigManager","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/SceneController":"SceneController","../Business/NetWork/NetworkController":"NetworkController","../Business/NetWork/NetworkNotice":"NetworkNotice","../MobileKit/MKIndex":"MKIndex","./LoadingConfig":"LoadingConfig"}],LobbyScene:[function(e,t,i){"use strict";cc._RF.push(t,"89bb4LCQZZMergYFs0a2QwS","LobbyScene");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),r=e("../Common/PopupManager"),c=e("../../Business/Data/SaveDataManager"),l=e("../Common/UIUtils"),h=e("../Common/PrefabPool"),d=e("./GameEntryCell"),{ccclass:u,property:p,menu:m}=cc._decorator;let g=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.entryScroll=null,this.txtUserName=null,this.txtUid=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.txtBroadcast=null,this.musicOn=!1,this.soundOn=!1}onLoad(){s.noticeCenter.registAllNotice(this),this.initUI(),this.showBroadCast(),s.AudioEngine.playMusic(n.SoundList.Bgm,!0)}initUI(){this.txtBalance.string=l.UIUtils.getShortNumber(o.default.userData.getBalance(),!0),this.txtUserName.string=o.default.userData.getNickName(),this.txtUid.string=o.default.userData.getUid(),l.UIUtils.NodeClickEvent(this.btnRecord,this.onTouchRecord.bind(this)),l.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),l.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.musicOn=c.default.getMusicEnable(),this.soundOn=c.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,o.default.homeData.getPointValueList().forEach((e,t)=>{let i=h.default.get(n.PrefabList.GameEntyuCell);i.setParent(this.entryScroll.content),i.getComponent(d.GameEntryCell).setData(t)}),this.entryScroll.scrollToLeft()}onTouchRecord(){r.default.show(n.PrefabList.GameRecordLayer)}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,c.default.setMusicEnable(this.musicOn),s.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,c.default.setEffectEnable(this.soundOn),s.AudioEngine.setEffectsEnabled(this.soundOn),s.AudioEngine.playEffect(n.SoundList.Click)}showBroadCast(){let e=o.default.homeData.getBroadcastData().getCurNotice(),t=this.txtBroadcast.node.parent.height;this.txtBroadcast.string=e,this.txtBroadcast.node.y=t,cc.tween(this.txtBroadcast.node).to(1,{y:0},{easing:"smooth"}).delay(2).to(1,{y:-t},{easing:"smooth"}).call(this.showBroadCast.bind(this)).start()}};a([p(cc.Label)],g.prototype,"txtBalance",void 0),a([p(cc.ScrollView)],g.prototype,"entryScroll",void 0),a([p(cc.Label)],g.prototype,"txtUserName",void 0),a([p(cc.Label)],g.prototype,"txtUid",void 0),a([p(cc.Node)],g.prototype,"btnRecord",void 0),a([p(cc.Sprite)],g.prototype,"imgMusic",void 0),a([p(cc.Sprite)],g.prototype,"imgSound",void 0),a([p(cc.SpriteFrame)],g.prototype,"imgMusicOn",void 0),a([p(cc.SpriteFrame)],g.prototype,"imgMusicOff",void 0),a([p(cc.SpriteFrame)],g.prototype,"imgSoundOn",void 0),a([p(cc.SpriteFrame)],g.prototype,"imgSoundOff",void 0),a([p(cc.Label)],g.prototype,"txtBroadcast",void 0),g=a([u,m("Lobby/LobbyScene")],g),i.default=g,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Data/SaveDataManager":"SaveDataManager","../../MobileKit/MKIndex":"MKIndex","../Common/PopupManager":"PopupManager","../Common/PrefabPool":"PrefabPool","../Common/UIUtils":"UIUtils","./GameEntryCell":"GameEntryCell"}],MKActionQueue:[function(e,t,i){"use strict";cc._RF.push(t,"7733b8JdpNIHYxZ1k+2nx9N","MKActionQueue"),Object.defineProperty(i,"__esModule",{value:!0}),i.ActionQueue=void 0,i.ActionQueue=class{constructor(){this.m_actionQueue=null,this.m_delay=0,this.m_actionQueue=[],cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}postAction(e,t){this.m_actionQueue.push({func:e,param:t})}setDelayTime(e){e<cc.macro.FLT_EPSILON||this.m_delay<e&&(this.m_delay=e)}clear(){this.clearDelayTime(),this.removeAllAction()}clearDelayTime(){this.m_delay=0}removeAllAction(){this.m_actionQueue.length=0}update(e){if(this.m_delay>0&&(this.m_delay-=e),this.m_actionQueue.length>0&&this.m_delay<cc.macro.FLT_EPSILON){var t=this.m_actionQueue.shift();t.func(t.param)}}onExit(){this.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)}},cc._RF.pop()},{}],MKAudioEngine:[function(e,t,i){"use strict";cc._RF.push(t,"1950dWg/apGgKPh5p5a+7i+","MKAudioEngine"),Object.defineProperty(i,"__esModule",{value:!0}),i.AudioEngine=void 0;let a=!1,s=!1,o=null,n=!1;class r{static playEffect(e,t=!1){if(a){if(e instanceof cc.AudioClip)return cc.audioEngine.playEffect(e,t);{let i=cc.resources.get(e);if(null!=i)return cc.audioEngine.playEffect(i,t)}}return 0}static stopEffect(e){e>0&&cc.audioEngine.stopEffect(e)}static playMusic(e,t=!1){if(e instanceof cc.AudioClip)o=e;else{let t=cc.resources.get(e);null!=t&&(o=t)}n=t,s&&cc.audioEngine.playMusic(o,n)}static stopMusic(){o=null,cc.audioEngine.stopMusic()}static setEffectsVolume(e){cc.audioEngine.setEffectsVolume(e)}static setMusicVolume(e){cc.audioEngine.setMusicVolume(e)}static setAudioVolume(e,t){cc.audioEngine.setVolume(e,t)}static setEffectsEnabled(e){a=e,e||cc.audioEngine.stopAllEffects()}static setMusicEnabled(e){s=e,e?null!=o&&cc.audioEngine.playMusic(o,n):cc.audioEngine.stopMusic()}static setMute(e){r.setEffectsEnabled(!e),r.setMusicEnabled(!e)}static isMute(){return s&&a}static isMusicPlaying(){return cc.audioEngine.isMusicPlaying()}static pauseMusic(){cc.audioEngine.pauseMusic()}}i.AudioEngine=r,cc._RF.pop()},{}],MKCommandCenter:[function(e,t,i){"use strict";cc._RF.push(t,"36eecgRfGBIvrNItfzw/c9j","MKCommandCenter"),Object.defineProperty(i,"__esModule",{value:!0}),i.onCommand=i.commandCenter=i.CommandCenter=i.Controller=i.createCommand=void 0;let a=0;i.createCommand=function(e){e.Type="Command"+a++,e.prototype.getType=function(){return e.Type}},i.Controller=class{constructor(){this.name=""}setName(e){this.name=e}getName(){return this.name}onExit(){}};class s{constructor(){this.m_controllers=new Map,this.m_eventTarget=new cc.EventTarget}addController(e){var t=e.getName();this.m_controllers.get(t)?(cc.log("MKCommandCenter warning, controller already exist"),e.onExit()):this.m_controllers.set(t,e)}removeController(e){var t=this.m_controllers.get(e);t&&(t.onExit(),this.targetOff(t),this.m_controllers.delete(e))}hasController(e){return this.m_controllers.get(e)}on(e,t,i){this.m_eventTarget.on(e.Type,t,i)}off(e,t,i){this.m_eventTarget.off(e.Type,t,i)}registAllCommand(e){if(e.commandList)for(let t of e.commandList)this.on(t.command,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.hasEventListener(e.getType())?this.m_eventTarget.emit(e.getType(),e):cc.log("MKCommandCenter err : no command handler, command type = "+e.getType())}}i.CommandCenter=s,i.commandCenter=new s,i.onCommand=function(e){return function(t,i){t.commandList||(t.commandList=[]),t.commandList.push({command:e,methodName:i})}},cc._RF.pop()},{}],MKCryptoUtils:[function(e,t,i){"use strict";cc._RF.push(t,"1ff71vS4J1NA7ytlCGJPgtt","MKCryptoUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.CryptoUtils=void 0,i.CryptoUtils=class{static md5(e){return CryptoJS.MD5(e).toString()}static base64Encode(e){var t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)}static base64Decode(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)}},cc._RF.pop()},{}],MKHttp:[function(e,t,i){"use strict";cc._RF.push(t,"0073dUDVQRAsofk0kRCNO0I","MKHttp"),Object.defineProperty(i,"__esModule",{value:!0}),i.Http=void 0;class a{static formatParams(e){let t="",i=!1;for(let a in e)i?t+="&":i=!0,t+=a+"="+e[a];return t}static get(e,t,i,s=a.ContentType.Form){let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){let a={};if(""!=o.responseText)try{a=JSON.parse(o.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}i(!0,a)}else cc.log("http get error! code = %s, url = %s",o.status,e),i(!1,null)},o.onerror=function(){cc.log("http get error! url = %s",e),i(!1,null)},o.ontimeout=function(){cc.log("http get timeout! url = %s",e),i(!1,null)},s==a.ContentType.Json?(o.open("GET",e,!0),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(t?JSON.stringify(t):null)):s==a.ContentType.Form?(t&&(e+="?"+a.formatParams(t)),o.open("GET",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send()):s==a.ContentType.Multipart&&(o.open("GET",e,!0),o.setRequestHeader("Content-Type","multipart/form-data"),o.send())}static post(e,t,i,s=a.ContentType.Form){let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){let a={};if(""!=o.responseText)try{a=JSON.parse(o.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}i(!0,a)}else cc.log("http post error! code = %s, url = %s",o.status,e),i(!1,null)},o.onerror=function(){cc.log("http post error! url = %s",e),i(!1,null)},o.ontimeout=function(){cc.log("http post timeout! url = %s",e),i(!1,null)},o.open("POST",e,!0),s==a.ContentType.Json?(o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(t?JSON.stringify(t):null)):(o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(t?a.formatParams(t):null))}static delete(e,t,i,s=a.ContentType.Form){let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){let a={};if(""!=o.responseText)try{a=JSON.parse(o.responseText)}catch(t){cc.log("http delete result parse failed! url = %s",e)}i(!0,a)}else cc.log("http delete error! code = %s, url = %s",o.status,e),i(!1,null)},o.onerror=function(){cc.log("http delete error! url = %s",e),i(!1,null)},o.ontimeout=function(){cc.log("http delete timeout! url = %s",e),i(!1,null)},s==a.ContentType.Json?(o.open("DELETE",e,!0),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(t?JSON.stringify(t):null)):(t&&(e+="?"+a.formatParams(t)),o.open("DELETE",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send())}static postWithAuth(e,t,i,a){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}i(!0,a)}else cc.log("http post error! code = %s, url = %s",s.status,e),i(!1,null)},s.onerror=function(){cc.log("http post error! url = %s",e),i(!1,null)},s.ontimeout=function(){cc.log("http post timeout! url = %s",e),i(!1,null)},s.open("POST",e,!0),s.setRequestHeader("Authorization","Bearer "+a),s.setRequestHeader("Content-Type","multipart/form-data"),s.send(t?JSON.stringify(t):null)}static getWithAuth(e,t,i,a){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}i(!0,a)}else cc.log("http get error! code = %s, url = %s",s.status,e),i(!1,null)},s.onerror=function(){cc.log("http get error! url = %s",e),i(!1,null)},s.ontimeout=function(){cc.log("http get timeout! url = %s",e),i(!1,null)},s.open("GET",e,!0),s.setRequestHeader("Authorization","Bearer "+a),s.setRequestHeader("Content-Type","multipart/form-data"),s.send()}}i.Http=a,a.ContentType={Form:1,Json:2,Multipart:3},cc._RF.pop()},{}],MKImageDownloader:[function(e,t,i){"use strict";cc._RF.push(t,"4919aB9yv1POaDSwtAZW/Qh","MKImageDownloader"),Object.defineProperty(i,"__esModule",{value:!0}),i.imageDowloader=i.ImageDownloader=void 0;const a=e("./MKCryptoUtils");class s{constructor(){this.m_observers=null,this.m_observers=[]}loadUrl(e,t){for(var i=!1,a=0,s=this.m_observers.length;a<s;++a){var o=this.m_observers[a];if(e==o.url){o.callback.push(t),i=!0;break}}i||(this.m_observers.push({url:e,callback:[t]}),this.downloadImage(e))}onDownloadImage(e,t){for(var i=this.m_observers.length-1;i>=0;--i){var a=this.m_observers[i];if(e==a.url){for(var s=a.callback,o=0;o<s.length;++o)s[o](e,t);this.m_observers.splice(i,1);break}}}downloadImage(e){var t=jsb.fileUtils.getWritablePath()+"net_image/",i=t+a.CryptoUtils.md5(e)+".jpg";if(jsb.fileUtils.isFileExist(i))this.onDownloadImage(e,i);else{jsb.fileUtils.isDirectoryExist(t)||jsb.fileUtils.createDirectory(t);var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status?this.saveFile(e,i,s.response):cc.log("Remote download file failed."))}.bind(this),s.responseType="arraybuffer",s.open("GET",e,!0),s.send()}}saveFile(e,t,i){jsb.fileUtils.writeDataToFile(new Uint8Array(i),t)?this.onDownloadImage(e,t):cc.log("Remote write file failed.")}clearCache(){var e=jsb.fileUtils.getWritablePath()+"net_image/";jsb.fileUtils.listFiles(e).length>100&&jsb.fileUtils.removeDirectory(e)}}i.ImageDownloader=s,i.imageDowloader=new s,cc._RF.pop()},{"./MKCryptoUtils":"MKCryptoUtils"}],MKIndex:[function(e,t,i){"use strict";cc._RF.push(t,"0f526BZPmpBr7wVUh62Ltxm","MKIndex");var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(i,"__esModule",{value:!0}),s(e("./Common/MKCryptoUtils"),i),s(e("./Common/MKLocalLang"),i),s(e("./Common/MKSystem"),i),s(e("./Common/MKUtils"),i),s(e("./Common/MKImageDownloader"),i),s(e("./Common/MKAudioEngine"),i),s(e("./Common/HeartBeatHandler"),i),s(e("./Event/MKCommandCenter"),i),s(e("./Event/MKNoticeCenter"),i),s(e("./Event/MKActionQueue"),i),s(e("./Network/MKHttp"),i),s(e("./Network/MKSocket"),i),cc._RF.pop()},{"./Common/HeartBeatHandler":"HeartBeatHandler","./Common/MKAudioEngine":"MKAudioEngine","./Common/MKCryptoUtils":"MKCryptoUtils","./Common/MKImageDownloader":"MKImageDownloader","./Common/MKLocalLang":"MKLocalLang","./Common/MKSystem":"MKSystem","./Common/MKUtils":"MKUtils","./Event/MKActionQueue":"MKActionQueue","./Event/MKCommandCenter":"MKCommandCenter","./Event/MKNoticeCenter":"MKNoticeCenter","./Network/MKHttp":"MKHttp","./Network/MKSocket":"MKSocket"}],MKLocalLang:[function(e,t,i){"use strict";cc._RF.push(t,"26623qYW/1OJ7PqJm16Um6d","MKLocalLang"),Object.defineProperty(i,"__esModule",{value:!0}),i.LocalLang=void 0;class a{static checkInit(){this.language||this.setLanguage("en")}static setLanguage(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())}static getLanguage(){return this.language}static _addOrDelLabel(e,t){if(t)this.labelArr.push(e);else{let t=this.labelArr.indexOf(e);-1!==t&&this.labelArr.splice(t,1)}}static get(e,t){if(this.checkInit(),null==t||0===t.length)return this.labelData[e]||e;let i=this.labelData[e]||e;for(let a=0;a<t.length;a++){let e=new RegExp("#"+a,"g");i=i.replace(e,t[a])}return i}static _addOrDelSprite(e,t){if(t)this.spriteArr.push(e);else{let t=this.spriteArr.indexOf(e);-1!==t&&this.spriteArr.splice(t,1)}}static _getSprite(e,t){this.checkInit(),cc.resources.load("i18n/sprite/"+this.language+"/"+e,cc.SpriteFrame,(e,i)=>{if(e)return t(null);t(i)})}static reloadLabel(){let e="i18n/label/"+this.language;cc.resources.load(e,(e,t)=>{e?(console.error(e),this.labelData={}):this.labelData=t.json;for(let i of this.labelArr)i._resetValue()})}static reloadSprite(){for(let e of this.spriteArr)e._resetValue()}}i.LocalLang=a,a.language="",a.labelArr=[],a.labelData={},a.spriteArr=[],cc._RF.pop()},{}],MKNoticeCenter:[function(e,t,i){"use strict";cc._RF.push(t,"79a78Glip9HQ5SpEWfy23e+","MKNoticeCenter"),Object.defineProperty(i,"__esModule",{value:!0}),i.onNotice=i.noticeCenter=i.NoticeCenter=i.createNotice=void 0;let a=0;i.createNotice=function(e){e.Type="Notice"+a++,e.prototype.getType=function(){return e.Type}};class s{constructor(){this.m_eventTarget=new cc.EventTarget}on(e,t,i){this.m_eventTarget.on(e.Type,t,i)}off(e,t,i){this.m_eventTarget.off(e.Type,t,i)}registAllNotice(e){if(e.noticeList)for(let t of e.noticeList)this.on(t.notice,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.emit(e.getType(),e)}}i.NoticeCenter=s,i.noticeCenter=new s,i.onNotice=function(e){return function(t,i){t.noticeList||(t.noticeList=[]),t.noticeList.push({notice:e,methodName:i})}},cc._RF.pop()},{}],MKSocket:[function(e,t,i){"use strict";cc._RF.push(t,"9629bn3i9BIyKAXnP94lWgi","MKSocket"),Object.defineProperty(i,"__esModule",{value:!0}),i.onMsg=i.Socket=void 0;class a{constructor(){this.m_socket=null,this.m_eventTarget=new cc.EventTarget,this.m_connected=!1}connect(e){}disconnect(){this.m_connected=!1}isConnected(){return this.m_socket&&this.m_connected}send(e,t){}on(e,t,i){this.m_eventTarget.on(e.toString(),t,i)}off(e,t,i){this.m_eventTarget.off(e.toString(),t,i)}registAllMsg(e){if(e.msgList)for(let t of e.msgList)this.on(t.msgID,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}onConnect(e){this.m_connected=!0,this.m_eventTarget.emit(a.Connect,this,e)}onMessage(e){this.m_eventTarget.emit(a.Message,this,e),this.m_eventTarget.hasEventListener(e.msgID)?this.m_eventTarget.emit(e.msgID,e):cc.log("MKSocket err : no socket message handler, messageID = "+e.msgID)}onError(e){this.m_eventTarget.emit(a.Error,this,e),this.disconnect(),this.m_connected=!1}onClose(e){this.m_eventTarget.emit(a.Close,this,e),this.disconnect(),this.m_connected=!1}}i.Socket=a,a.Connect="Connect",a.Close="Close",a.Error="Error",a.Message="Message",i.onMsg=function(e){return function(t,i){t.msgList||(t.msgList=[]),t.msgList.push({msgID:e,methodName:i})}},cc._RF.pop()},{}],MKSystem:[function(e,t,i){"use strict";cc._RF.push(t,"a872ajJ9cJIZJgRz4rujdNB","MKSystem"),Object.defineProperty(i,"__esModule",{value:!0}),i.system=i.System=void 0;class a{constructor(){}getVersion(){return""}getVersionCode(){return 1}getPackageName(){return""}getMetaData(e){return""}getDeviceID(){return""}getLocation(){return""}getChannelID(){return""}copyStrToClipboard(e){}getFileMD5(e){return""}getPlatform(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?cc.sys.OS_ANDROID:cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:"Web":"Web"}getWakeUpData(){return""}shareText(e,t){}shareInWhatsApp(e){}}i.System=a;class s extends a{constructor(){super()}getVersion(){return"1.0.0"}getVersionCode(){return 1}getPackageName(){return"com.kbsgame.teenpatti"}getDeviceModel(){return""}getSystemVersion(){return""}getMetaData(e){return""}getLocation(){return""}getDeviceID(){return this.genMacFack()}getChannelID(){return"KBS"}genMacFack(){var e=cc.sys.localStorage.getItem("macFack");if(e)return e;e="";for(var t=0;t<6;t++){for(var i="",a=0;a<2;a++)i+="0123456789abcdef"[Math.ceil(15*Math.random())];e+=e?":"+i:i}return cc.sys.localStorage.setItem("macFack",e),e}}let o=null;o=cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?new class extends a{constructor(){super(),this.version="",this.versionCode=1,this.packageName="",this.channelID="",this.version=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"),this.packageName=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"),this.channelID=this.getMetaData("APP_CHANNEL");try{this.versionCode=jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getVersionCode","()J")}catch(e){}}getVersion(){return this.version}getVersionCode(){return this.versionCode}getPackageName(){return this.packageName}getDeviceModel(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getDeviceModel","()Ljava/lang/String;")}getSystemVersion(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getSystemVersion","()Ljava/lang/String;")}getMetaData(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getMetaData","(Ljava/lang/String;)Ljava/lang/String;",e)}getDeviceID(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getDeviceID","()Ljava/lang/String;")}getLocation(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getLocation","()Ljava/lang/String;")}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("com/mk/common/MKSystem","copyStrToClipboard","(Ljava/lang/String;)V",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getFileMD5","(Ljava/lang/String;)Ljava/lang/String;",e)}getWakeUpData(){return this.getVersionCode()<43?"":jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getWakeUpData","()Ljava/lang/String;")}shareText(e,t){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareText","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}shareInWhatsApp(e){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareToApp","(Ljava/lang/String;Ljava/lang/String;)V","com.whatsapp",e)}}:cc.sys.os==cc.sys.OS_IOS?new class extends a{constructor(){super(),this.version="",this.packageName="",this.channelID="",this.channelID=this.getMetaData("APP_CHANNEL")}getVersion(){return this.version}getPackageName(){return this.packageName}getMetaData(e){return jsb.reflection.callStaticMethod("MKSystem","getMetaData:",e)}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("MKSystem","copyStrToClipboard:",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("MKSystem","getFileMD5:",e)}}:new s:new s,i.system=o,cc._RF.pop()},{}],MKUtils:[function(e,t,i){"use strict";cc._RF.push(t,"67818ViSbNBt7n0lfXcd04e","MKUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=void 0;class a{static randRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}static strMaxCut(e,t){for(var i="",a=0,s=0;s<e.length;s++){var o=e[s];o.charCodeAt(0)>255?a+=2:a++,a<=t&&(i+=o)}return a>t?i+"...":i}static dateFormat(e,t){var i=new Date(t);let a;const s={"Y+":i.getFullYear().toString(),"m+":(i.getMonth()+1).toString(),"d+":i.getDate().toString(),"H+":i.getHours().toString(),"M+":i.getMinutes().toString(),"S+":i.getSeconds().toString()};for(let o in s)(a=new RegExp("("+o+")").exec(e))&&(e=e.replace(a[1],1==a[1].length?s[o]:s[o].padStart(a[1].length,"0")));return e}static getUrlParams(){if(cc.sys.isNative)return{};var e=window.location.search;return a.parseUrlParams(e)}static parseUrlParams(e){var t={},i=e.indexOf("?");if(-1!=i)for(var a=e.substr(i+1).split("&"),s=0;s<a.length;s++)t[a[s].split("=")[0]]=a[s].split("=")[1];return t}static resize(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=e.designResolution);var t=this.curDR,i=cc.view.getFrameSize(),a=i.width,s=i.height,o=a,n=s;a/s>t.width/t.height?o=(n=t.height)*a/s:n=s/a*(o=t.width),e.designResolution=cc.size(o,n),e.node.width=o,e.node.height=n,e.node.emit("resize")}static maxCountElement(e){let t={};for(let o=0;o<e.length;o++){let i=e[o];t[i]?t[i]++:t[i]=1}let i=0,a=[],s=[];for(let o in t)i<t[o]?(i=t[o],a[0]=o,s.length=0):i===t[o]&&s.push(o);if(s.length>0)for(let o=0;o<s.length;o++)a.push(s[o]);return a}static isEmail(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e)}static isPhone(e){return/^(\d*)$/.test(e)}static isUserName(e){return/^[A-Za-z0-9][A-Za-z0-9\s]*[A-Za-z0-9]$/.test(e)}}i.Utils=a,a.curDR=null,cc._RF.pop()},{}],MenuLayer:[function(e,t,i){"use strict";cc._RF.push(t,"0de2b6hsk5OQo/U/taIk3GO","MenuLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("./Common/PopupBase"),n=e("./Common/PopupManager"),r=e("../Business/Data/CommonDefine"),c=e("../Business/Data/SaveDataManager"),{ccclass:l,property:h,menu:d}=cc._decorator;let u=class extends o.default{constructor(){super(...arguments),this.animationDuration=0,this.btnPaytable=null,this.btnHelp=null,this.btnLanguage=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.musicOn=!1,this.soundOn=!1}static get path(){return"Scenes/Game/menu_layer"}onLoad(){this.main||(this.main=this.node),this.btnPaytable.on(cc.Node.EventType.TOUCH_END,this.onTouchPaytable,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onTouchHelp,this),this.btnRecord.on(cc.Node.EventType.TOUCH_END,this.onTouchRecord,this),this.musicOn=c.default.getMusicEnable(),this.soundOn=c.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff}onTouchClose(){this.hide()}onTouchPaytable(){n.default.show(r.PrefabList.PaytableLayer),this.hide()}onTouchHelp(){n.default.show(r.PrefabList.HelpLayer),this.hide()}onTouchRecord(){n.default.show(r.PrefabList.GameRecordLayer),this.hide()}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,c.default.setMusicEnable(this.musicOn),s.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,c.default.setEffectEnable(this.soundOn),s.AudioEngine.setEffectsEnabled(this.soundOn),s.AudioEngine.playEffect(r.SoundList.Click)}};a([h(cc.Node)],u.prototype,"btnPaytable",void 0),a([h(cc.Node)],u.prototype,"btnHelp",void 0),a([h(cc.Node)],u.prototype,"btnLanguage",void 0),a([h(cc.Node)],u.prototype,"btnRecord",void 0),a([h(cc.Sprite)],u.prototype,"imgMusic",void 0),a([h(cc.Sprite)],u.prototype,"imgSound",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgMusicOn",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgMusicOff",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgSoundOn",void 0),a([h(cc.SpriteFrame)],u.prototype,"imgSoundOff",void 0),u=a([l],u),i.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/SaveDataManager":"SaveDataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/PopupManager":"PopupManager"}],MessageView:[function(e,t,i){"use strict";cc._RF.push(t,"46174h9izpKHKj9zlyrAHrr","MessageView");var a,s=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:n}=cc._decorator;let r=a=class extends cc.Component{constructor(){super(...arguments),this.imgBg=null,this.text=null}onLoad(){}onDestroy(){}animate(e=2){this.node.stopAllActions(),cc.tween(this.node).delay(e).call(()=>{this.node.removeFromParent()}).start()}show(e,t){this.text.string=e,this.animate(t)}static show(e,t){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/MessageView",cc.Prefab);if(null==e)return void cc.log("Please init MessageView defaultSkin on app init");a.defaultSkin=e}a.showWithFile(a.defaultSkin,e,t)}static showWithFile(e,t,i){null==a.g_persistRootNode&&(a.g_persistRootNode=new cc.Node,a.g_persistRootNode.width=cc.winSize.width,a.g_persistRootNode.height=cc.winSize.height,a.g_persistRootNode.x=cc.winSize.width/2,a.g_persistRootNode.y=cc.winSize.height/2,cc.game.addPersistRootNode(a.g_persistRootNode)),(a.g_persistRootNode.width<cc.winSize.width||a.g_persistRootNode.height<cc.winSize.height)&&(a.g_persistRootNode.width=cc.winSize.width,a.g_persistRootNode.height=cc.winSize.height,a.g_persistRootNode.x=cc.winSize.width/2,a.g_persistRootNode.y=cc.winSize.height/2);let s=a.g_persistRootNode,o=null,n=s.getChildByName("MessageView");null==n?((o=cc.instantiate(e).getComponent(a)).node.name="MessageView",o.node.x=cc.winSize.width/2,o.node.y=cc.winSize.height/2,s.addChild(o.node)):o=n.getComponent(a),o.show(t,i)}};r.defaultSkin=null,r.g_persistRootNode=null,s([n(cc.Sprite)],r.prototype,"imgBg",void 0),s([n(cc.Label)],r.prototype,"text",void 0),r=a=s([o],r),i.default=r,cc._RF.pop()},{}],NetworkConstants:[function(e,t,i){"use strict";cc._RF.push(t,"670a7mMGfNFBZ5dvBazXYJa","NetworkConstants"),Object.defineProperty(i,"__esModule",{value:!0}),i.MsgCBNtf=i.MsgCBAck=i.MsgCBReq=i.MsgCB=i.MsgBaseNtf=i.MsgBaseAck=i.MsgBaseReq=i.MsgBase=i.MsgNtfMark=i.MsgAckMark=i.MsgTypeMark=i.MsgModeMark=i.MsgCodeOK=void 0,i.MsgCodeOK=200,i.MsgModeMark=1e6,i.MsgTypeMark=1e4,i.MsgAckMark=2*i.MsgTypeMark,i.MsgNtfMark=3*i.MsgTypeMark,i.MsgBase=1*i.MsgModeMark,i.MsgBaseReq=i.MsgBase,i.MsgBaseAck=i.MsgBase+i.MsgAckMark,i.MsgBaseNtf=i.MsgBase+i.MsgNtfMark,i.MsgCB=2*i.MsgModeMark,i.MsgCBReq=i.MsgCB,i.MsgCBAck=i.MsgCB+i.MsgAckMark,i.MsgCBNtf=i.MsgCB+i.MsgNtfMark,cc._RF.pop()},{}],NetworkController:[function(e,t,i){"use strict";cc._RF.push(t,"56f188UTbdI+qVXVv/UcjG4","NetworkController");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NetworkController=i.CmdBroadcastTest=i.CmdTokenLogin=i.CmdGetServerConfig=void 0;const s=e("../../MobileKit/MKIndex"),o=e("../../Business/Data/ConfigManager"),n=e("../../Business/Data/DataManager"),r=e("../../Business/Data/CommonDefine"),c=e("./NetworkNotice"),l=e("../NetWork/NetworkManager"),h=e("../NetWork/NetworkConstants");let d=class{};d=a([s.createCommand],d),i.CmdGetServerConfig=d;let u=class{};u=a([s.createCommand],u),i.CmdTokenLogin=u;let p=class{};p=a([s.createCommand],p),i.CmdBroadcastTest=p;class m extends s.Controller{constructor(){super(),this.m_socket=null,this.m_windowsEcho=window.Echo,this.setName("NetworkController"),s.noticeCenter.registAllNotice(this),s.commandCenter.registAllCommand(this),this.m_socket=l.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.m_heartBeatHandler=new s.HeartBeatHandler,this.m_heartBeatHandler.logName="[Socket]",this.m_heartBeatHandler.idle=10,this.m_heartBeatHandler.idleCallBack=this.sendIdle.bind(this),this.m_heartBeatHandler.timeOutCallBack=this.onHeartBeatTimeOut.bind(this)}onExit(){s.noticeCenter.targetOff(this),s.commandCenter.targetOff(this)}onCmdGetServerConfig(e){var t=o.default.urlConfig.base+"getconfig",i={};i.channel=s.system.getChannelID(),i.package=s.system.getPackageName(),i.version=s.system.getVersion(),i.deviceid=s.system.getDeviceID(),cc.log("getconfig params = "+JSON.stringify(i)),s.Http.get(t,i,this.onSetting.bind(this))}onSetting(e,t){if(e&&(cc.log("getconfig result = ",JSON.stringify(t)),200==t.code)){let e=n.default.homeData;e.setChipsUnit(t.chipUnit),e.setGameId(t.gameid)}}onCmdTokenLogin(e){let t=o.default.urlConfig.base+"api/auth/login",i={platform:"JhandiMundaSingle",platform_token:"3345678"};i.token=n.default.userData.getToken(),cc.log("login params = "+JSON.stringify(i)),s.Http.post(t,i,this.onNetTokenLogin.bind(this))}onNetTokenLogin(e,t){e?200==t.code?(this.setUserData(t.data[0]),s.noticeCenter.emit(new c.NtcLogin(0))):this.loginSDKFailed(t.code):this.loginSDKFailed()}setUserData(e){let t=e.user_info[0],i=n.default.userData;i.setUid(t.user_id),i.setToken(e.access_token);let a=[];e.user_info.record.forEach(e=>{let t=new r.RecordData;t.time=new Date(e.created_at).getTime(),t.balance=e.round_amount,t.isWin=e.big_win,a.push(t)}),n.default.userData.setGameRecordLst(a),n.default.homeData.setWs("https://adminapi.lgnetwork.fun/socket.io")}loginSDKFailed(e,t){null==e&&(e=1),s.noticeCenter.emit(new c.NtcLogin(e))}onConnect(){cc.log("[Socket] connect server success!"),cc.log("[send] Token ="+JSON.stringify(void 0)),this.m_socket.send(h.MsgBaseReq+"AckToken",void 0)}onNetAckToken(e){if(cc.log("[receive] TokenRsp code = "+e.state.code),e.state.code!=h.MsgCodeOK)return cc.log("Rsp info = "+e.state.info),void s.noticeCenter.emit(new c.NtcLogin(2));var t=e.body;cc.log("TokenRsp = "+JSON.stringify(t)),n.default.userData.setLogined(!0),this.m_heartBeatHandler.startIdle()}onMessage(){this.m_heartBeatHandler.onReceiveHeartBeat()}sendIdle(){}onHeartBeatTimeOut(){cc.log("[Socket] onHeartBeatTimeOut"),this.onServerDisconnect()}onNetAckHeart(e){this.m_heartBeatHandler.onReceiveHeartBeat()}onServerDisconnect(){this.m_heartBeatHandler.stopIdle(),this.m_socket.disconnect(),n.default.userData.setLogined(!1)}onBroadcastTest(){for(let e=0;e<10;e++){let t={};t.player="Player"+e,t.amount=s.Utils.randRange(30,1304),this.onNetBroadcast(t)}}onNetBroadcast(e){let t=e;cc.log("[receive] GameWordNews = "+JSON.stringify(t));let i=s.LocalLang.get("lobby_broadcast_win",[t.player,t.amount]);n.default.homeData.getBroadcastData().addPushNotice(i,2)}}a([s.onCommand(d)],m.prototype,"onCmdGetServerConfig",null),a([s.onCommand(u)],m.prototype,"onCmdTokenLogin",null),a([s.onMsg(s.Socket.Connect)],m.prototype,"onConnect",null),a([s.onMsg(h.MsgBaseAck+"AckToken")],m.prototype,"onNetAckToken",null),a([s.onMsg(s.Socket.Message)],m.prototype,"onMessage",null),a([s.onMsg(h.MsgBaseAck)],m.prototype,"onNetAckHeart",null),a([s.onCommand(p)],m.prototype,"onBroadcastTest",null),a([s.onMsg("GET_BROADCAST")],m.prototype,"onNetBroadcast",null),i.NetworkController=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/ConfigManager":"ConfigManager","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../NetWork/NetworkConstants":"NetworkConstants","../NetWork/NetworkManager":"NetworkManager","./NetworkNotice":"NetworkNotice"}],NetworkManager:[function(e,t,i){"use strict";cc._RF.push(t,"fde8eQasMBHsK4UOZ57A4Dp","NetworkManager"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("./GameSocket");class s{constructor(){this.m_commonSocket=new a.default}getCommonSocket(){return this.m_commonSocket}}i.default=s,s.sharedManager=null,s.getInstance=function(){return null===s.sharedManager&&(s.sharedManager=new s),s.sharedManager},cc._RF.pop()},{"./GameSocket":"GameSocket"}],NetworkNotice:[function(e,t,i){"use strict";cc._RF.push(t,"dcce6iOurFKsYzb0t5YwJu5","NetworkNotice");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.NtcGetServerConfig=i.NtcDisconnect=i.NtcLogin=void 0;const s=e("../../MobileKit/MKIndex");let o=class{constructor(e){this.result=e}};o=a([s.createNotice],o),i.NtcLogin=o;let n=class{constructor(e){this.reason=e}};n=a([s.createNotice],n),i.NtcDisconnect=n;let r=class{};r=a([s.createNotice],r),i.NtcGetServerConfig=r,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],PlayerData:[function(e,t,i){"use strict";cc._RF.push(t,"c5a2bFZbYZPo6Xac8ibBW/Q","PlayerData"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerData=void 0;const a=e("./HandCardsData");i.PlayerData=class{constructor(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=null,this.m_isWinner=!1,this.m_winLose=0,this.m_isBigBlind=!1,this.m_isSmallBlind=!1,this.m_isFolded=!1,this.m_betSum=0,this.m_roundBet=0,this.m_isActioned=!1,this.m_cardTypeData=new a.CardTypeData,this.m_raiseChip=0,this.m_isAllin=!1,this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=[],this.m_cardTypeData=new a.CardTypeData}resetAllData(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.resetGameData()}resetGameData(){this.m_handCards.length=0,this.m_isWinner=!1,this.m_playing=!1,this.m_winLose=0,this.m_isBigBlind=!1,this.m_isSmallBlind=!1,this.m_isFolded=!1,this.m_betSum=0,this.m_roundBet=0,this.m_isActioned=!1,this.m_cardTypeData=new a.CardTypeData,this.m_raiseChip=0,this.m_isAllin=!1}setSeat(e){this.m_seat=e}getSeat(){return this.m_seat}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getChips(){return this.m_chips}setChips(e){this.m_chips=e}isPlaying(){return this.m_playing}setPlaying(e){this.m_playing=e}isWinner(){return this.m_isWinner}setWinner(e){this.m_isWinner=e}getHandCards(){return this.m_handCards}setHandCards(e){this.m_handCards=e}setWinLose(e){this.m_winLose=e}getWinLose(){return this.m_winLose}isBigBlind(){return this.m_isBigBlind}setBigBlind(e){this.m_isBigBlind=e}isSmallBlind(){return this.m_isSmallBlind}setSmallBlind(e){this.m_isSmallBlind=e}isFold(){return this.m_isFolded}setFold(e){this.m_isFolded=e}getBetSum(){return this.m_betSum}setBetSum(e){this.m_betSum=e}getRoundBet(){return this.m_roundBet}setRoundBet(e){this.m_roundBet=e}isActioned(){return this.m_isActioned}setActioned(e){this.m_isActioned=e}getCardTypeData(){return this.m_cardTypeData}setCardTypeData(e){this.m_cardTypeData=e}getRaiseChip(){return this.m_raiseChip}setRaiseChip(e){this.m_raiseChip=e}isAllin(){return this.m_isAllin}setAllin(e){this.m_isAllin=e}canAction(){let e=!0;return this.m_isFolded&&(e=!1),this.m_isAllin&&(e=!1),this.m_isActioned&&(e=!1),e}},cc._RF.pop()},{"./HandCardsData":"HandCardsData"}],PlayerNode:[function(e,t,i){"use strict";cc._RF.push(t,"6b013O+pRZGnaVlS1ZVz4wG","PlayerNode");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("./Common/PrefabPool"),h=e("./PokerNode"),d=e("../Business/Data/PlayerData"),{ccclass:u,property:p,menu:m}=cc._decorator;let g=class extends cc.Component{constructor(){super(...arguments),this.txtSeat=null,this.imgSeat=null,this.imgProgress=null,this.imgWinner=null,this.headMask=null,this.cardNode=null,this.bgState=null,this.txtState=null,this.txtBalance=null,this.bgInfo=null,this.chipPlaceNode=null,this.imgChip=null,this.bgChips=null,this.txtChips=null,this.txtWinner=null,this.txtGetChips=null,this.tableChipsPos=null,this.dealCardPos=null,this.handCards=[],this.player=null,this.gameData=null,this.callChip=null}onLoad(){s.noticeCenter.registAllNotice(this),this.gameData=o.default.gameData,this.player=new d.PlayerData,this.initUI()}initUI(){for(let e=0;e<n.MAX_HAND_CARDS;e++){let e=l.default.get(n.PrefabList.PokerNode);e.setParent(this.cardNode),e.active=!1,this.handCards.push(e.getComponent(h.default))}this.bgState.active=!1,this.bgInfo.active=!1,this.callChip=cc.instantiate(this.bgChips.node),this.callChip.setParent(this.node),this.callChip.position=new cc.Vec3(0,0,0),this.callChip.active=!1,this.callChip.getComponent(cc.Sprite).enabled=!1,this.callChip.getComponentInChildren(cc.Label).string="",this.clearGame()}setDirection(){this.cardNode.x=-this.cardNode.x,this.bgState.x=-this.bgState.x,this.txtBalance.node.x=-this.txtBalance.node.x,this.bgInfo.x=-this.bgInfo.x,this.chipPlaceNode.x=-this.chipPlaceNode.x}clearGame(){this.setStateBar(0),this.bgChips.node.active=!1,this.bgChips.node.stopAllActions(),this.imgWinner.node.active=!1,this.setMask(!1),this.stopProgress(),this.handCards.forEach(e=>{e.node.active=!1,e.node.stopAllActions()}),this.txtWinner.string="",this.txtGetChips.string=""}setTablePos(e,t,i){i>1&&this.setDirection(),2==i&&(this.chipPlaceNode.x=60,this.chipPlaceNode.y=110),this.tableChipsPos=this.node.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),this.dealCardPos=this.cardNode.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))}updateBalance(){this.player.isPlaying()&&this.player.getSeat()!=o.default.gameData.getSelfSeat()?(this.bgInfo.active=!0,this.txtBalance.string=c.UIUtils.getShortNumber(this.player.getChips())):this.bgInfo.active=!1}sitDown(e){this.player=e,this.imgSeat.node.active=!0,this.stopProgress(),this.txtSeat.string=this.player.getSeat().toString(),this.updateBalance()}standUp(){this.player.resetAllData(),this.imgSeat.node.active=!1,this.txtSeat.string=this.player.getSeat().toString(),this.stopProgress(),this.clearGame()}getPlayerData(){return null==this.player?null:this.player}startProgress(){let e=this.gameData.getStageLeftTime();this.stopProgress(),this.imgProgress.node.active=!0,this.imgProgress.progress=1,cc.tween(this.imgProgress).to(e,{progress:0}).start(),cc.tween(this.imgProgress.node).delay(e-3).call(()=>{s.AudioEngine.playEffect(n.SoundList.Alarm)}).delay(1).call(()=>{s.AudioEngine.playEffect(n.SoundList.Alarm)}).start()}stopProgress(){this.imgProgress.node.active=!1,this.imgProgress.node.stopAllActions()}setMask(e){this.headMask.node.active=e}dealCards(){this.handCards.forEach(e=>{e.setPoker(-1),e.node.setPosition(this.dealCardPos),e.node.scale=n.PlayerNodeCardScale,e.node.opacity=255});let e=new cc.Vec3(0,0,0);cc.tween(this).call(()=>{this.handCards[0].node.active=!0,cc.tween(this.handCards[0].node).to(.5,{x:e.x,y:e.y,angle:10},{easing:"smooth"}).start()}).delay(.5).call(()=>{this.handCards[1].node.active=!0,cc.tween(this.handCards[1].node).to(.5,{x:e.x+.4*this.handCards[0].node.width*n.PlayerNodeCardScale,y:e.y,angle:-10},{easing:"smooth"}).start()}).start()}fold(){let e=this.dealCardPos;cc.tween(this).call(()=>{cc.tween(this.handCards[0].node).to(.5,{x:e.x,y:e.y,opacity:0},{easing:"smooth"}).start()}).delay(.2).call(()=>{cc.tween(this.handCards[1].node).to(.5,{x:e.x,y:e.y,opacity:0},{easing:"smooth"}).start()}).start()}betChips(e){this.bgChips.enabled=!1,this.bgChips.node.active=!0,this.bgChips.node.position=new cc.Vec3(0,0,0),this.txtChips.node.active=!1,this.txtChips.string=c.UIUtils.getShortNumber(e),c.UIUtils.setChipType(this.imgChip,e),cc.tween(this.bgChips.node).to(.2,{position:this.chipPlaceNode.position},{easing:"smooth"}).call(()=>{this.bgChips.enabled=!0,this.txtChips.node.active=!0}).start()}callBet(){this.callChip.active=!0,this.callChip.position=new cc.Vec3(0,0,0),cc.tween(this.callChip).to(.2,{position:this.chipPlaceNode.position},{easing:"smooth"}).call(()=>{this.txtChips.string=c.UIUtils.getShortNumber(this.player.getRoundBet()),c.UIUtils.setChipType(this.imgChip,this.player.getRoundBet()),this.callChip.active=!1}).start()}collectBet(){this.bgChips.enabled=!1,this.txtChips.node.active=!1,cc.tween(this.bgChips.node).to(.5,{position:this.tableChipsPos},{easing:"smooth"}).call(()=>{this.bgChips.node.active=!1}).start()}showCard(){let e=this.player.getHandCards(),t=this.node.convertToWorldSpaceAR(new cc.Vec3(0,0,0)),i=this.cardNode.convertToNodeSpaceAR(t),a=new cc.Vec3(i.x+this.handCards[0].node.width/3*n.PlayerCardScale,i.y,0);cc.tween(this).call(()=>{c.UIUtils.cardFly(this.handCards[0].node,this.handCards[0].node.position,i,n.PlayerCardScale,.25,10)}).delay(.25).call(()=>{c.UIUtils.cardFly(this.handCards[1].node,this.handCards[1].node.position,a,n.PlayerCardScale,.25,-10)}).call(()=>{c.UIUtils.flipToFront(this.handCards[0].node,.5,()=>{this.handCards[0].setPoker(e[0])})}).delay(.25).call(()=>{c.UIUtils.flipToFront(this.handCards[1].node,.5,()=>{this.handCards[1].setPoker(e[1])})}).start()}getChip(e){this.txtGetChips.node.y=0,this.txtGetChips.string="+"+c.UIUtils.getShortNumber(e),cc.tween(this.txtGetChips.node).to(1,{y:50},{easing:"smooth"}).call(()=>{this.txtGetChips.string=""}).start()}setBlind(e){this.txtState.node.color=cc.Color.WHITE,0==e?this.bgState.active=!1:1==e?(this.bgState.active=!0,this.txtState.string="B. BLIND"):2==e&&(this.bgState.active=!0,this.txtState.string="S. BLIND")}setStateBar(e){this.txtState.node.color=cc.Color.WHITE,0==e?this.bgState.active=!1:1==e?(this.bgState.active=!0,this.txtState.string="Check"):2==e?(this.bgState.active=!0,this.txtState.string="Call"):3==e?(this.bgState.active=!0,this.txtState.string="Raise"):4==e?(this.bgState.active=!0,this.txtState.node.color=cc.Color.YELLOW,this.txtState.string="All in"):5==e&&(this.bgState.active=!0,this.txtState.string="Fold")}onNtcResetGame(){this.player.resetAllData(),this.clearGame()}onNtcDealCards(){this.clearGame(),this.player.getSeat()==this.gameData.getBigBlindSeat()?this.setBlind(1):this.player.getSeat()==this.gameData.getSmallBlindSeat()?this.setBlind(2):this.setBlind(0)}onNtcUpdateBalance(e){e.seat<0?this.updateBalance():e.seat==this.player.getSeat()&&this.updateBalance()}onNtcWaitAction(e){this.player.isPlaying()&&(e.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onNtcFold(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat&&(this.fold(),this.setMask(!0),this.setStateBar(5)),this.stopProgress())}onNtcBetChip(e){this.player.isPlaying()&&this.player.getSeat()==e.seat&&this.betChips(e.chips)}onNtcCall(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat&&(e.chips>0?(this.bgChips.node.active?this.callBet():this.betChips(e.chips),this.player.isAllin()?this.setStateBar(4):this.setStateBar(2)):this.setStateBar(1),this.bgState.active=!0),this.stopProgress())}onNtcRaise(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat?(e.chips>0&&(this.bgChips.node.active?this.callBet():this.betChips(e.chips),this.player.isAllin()?this.setStateBar(4):this.setStateBar(3)),this.bgState.active=!0):this.player.isFold()||this.player.isAllin()||this.setStateBar(0),this.stopProgress())}onNtcTableShow1st(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||this.setStateBar(0))}onNtcTableShow2nd(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||(this.bgState.active=!1))}onNtcRiverRoundEnd(e){this.player.isPlaying()&&(this.collectBet(),this.player.isFold()||this.player.isAllin()||(this.bgState.active=!1))}onNtcShowWinner(e){this.player.isPlaying()&&(this.player.getSeat()==e.seat?(this.imgWinner.node.active=!0,e.cards.forEach(e=>{this.handCards.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})):this.handCards.forEach(e=>{e.setMask(!0)}),this.stopProgress())}onNtcShowMultiWinner(e){this.player.isPlaying()&&(e.seat.forEach((t,i)=>{0==i?this.player.getSeat()==t?(this.imgWinner.node.active=!0,this.txtWinner.string="Main Pot Winner",e.cards.forEach(e=>{this.handCards.forEach(t=>{t.getPokerData().getCode()==e&&t.setHighlight(!0)})})):this.handCards.forEach(e=>{e.setMask(!0)}):this.player.getSeat()==t&&(this.txtWinner.string="Side Pot Winner")}),this.stopProgress())}onNtcGameEnd(e){this.player.isPlaying()&&this.collectBet()}onNtcShowWinnerAllFold(e){this.player.isPlaying()&&this.player.getSeat()==e.seat&&(this.imgWinner.node.active=!0)}};a([p({type:cc.Label,displayName:""})],g.prototype,"txtSeat",void 0),a([p({type:cc.Sprite,displayName:""})],g.prototype,"imgSeat",void 0),a([p(cc.ProgressBar)],g.prototype,"imgProgress",void 0),a([p(cc.Sprite)],g.prototype,"imgWinner",void 0),a([p(cc.Sprite)],g.prototype,"headMask",void 0),a([p(cc.Node)],g.prototype,"cardNode",void 0),a([p(cc.Node)],g.prototype,"bgState",void 0),a([p(cc.Label)],g.prototype,"txtState",void 0),a([p(cc.Label)],g.prototype,"txtBalance",void 0),a([p(cc.Node)],g.prototype,"bgInfo",void 0),a([p(cc.Node)],g.prototype,"chipPlaceNode",void 0),a([p(cc.Sprite)],g.prototype,"imgChip",void 0),a([p(cc.Sprite)],g.prototype,"bgChips",void 0),a([p(cc.Label)],g.prototype,"txtChips",void 0),a([p(cc.Label)],g.prototype,"txtWinner",void 0),a([p(cc.Label)],g.prototype,"txtGetChips",void 0),a([s.onNotice(r.NtcResetGame)],g.prototype,"onNtcResetGame",null),a([s.onNotice(r.NtcDealCards)],g.prototype,"onNtcDealCards",null),a([s.onNotice(r.NtcUpdateBalance)],g.prototype,"onNtcUpdateBalance",null),a([s.onNotice(r.NtcWaitAction)],g.prototype,"onNtcWaitAction",null),a([s.onNotice(r.NtcFold)],g.prototype,"onNtcFold",null),a([s.onNotice(r.NtcBetChip)],g.prototype,"onNtcBetChip",null),a([s.onNotice(r.NtcCall)],g.prototype,"onNtcCall",null),a([s.onNotice(r.NtcRaise)],g.prototype,"onNtcRaise",null),a([s.onNotice(r.NtcTableShow1st)],g.prototype,"onNtcTableShow1st",null),a([s.onNotice(r.NtcTableShow2nd)],g.prototype,"onNtcTableShow2nd",null),a([s.onNotice(r.NtcRiverRoundEnd)],g.prototype,"onNtcRiverRoundEnd",null),a([s.onNotice(r.NtcShowWinner)],g.prototype,"onNtcShowWinner",null),a([s.onNotice(r.NtcShowMultiWinner)],g.prototype,"onNtcShowMultiWinner",null),a([s.onNotice(r.NtcGameEnd)],g.prototype,"onNtcGameEnd",null),a([s.onNotice(r.NtcShowWinnerAllFold)],g.prototype,"onNtcShowWinnerAllFold",null),g=a([u],g),i.default=g,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/PlayerData":"PlayerData","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],PokerData:[function(e,t,i){"use strict";var a,s;cc._RF.push(t,"49959S7SupJO7nuVF1YYdst","PokerData"),Object.defineProperty(i,"__esModule",{value:!0}),i.PokerData=i.PokerRedJoker=i.PokerBlackJoker=i.PokerCount=i.PokerPointCount=i.PokerPoint=i.PokerColor=void 0,function(e){e[e.Diamond=0]="Diamond",e[e.Club=1]="Club",e[e.Heart=2]="Heart",e[e.Spade=3]="Spade",e[e.Joker=4]="Joker"}(a=i.PokerColor||(i.PokerColor={})),function(e){e[e.PointA=0]="PointA",e[e.Point2=1]="Point2",e[e.Point3=2]="Point3",e[e.Point4=3]="Point4",e[e.Point5=4]="Point5",e[e.Point6=5]="Point6",e[e.Point7=6]="Point7",e[e.Point8=7]="Point8",e[e.Point9=8]="Point9",e[e.Point10=9]="Point10",e[e.PointJ=10]="PointJ",e[e.PointQ=11]="PointQ",e[e.PointK=12]="PointK",e[e.Joker=13]="Joker"}(s=i.PokerPoint||(i.PokerPoint={})),i.PokerPointCount=13,i.PokerCount=54,i.PokerBlackJoker=52,i.PokerRedJoker=53;class o{constructor(){this.color=0,this.point=-1,this.code=-1,this.color=0,this.point=-1,this.code=-1}init(e){this.code=e,this.point=o.getPokerPoint(e),this.color=o.getPokerColor(e)}getPoint(){return this.point}getColor(){return this.color}getCode(){return this.code}static getPokerPoint(e){return o.isJoker(e)?s.Joker:(e%=i.PokerCount)%i.PokerPointCount}static getPokerColor(e){return o.isJoker(e)?a.Joker:(e%=i.PokerCount,Math.floor(e/i.PokerPointCount))}static pokerCompare(e){let t=(e%=i.PokerCount)%i.PokerPointCount;return t==s.PointA&&(t=14),t}static isJoker(e){return(e%=i.PokerCount)==i.PokerBlackJoker||e==i.PokerRedJoker}}i.PokerData=o,cc._RF.pop()},{}],PokerNode:[function(e,t,i){"use strict";cc._RF.push(t,"63e095MnllNM6rVQopCo5Uy","PokerNode");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../Business/Data/PokerData"),{ccclass:o,property:n,menu:r}=cc._decorator;let c=class extends cc.Component{constructor(){super(),this.upNumber=null,this.upImage=null,this.imgPokerBK=null,this.downImage=null,this.bgShadow=null,this.txtCode=null,this.bgMask=null,this.poker=new s.PokerData}onLoad(){}setPoker(e){this.poker.init(e),this.makePoker()}getPokerData(){return this.poker}makePoker(){let e=this.poker.getCode(),t=this.poker.getPoint(),i=this.poker.getColor();this.setHighlight(!1),this.setMask(!1),this.bgShadow.node.active=!0,this.txtCode.string=e.toString(),e<0?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.bgShadow.node.active=!1,-2==e?(this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.imgPokerBK.node.color=(new cc.Color).fromHEX("3f3f3d")):this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_back",cc.SpriteFrame)):s.PokerData.isJoker(e)?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/joker_big",cc.SpriteFrame)):t>=10?this.makeFaceCard(t,i):this.makeNormalPoker(t,i)}makeNormalPoker(e,t){let i="";switch(e){case s.PokerPoint.PointA:i="1";break;case s.PokerPoint.Point2:i="2";break;case s.PokerPoint.Point3:i="3";break;case s.PokerPoint.Point4:i="4";break;case s.PokerPoint.Point5:i="5";break;case s.PokerPoint.Point6:i="6";break;case s.PokerPoint.Point7:i="7";break;case s.PokerPoint.Point8:i="8";break;case s.PokerPoint.Point9:i="9";break;case s.PokerPoint.Point10:i="10"}let a="",o="";switch(t){case s.PokerColor.Spade:a=cc.js.formatStr("clubs_%s",i),o="spades_down";break;case s.PokerColor.Heart:a=cc.js.formatStr("diamonds_%s",i),o="hearts_down";break;case s.PokerColor.Club:a=cc.js.formatStr("clubs_%s",i),o="clubs_down";break;case s.PokerColor.Diamond:a=cc.js.formatStr("diamonds_%s",i),o="diamonds_down"}this.upNumber.node.active=!0,this.upImage.node.active=!0,this.downImage.node.active=!0,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.upNumber.spriteFrame=cc.resources.get("Texture/Game/Poker/"+a,cc.SpriteFrame),this.upImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+o,cc.SpriteFrame),this.downImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+o,cc.SpriteFrame),e==s.PokerPoint.Point10?this.upNumber.node.scaleX=1.666:this.upNumber.node.scaleX=1}makeFaceCard(e,t){let i="";switch(e){case s.PokerPoint.PointJ:i="j";break;case s.PokerPoint.PointQ:i="q";break;case s.PokerPoint.PointK:i="k"}let a="";switch(t){case s.PokerColor.Spade:a="spades";break;case s.PokerColor.Heart:a="hearts";break;case s.PokerColor.Club:a="clubs";break;case s.PokerColor.Diamond:a="diamonds"}this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/"+i+"_"+a,cc.SpriteFrame)}setHighlight(e){this.imgPokerBK.node.color=e?(new cc.Color).fromHEX("#FFFAAF"):cc.Color.WHITE}setMask(e){this.bgMask.node.active=e}};a([n(cc.Sprite)],c.prototype,"upNumber",void 0),a([n(cc.Sprite)],c.prototype,"upImage",void 0),a([n(cc.Sprite)],c.prototype,"imgPokerBK",void 0),a([n(cc.Sprite)],c.prototype,"downImage",void 0),a([n(cc.Sprite)],c.prototype,"bgShadow",void 0),a([n(cc.Label)],c.prototype,"txtCode",void 0),a([n(cc.Sprite)],c.prototype,"bgMask",void 0),c=a([o,r("Game/PokerNode")],c),i.default=c,cc._RF.pop()},{"../Business/Data/PokerData":"PokerData"}],PopupBase:[function(e,t,i){"use strict";cc._RF.push(t,"b6107kAL7dMzqZ3iXRw2h4a","PopupBase");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},s=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(s,o){function n(e){try{c(a.next(e))}catch(t){o(t)}}function r(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:o,property:n}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.animationDuration=.3,this.blocker=null,this.options=null,this.finishCallback=null}show(e,t){return s(this,void 0,void 0,function*(){this.options=e,this.init(e),this.updateDisplay(e),this.onBeforeShow&&(yield this.onBeforeShow()),null==t&&(t=t<0?0:this.animationDuration),yield this.playShowAnimation(t),this.onAfterShow&&this.onAfterShow()})}hide(e=!1,t){return s(this,void 0,void 0,function*(){const i=this.node;if(0!==t){let e=this.blocker;e||((e=this.blocker=new cc.Node("blocker")).addComponent(cc.BlockInputEvents),e.setParent(i),e.setContentSize(i.getContentSize())),e.active=!0}this.onBeforeHide&&(yield this.onBeforeHide(e)),null==t&&(t=t<0?0:this.animationDuration),yield this.playHideAnimation(t),this.blocker&&(this.blocker.active=!1),i.active=!1,this.onAfterHide&&this.onAfterHide(e),this.finishCallback&&this.finishCallback(e)})}playShowAnimation(e){return new Promise(t=>{const i=this.background,a=this.main;this.node.active=!0,i.active=!0,i.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(i).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}init(e){}updateDisplay(e){}onBeforeShow(){return new Promise(e=>e())}onAfterShow(){}onBeforeHide(e){return new Promise(e=>e())}onAfterHide(e){}onSuspended(){return new Promise(e=>e())}};a([n({type:cc.Node,tooltip:!1})],r.prototype,"background",void 0),a([n({type:cc.Node,tooltip:!1})],r.prototype,"main",void 0),r=a([o],r),i.default=r,cc._RF.pop()},{}],PopupManager:[function(e,t,i){"use strict";cc._RF.push(t,"c0ea1lR4GpK0bTmoo90xNjo","PopupManager");var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(s,o){function n(e){try{c(a.next(e))}catch(t){o(t)}}function r(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(n,r)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./PopupBase");var o,n;(function(e){e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent"})(o||(o={})),function(e){e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting"}(n||(n={}));class r{static get prefabCache(){return this._prefabCache}static get nodeCache(){return this._nodeCache}static get current(){return this._current}static get queue(){return this._queue}static get suspended(){return this._suspended}static get container(){return this._container||cc.Canvas.instance.node}static set container(e){this._container=e}static get CacheMode(){return o}static get ShowResultType(){return n}static show(e,t,i){return new Promise(o=>a(this,void 0,void 0,function*(){if(i=this.parseParams(i),this._current||this.locked){if(!i||!i.immediately)return this.push(e,t,i),void o(n.Waiting);this.locked=!1,yield this.suspend()}this._current={path:e,options:t,params:i};let r=this.getNodeFromCache(e);if(!cc.isValid(r)){this.loadStartCallback&&this.loadStartCallback();const t=yield this.load(e);if(this.loadFinishCallback&&this.loadFinishCallback(),!cc.isValid(t))return cc.warn("[PopupManager]","\u5f39\u7a97\u52a0\u8f7d\u5931\u8d25",e),this._current=null,void o(n.Failed);r=cc.instantiate(t)}const c=r.getComponent(s.default);if(!c)return cc.warn("[PopupManager]","\u672a\u627e\u5230\u5f39\u7a97\u7ec4\u4ef6",e),this._current=null,void o(n.Failed);this._current.popup=c,this._current.node=r,r.setParent(this.container),r.setSiblingIndex(cc.macro.MAX_ZINDEX),c.finishCallback=t=>a(this,void 0,void 0,function*(){t||(this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(e,r,i.mode),this._current=null,o(n.Done),yield new Promise(e=>{cc.Canvas.instance.scheduleOnce(e,this.interval)}),this.next())}),c.show(t)}))}static hide(){null!=this._current&&cc.isValid(this._current.popup)&&this._current.popup.hide()}static getNodeFromCache(e){const t=this._nodeCache;if(t.has(e)){const i=t.get(e);if(cc.isValid(i))return i;t.delete(e)}const i=this._prefabCache;if(i.has(e)){const t=i.get(e);if(cc.isValid(t))return t.addRef(),cc.instantiate(t);i.delete(e)}return null}static next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let e=null;if(e=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,cc.isValid(e.popup))return this._current=e,e.node.setParent(this.container),void e.popup.show(e.options);this.show(e.path,e.options,e.params)}static push(e,t,i){this._current||this.locked?(this._queue.push({path:e,options:t,params:i}),this._queue.sort((e,t)=>e.params.priority-t.params.priority)):this.show(e,t,i)}static suspend(){return a(this,void 0,void 0,function*(){if(!this._current)return;const e=this._current;this._suspended.push(e),yield e.popup.onSuspended(),yield e.popup.hide(!0),this._current=null})}static recycle(e,t,i){switch(i){case o.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case o.Normal:this._nodeCache.delete(e),t.destroy();break;case o.Frequent:t.removeFromParent(!1),this._nodeCache.set(e,t)}}static load(e){return new Promise(t=>{const i=this._prefabCache;if(i.has(e)){const a=i.get(e);if(cc.isValid(a))return void t(a);i.delete(e)}cc.resources.load(e,(a,s)=>{a?t(null):(i.set(e,s),t(s))})})}static release(e){const t=this._nodeCache;let i=t.get(e);i&&(t.delete(e),cc.isValid(i)&&i.destroy(),i=null);const a=this._prefabCache;let s=a.get(e);s&&(s.refCount<=1&&a.delete(e),s.decRef(),s=null)}static parseParams(e){return null==e?new c:"[object Object]"!==Object.prototype.toString.call(e)?(cc.warn("[PopupManager]","\u5f39\u7a97\u53c2\u6570\u65e0\u6548\uff0c\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570"),new c):(null==e.mode&&(e.mode=o.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)}}i.default=r,r._prefabCache=new Map,r._nodeCache=new Map,r._current=null,r._queue=[],r._suspended=[],r.locked=!1,r._container=null,r.interval=.05,r.loadStartCallback=null,r.loadFinishCallback=null;class c{constructor(){this.mode=o.Normal,this.priority=0,this.immediately=!1}}cc._RF.pop()},{"./PopupBase":"PopupBase"}],PrefabPool:[function(e,t,i){"use strict";cc._RF.push(t,"66c96CKFiJAvYsrBV2ocv6V","PrefabPool");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:o}=cc._decorator;let n=class{static get(e,t=null){null==this.poolList[e]&&(this.poolList[e]=[]);let i,a=this.poolList[e];0==a.length?(i=cc.instantiate(cc.resources.get(e))).poolKey=e:i=a.pop();var s=t?i.getComponent(t):null;return s&&s.reuse&&s.reuse.apply(s,arguments),i}static put(e,t=null){let i=this.poolList[e.poolKey];if(i&&-1==i.indexOf(e)){e.removeFromParent(!1);var a=t?e.getComponent(t):null;a&&a.unuse&&a.unuse(),i.push(e)}}static clear(e){let t=this.poolList[e];if(t){for(let e=0,i=t.length;e<i;e++)t[e].destroy();t.length=0}}static clearAll(){for(let e in this.poolList)this.clear(e)}static size(e){let t=this.poolList[e];return t?t.length:0}};n.poolList={},n=a([s],n),i.default=n,cc._RF.pop()},{}],RaiseLayer:[function(e,t,i){"use strict";cc._RF.push(t,"1425c5jguBCcrww2BjAuyVS","RaiseLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("./Common/UIUtils"),r=e("../Business/Logic/GameController"),{ccclass:c,property:l,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.txtRaise=null,this.txtTopScale=null,this.txtMidScale=null,this.chipValSlider=null,this.btnAdd=null,this.btnReduce=null,this.btnAllin=null,this.btn1Pot=null,this.btnHalfPot=null,this.btn5Blind=null,this.btn4Blind=null,this.btn3Blind=null,this.raiseChip=0,this.balance=0,this.betUnit=0,this.unitAmount=0,this.minBet=0,this.closeCallback=null}onLoad(){this.chipValSlider.node.on("slide",this.onTouchSlider,this),n.UIUtils.ButtonEvent(this.btnAdd,this.onTouchAdd.bind(this)),n.UIUtils.ButtonEvent(this.btnReduce,this.onTouchReduce.bind(this)),n.UIUtils.ButtonEvent(this.btnAllin,this.onTouchAllIn.bind(this)),n.UIUtils.ButtonEvent(this.btn5Blind,this.onTouch5Blind.bind(this)),n.UIUtils.ButtonEvent(this.btn4Blind,this.onTouch4Blind.bind(this)),n.UIUtils.ButtonEvent(this.btn3Blind,this.onTouch3Blind.bind(this)),n.UIUtils.ButtonEvent(this.btn1Pot,this.onTouch1Pot.bind(this)),n.UIUtils.ButtonEvent(this.btnHalfPot,this.onTouchHalfPot.bind(this))}onEnable(){this.btn5Blind.node.active=!1,this.btn4Blind.node.active=!1,this.btn3Blind.node.active=!1,this.btn1Pot.node.active=!1,this.btnHalfPot.node.active=!1,this.balance=o.default.gameData.getSelfPlayer().getChips(),this.betUnit=o.default.gameData.getBetLimit()/2,this.unitAmount=Math.floor(this.balance/this.betUnit)-2;let e=o.default.gameData.getTableChips();0==o.default.gameData.getTableChips()?(this.btn5Blind.node.active=this.balance>10*this.betUnit,this.btn4Blind.node.active=this.balance>8*this.betUnit,this.btn3Blind.node.active=this.balance>6*this.betUnit,this.minBet=4*this.betUnit):(this.btn1Pot.node.active=this.balance>e,this.btnHalfPot.node.active=this.balance>e/2,this.minBet=2*this.betUnit),this.txtTopScale.string=n.UIUtils.getShortNumber(this.balance),o.default.gameData.getNowMaxBet()>o.default.gameData.getRaiseLimit()?(this.minBet=o.default.gameData.getNowMaxBet()+2*this.betUnit,this.txtMidScale.string=n.UIUtils.getShortNumber(this.minBet+this.betUnit*Math.floor(.25*this.unitAmount)),this.raiseChip=this.minBet):this.balance<o.default.gameData.getRaiseLimit()?(this.txtMidScale.string="",this.raiseChip=this.balance):(this.txtMidScale.string=n.UIUtils.getShortNumber(this.minBet+this.betUnit*Math.floor(.25*this.unitAmount)),this.raiseChip=this.minBet),this.updateRaiseChip()}setSlider(){let e=0;e=(this.raiseChip-this.minBet)/this.betUnit/this.unitAmount,this.chipValSlider.progress=e}setCloseCallback(e){this.closeCallback=e}updateRaiseChip(){this.txtRaise.string=n.UIUtils.getShortNumber(this.raiseChip),o.default.gameData.getSelfPlayer().setRaiseChip(this.raiseChip)}onTouchSlider(e){1==e.progress?this.raiseChip=this.balance:this.raiseChip=this.minBet+this.betUnit*Math.floor(this.unitAmount*e.progress*e.progress),this.updateRaiseChip()}onTouchAdd(){this.raiseChip+=this.betUnit,this.setSlider(),this.updateRaiseChip()}onTouchReduce(){this.raiseChip-this.betUnit<this.minBet||(this.raiseChip-=this.betUnit,this.setSlider(),this.updateRaiseChip())}onTouch1Pot(){let e=new r.CmdRaise;e.chip=o.default.gameData.getTableChips(),s.commandCenter.emit(e)}onTouchHalfPot(){let e=new r.CmdRaise;e.chip=o.default.gameData.getTableChips()/2,s.commandCenter.emit(e)}onTouch5Blind(){let e=new r.CmdRaise;e.chip=10*this.betUnit,s.commandCenter.emit(e)}onTouch4Blind(){let e=new r.CmdRaise;e.chip=8*this.betUnit,s.commandCenter.emit(e)}onTouch3Blind(){let e=new r.CmdRaise;e.chip=6*this.betUnit,s.commandCenter.emit(e)}onTouchAllIn(){let e=new r.CmdRaise;e.chip=this.balance,s.commandCenter.emit(e)}onTouchClose(){this.closeCallback(),this.node.active=!1}};a([l(cc.Label)],d.prototype,"txtRaise",void 0),a([l(cc.Label)],d.prototype,"txtTopScale",void 0),a([l(cc.Label)],d.prototype,"txtMidScale",void 0),a([l(cc.Slider)],d.prototype,"chipValSlider",void 0),a([l(cc.Button)],d.prototype,"btnAdd",void 0),a([l(cc.Button)],d.prototype,"btnReduce",void 0),a([l(cc.Button)],d.prototype,"btnAllin",void 0),a([l(cc.Button)],d.prototype,"btn1Pot",void 0),a([l(cc.Button)],d.prototype,"btnHalfPot",void 0),a([l(cc.Button)],d.prototype,"btn5Blind",void 0),a([l(cc.Button)],d.prototype,"btn4Blind",void 0),a([l(cc.Button)],d.prototype,"btn3Blind",void 0),d=a([c,h("Lobby/RaiseLayer")],d),i.default=d,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../MobileKit/MKIndex":"MKIndex","./Common/UIUtils":"UIUtils"}],RecordCell:[function(e,t,i){"use strict";cc._RF.push(t,"75785MACgRG245YrCnREBEz","RecordCell");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.RecordCell=void 0;const s=e("../../MobileKit/MKIndex"),o=e("../Common/UIUtils"),{ccclass:n,property:r,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.txtDate=null,this.txtTime=null,this.txtWin=null}onLoad(){}setData(e){this.txtDate.string=s.Utils.dateFormat("dd.mm.YYYY",e.time),this.txtTime.string=s.Utils.dateFormat("HH:MM:SS",e.time),this.txtBalance.string=o.UIUtils.getShortNumber(e.balance),e.isWin?(this.txtWin.node.color=cc.Color.GREEN,this.txtWin.string="WIN",this.txtBalance.node.color=cc.Color.GREEN):(this.txtWin.node.color=cc.Color.RED,this.txtWin.string="LOST",this.txtBalance.node.color=cc.Color.RED)}};a([r(cc.Label)],l.prototype,"txtBalance",void 0),a([r(cc.Label)],l.prototype,"txtDate",void 0),a([r(cc.Label)],l.prototype,"txtTime",void 0),a([r(cc.Label)],l.prototype,"txtWin",void 0),l=a([n,c("Lobby/RecordCell")],l),i.RecordCell=l,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],RecordPage:[function(e,t,i){"use strict";cc._RF.push(t,"dd16dRnmJBB2IlydX2gyB4C","RecordPage");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.RecordPage=void 0;const s=e("../../Business/Data/CommonDefine"),o=e("./RecordCell"),n=e("../Common/PrefabPool"),{ccclass:r,property:c,menu:l}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.recordNode=null,this.recordCellList=[]}onLoad(){for(let e=0;e<10;e++){let e=n.default.get(s.PrefabList.RecordCell),t=e.getComponent(o.RecordCell);e.setParent(this.recordNode),e.active=!1,this.recordCellList.push(t)}}setRecordList(e){this.showRecordList(e)}showRecordList(e){e.forEach((e,t)=>{this.recordCellList[t].setData(e),this.recordCellList[t].node.active=!0})}};a([c(cc.Node)],h.prototype,"recordNode",void 0),h=a([r,l("Lobby/RecordPage")],h),i.RecordPage=h,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../Common/PrefabPool":"PrefabPool","./RecordCell":"RecordCell"}],ResultCell:[function(e,t,i){"use strict";cc._RF.push(t,"57f5aPH8ohO6LqeOpWQVm3U","ResultCell");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("./Common/UIUtils"),n=e("./PokerNode"),r=e("../Business/Data/CommonDefine"),c=e("./Common/PrefabPool"),{ccclass:l,property:h,menu:d}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.txtName=null,this.txtChips=null,this.txtScore=null,this.imgWinner=null,this.imgItemBg=null,this.txtLost=null,this.panelHandCards=null,this.circleList=[],this.jokerPoint=-1,this.handCardsList=null}onLoad(){let e=[];for(let t=0;t<r.DEAL_CARDS_COUNT;++t){let t=c.default.get(r.PrefabList.PokerNode).getComponent(n.default);t.node.active=!1,this.panelHandCards.addChild(t.node),e.push(t),t.node.scale=.35}this.handCardsList=e}onDestroy(){}setData(e,t){this.jokerPoint=t,this.txtName.string=s.Utils.strMaxCut(e.getNickName(),12),this.txtChips.string=o.UIUtils.getShortNumber(e.getWinLose()),e.isWinner()?(this.imgWinner.node.active=!0,this.txtLost.node.active=!1,this.imgItemBg.node.active=!0,this.circleList.forEach(e=>{e.color=(new cc.Color).fromHEX("#FFCD69")})):(this.imgWinner.node.active=!1,this.txtLost.node.active=!0,this.imgItemBg.node.active=!1,this.circleList.forEach(e=>{e.color=cc.Color.WHITE}))}};a([h(cc.Label)],u.prototype,"txtName",void 0),a([h(cc.Label)],u.prototype,"txtChips",void 0),a([h(cc.Label)],u.prototype,"txtScore",void 0),a([h(cc.Sprite)],u.prototype,"imgWinner",void 0),a([h(cc.Sprite)],u.prototype,"imgItemBg",void 0),a([h(cc.Label)],u.prototype,"txtLost",void 0),a([h(cc.Node)],u.prototype,"panelHandCards",void 0),a([h([cc.Node])],u.prototype,"circleList",void 0),u=a([l],u),i.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],ResultLayer:[function(e,t,i){"use strict";cc._RF.push(t,"1ed4fNOYxdAtIAHOWSyYuDz","ResultLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../MobileKit/MKIndex"),o=e("../Business/Data/DataManager"),n=e("./ResultCell"),r=e("../Business/Logic/GameNotice"),c=e("./Common/PopupBase"),{ccclass:l,property:h,menu:d}=cc._decorator;let u=class extends c.default{constructor(){super(...arguments),this.item=null,this.listContent=null,this.txtTips=null}onLoad(){this.item.active=!1,this.setListData(),this.showStartingTips(o.default.gameData.getStageLeftTime()),s.noticeCenter.registAllNotice(this)}onDestroy(){s.noticeCenter.targetOff(this)}setDelayShow(e){if(e>0){this.node.opacity=0;let t=cc.tween(this.node);t.delay(e),t.set({opacity:255}),t.start()}}onTouchClose(){this.hide()}onNtcPrepare(){this.showStartingTips(o.default.gameData.getStageLeftTime())}setListData(){let e=o.default.gameData.getResultData(),t=e.players;for(let i=0;i<t.length;++i){let a=cc.instantiate(this.item).getComponent(n.default);this.listContent.addChild(a.node),a.node.active=!0,a.setData(t[i],e.jokerPoint)}}showStartingTips(e){if(e<=0)return;e>30&&(e=30);let t=Math.floor(e)-1;if(t<=0)return void(this.txtTips.node.active=!1);this.txtTips.node.active=!0;let i=cc.tween(this.node);for(let a=t;a>0;a--)i.call(()=>{this.txtTips.string=s.LocalLang.get("game_result_new_game",[a])}),i.delay(1);i.call(()=>{this.txtTips.node.active=!1,this.hide()}),this.node.stopAllActions(),i.start()}};a([h(cc.Node)],u.prototype,"item",void 0),a([h(cc.Node)],u.prototype,"listContent",void 0),a([h(cc.Label)],u.prototype,"txtTips",void 0),a([s.onNotice(r.NtcDealCards)],u.prototype,"onTouchClose",null),a([s.onNotice(r.NtcPrepare)],u.prototype,"onNtcPrepare",null),u=a([l],u),i.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./ResultCell":"ResultCell"}],SaveDataManager:[function(e,t,i){"use strict";cc._RF.push(t,"b5bf4wNauFNv7zVDbOkrZQ9","SaveDataManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{static init(){"1"!=cc.sys.localStorage.getItem("storageInited")&&(cc.sys.localStorage.setItem("isGameInitialized",1),cc.sys.localStorage.setItem("isEffect",1),cc.sys.localStorage.setItem("EffectVolume","1.0"),cc.sys.localStorage.setItem("isMusic",1),cc.sys.localStorage.setItem("MusicVolume","0.5"),cc.sys.localStorage.setItem("login_data",""),cc.sys.localStorage.setItem("update_version","0.0.0"),cc.sys.localStorage.setItem("storageInited",1),cc.sys.localStorage.setItem("AFConversionSource",0))}static setMusiceVolume(e){cc.sys.localStorage.setItem("MusicVolume",e+"")}static getMusiceVolume(){return parseFloat(cc.sys.localStorage.getItem("MusicVolume"))}static setEffectVolume(e){cc.sys.localStorage.setItem("EffectVolume",e+"")}static getEffectVolume(){return parseFloat(cc.sys.localStorage.getItem("EffectVolume"))}static setEffectEnable(e){cc.sys.localStorage.setItem("isEffect",e?1:-1)}static getEffectEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isEffect"))}static setMusicEnable(e){cc.sys.localStorage.setItem("isMusic",e?1:-1)}static getMusicEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isMusic"))}static setLoginData(e){cc.sys.localStorage.setItem("login_data",e)}static getLoginData(){return cc.sys.localStorage.getItem("login_data")}static setUpdateVersion(e){cc.sys.localStorage.setItem("update_version",e)}static getUpdateVersion(){return cc.sys.localStorage.getItem("update_version")}static setLastLoginTime(e){cc.sys.localStorage.setItem("last_login_time",e)}static getLastLoginTime(){return Number(cc.sys.localStorage.getItem("last_login_time"))}},cc._RF.pop()},{}],SceneController:[function(e,t,i){"use strict";cc._RF.push(t,"0e547EKRatPwbOjldagOfi/","SceneController");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.SceneController=i.CmdScene=void 0;const s=e("../../MobileKit/MKIndex"),o=e("../Data/CommonDefine");let n=class{constructor(e){this.sceneType=e}};n=a([s.createCommand],n),i.CmdScene=n;class r extends s.Controller{constructor(){super(),this.setName("SceneController"),s.commandCenter.registAllCommand(this)}onCmdScene(e){let t=e.sceneType,i=null;t===o.SceneType.Game?i="Game":t==o.SceneType.Loading?i="Loading":t==o.SceneType.Lobby&&(i="Lobby"),null!=i&&cc.director.loadScene(i)}}a([s.onCommand(n)],r.prototype,"onCmdScene",null),i.SceneController=r,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Data/CommonDefine":"CommonDefine"}],ScrollBarEnhance:[function(e,t,i){"use strict";cc._RF.push(t,"b1e2dgHsFtEUJDgCS9zOo13","ScrollBarEnhance");var a,s=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.ScrollBarEnhance=void 0;const{ccclass:o,property:n,requireComponent:r,menu:c}=cc._decorator;let l=a=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.renderEvent=[],this.vSlider=null}static creatEventHandler(e,t,i){const a=new cc.Component.EventHandler;return a.target=e,a.component=t,a.handler=i,a}refresh(e){let t,i=this.vSlider||this.node.getComponent(cc.Slider);t=Math.min(e,1),t=Math.max(e,0),i.progress=t,this.onSliderEvent(i,"")}start(){this.addScrollChildIndex()}addScrollChildIndex(){const e=this.scrollView;this.vSlider=this.node.getComponent(cc.Slider);let t=cc.js.getClassName(this);this.vSlider.slideEvents.push(a.creatEventHandler(this.node,t,"onSliderEvent")),e.scrollEvents.push(a.creatEventHandler(this.node,t,"onScrollEvent")),this.scrollMoveEvent()}onScrollEvent(e,t,i){switch(t){case cc.ScrollView.EventType.SCROLL_BEGAN:case cc.ScrollView.EventType.SCROLL_ENDED:break;case cc.ScrollView.EventType.SCROLLING:this.scrollMoveEvent()}}scrollMoveEvent(){let e,t;this.scrollView.vertical?(e=this.scrollView.getMaxScrollOffset().y,t=this.scrollView.getScrollOffset().y):(e=this.scrollView.getMaxScrollOffset().x,t=-1*this.scrollView.getScrollOffset().x),this.vSlider.progress=t/e>0&&t/e<1?t/e:t/e<=0?0:1,this.renderEvent&&this.renderEvent.length&&cc.Component.EventHandler.emitEvents(this.renderEvent,this.vSlider.progress)}onSliderEvent(e,t){let i=0,a=0;this.scrollView.vertical?(i=this.scrollView.getScrollOffset().x,a=this.scrollView.getMaxScrollOffset().y*e.progress):(i=this.scrollView.getMaxScrollOffset().x*e.progress,a=this.scrollView.getScrollOffset().y),this.scrollView.scrollToOffset(cc.v2(i,a),.05)}};s([n({tooltip:"\u5bf9\u5e94\u7684\uff08ScrollView\uff09\u6ed1\u52a8\u5217\u8868",type:cc.ScrollView})],l.prototype,"scrollView",void 0),s([n({type:[cc.Component.EventHandler],tooltip:!1})],l.prototype,"renderEvent",void 0),l=a=s([o,r(cc.Slider),c("\u7ec4\u4ef6\u5e93/ScrollBarEnhance")],l),i.ScrollBarEnhance=l,cc._RF.pop()},{}],TapStartLayer:[function(e,t,i){"use strict";cc._RF.push(t,"8af22+ff8xIEZPrZ9IIR4Zu","TapStartLayer");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:o,menu:n}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.innerCircle=null,this.outerCircle=null}static get path(){return"Scenes/Game/award_layer"}onLoad(){cc.tween(this.innerCircle).to(.7,{scale:1.2},{easing:"smooth"}).to(.5,{scale:1},{easing:"smooth"}).union().repeatForever().start(),cc.tween(this.outerCircle).to(.7,{scale:3,opacity:0},{easing:"smooth"}).to(0,{scale:1,opacity:255},{easing:"smooth"}).delay(.5).union().repeatForever().start(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this)}onTouchStart(){cc.tween(this.node).by(.3,{y:this.node.height},{easing:"smooth"}).call(()=>{this.node.active=!1}).start()}};a([o(cc.Node)],r.prototype,"innerCircle",void 0),a([o(cc.Node)],r.prototype,"outerCircle",void 0),r=a([s],r),i.default=r,cc._RF.pop()},{}],UIUtils:[function(e,t,i){"use strict";cc._RF.push(t,"42718I/3LJJtKtCYuOhAlRx","UIUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIUtils=i.UnitKilo=i.UnitLakh=i.UnitCrore=void 0;const a=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),o=e("../../Business/Data/CommonDefine");i.UnitCrore=1e7,i.UnitLakh=1e5,i.UnitKilo=1e3;class n{static getIndiaFormat(e){let t=e<0,i=t?String(-e):String(e),a=[],s=i.indexOf(".");if(-1===s)s=i.length;else{for(let e=i.length-1;e>s;e--)a.push(i[e]);a.push(".")}s--;for(let o=0;s>=0;s--,o++)o>2&&o%2==1&&a.push(","),a.push(i[s]);return t&&a.push("-"),a.reverse().join("")}static getShortStr(e,t,i){let a=e/t;return Math.floor(100*a)/100+i}static getSeparatorNumber(e,t=!1){let i=e%1;i=Math.floor(100*(i+cc.macro.FLT_EPSILON))/100;let a=Math.floor(e).toString(),s="",o=0,n=a.length;for(;o<n;){let e=n-o;e>10?(s=s+a.substr(o,n-10)+",",o=n-10):e>7?(s=s+a.substr(o,n-7)+",",o=n-7):e>5?(s=s+a.substr(o,n-5)+",",o=n-5):e>3?(s=s+a.substr(o,n-3)+",",o=n-3):(s+=a.substr(o,n),o=n)}return s}static cardFly(e,t,i,a,s,o,n){return new Promise(r=>{const c=cc.tween,l=s,h=null!=o?o:e.angle;e.scale=a,e.opacity=255,e.setPosition(t),c(e).to(l,{x:i.x,y:i.y,angle:h},{easing:"smooth"}).call(()=>{n&&n()}).call(r).start()})}static flipToFront(e,t,i,a){return new Promise(s=>{const o=cc.tween,n=t/2,r=e.angle;o(e).to(n,{eulerAngles:cc.v3(0,-270,r)},{easing:"quadIn"}).call(()=>{i&&i()}).to(n,{eulerAngles:cc.v3(0,0,r)},{easing:"quadOut"}).call(()=>{a&&a()}).call(s).start()})}static flipToBack(e,t,i,a){return new Promise(s=>{const o=cc.tween,n=t,r=n/2;o(e).to(n,{scale:1}).start(),o(e).to(r,{eulerAngles:cc.v3(0,-90,0)},{easing:"quadIn"}).call(()=>{i&&i()}).to(r,{eulerAngles:cc.v3(0,-180,0)},{easing:"quadOut"}).call(()=>{a&&a()}).call(s).start()})}static ButtonEvent(e,t,i=.1){e.node.on(cc.Node.EventType.TOUCH_END,()=>{e.interactable?(a.AudioEngine.playEffect(o.SoundList.Click),i>0&&(e.interactable=!1,window.setTimeout(()=>{e&&(e.interactable=!0)},1e3*i)),t()):a.AudioEngine.playEffect(o.SoundList.BtnWrong)})}static NodeClickEvent(e,t){e.on(cc.Node.EventType.TOUCH_END,()=>{a.AudioEngine.playEffect(o.SoundList.Click),t()})}static nodeToNewParent(e,t){let i=e.parent.convertToWorldSpaceAR(e.position),a=t.convertToNodeSpaceAR(i);e.setPosition(a),e.setParent(t)}static posTransform(e,t){let i=t.parent.convertToWorldSpaceAR(t.position);return e.parent.convertToNodeSpaceAR(i)}static setCardType(e,t){let i="";switch(t){case o.CardType.RoyalFlush:i="Royal Flush";break;case o.CardType.StraightFlush:i="Straight Flush";break;case o.CardType.FourKind:i="Four of a Kind";break;case o.CardType.Fullhouse:i="Fullhouse";break;case o.CardType.Flush:i="Flush";break;case o.CardType.Straight:i="Straight";break;case o.CardType.ThreeKind:i="Three of a kind";break;case o.CardType.TwoPairs:i="Two Pairs";break;case o.CardType.OnePair:i="One Pair";break;case o.CardType.Highcard:i="High card"}e.getComponentInChildren(cc.Label).string=i}static setChipType(e,t){let i=0,a=s.default.homeData.getChipLst();for(let s=0;s<a.length;s++){let e=a[s],o=a[s+1];s==a.length-1?e<=t&&(i=s):e<=t&&t<o&&(i=s)}e.spriteFrame=cc.resources.get("Texture/Game/Chip/chip_normal"+i,cc.SpriteFrame)}}i.UIUtils=n,n.getShortNumber=function(e,t,a){e/=s.default.homeData.getChipsUnit();let o,r=Math.abs(e);return o=r>=i.UnitCrore?n.getShortStr(r,i.UnitCrore,"Cr"):r>=i.UnitLakh?n.getShortStr(r,i.UnitLakh,"L"):n.getSeparatorNumber(r,t),e<0?o="-"+o:e>0&&a&&(o="+"+o),o},cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex"}],UserData:[function(e,t,i){"use strict";cc._RF.push(t,"dad16pPzIBPJKEhCrLrDRq7","UserData"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[],this.m_isGotRecord=!1,this.reset()}reset(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[]}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setToken(e){this.m_token=e}getToken(){return this.m_token}setLogined(e){this.m_isLogined=e}isLogined(){return this.m_isLogined}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getBalance(){return this.m_balance}setBalance(e){this.m_balance=e}getGameRecordLst(){return this.m_gameRecordLst}setGameRecordLst(e){this.m_gameRecordLst=e}isGotRecord(){return this.m_isGotRecord}setGotRecord(e){this.m_isGotRecord=e}},cc._RF.pop()},{}],i18nLabel:[function(e,t,i){"use strict";cc._RF.push(t,"3e7e1yL3ltF4Ld2ONOefDbB","i18nLabel");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.i18nLabel=void 0;const s=e("./MKLocalLang"),{ccclass:o,property:n,executeInEditMode:r,disallowMultiple:c,requireComponent:l,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.i18n_string="",this.i18n_params=[]}start(){s.LocalLang._addOrDelLabel(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e,this.setEndValue()}get params(){return this.i18n_params}set params(e){this.i18n_params=e,this.setEndValue()}init(e,t){this.i18n_string=e,this.i18n_params=t,this.setEndValue()}setEndValue(){let e=this.getComponent(cc.Label);cc.isValid(e)&&(e.string=s.LocalLang.get(this.i18n_string,this.i18n_params))}_resetValue(){this.string=this.i18n_string}onDestroy(){s.LocalLang._addOrDelLabel(this,!1)}};a([n({visible:!1})],d.prototype,"i18n_string",void 0),a([n({visible:!1})],d.prototype,"i18n_params",void 0),a([n({type:cc.String})],d.prototype,"string",null),a([n({type:[cc.String]})],d.prototype,"params",null),d=a([o,r,l(cc.Label),c,h("\u591a\u8bed\u8a00/i18nLabel")],d),i.i18nLabel=d,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],i18nSprite:[function(e,t,i){"use strict";cc._RF.push(t,"a8777HUMEtKZKZSmfQV4Q10","i18nSprite");var a=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0}),i.i18nSprite=void 0;const s=e("./MKLocalLang"),{ccclass:o,property:n,executeInEditMode:r,disallowMultiple:c,requireComponent:l,menu:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.i18n_string=""}start(){s.LocalLang._addOrDelSprite(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e;let t=this.getComponent(cc.Sprite);cc.isValid(t)&&s.LocalLang._getSprite(e,e=>{cc.isValid(t)&&(t.spriteFrame=e)})}_resetValue(){this.string=this.i18n_string}onDestroy(){s.LocalLang._addOrDelSprite(this,!1)}};a([n({visible:!1})],d.prototype,"i18n_string",void 0),a([n({type:cc.String})],d.prototype,"string",null),d=a([o,r,l(cc.Sprite),c,h("\u591a\u8bed\u8a00/i18nSprite")],d),i.i18nSprite=d,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}]},{},["BroadcastData","CommonDefine","ConfigManager","DataManager","GameData","HandCardsData","HomeData","PlayerData","PokerData","SaveDataManager","UserData","GameController","GameNotice","SceneController","GameSocket","HttpUtils","NetworkConstants","NetworkController","NetworkManager","NetworkNotice","HeartBeatHandler","MKAudioEngine","MKCryptoUtils","MKImageDownloader","MKLocalLang","MKSystem","MKUtils","i18nLabel","i18nSprite","ClickSoundComponent","MKActionQueue","MKCommandCenter","MKNoticeCenter","MKIndex","MKHttp","MKSocket","BroadcastCell","ConfirmDialog","GradientColor","MessageView","PopupBase","PopupManager","PrefabPool","ScrollBarEnhance","UIUtils","DropLayer","GameAction","GameScene","HelpLayer","InforLayer","LanguageLayer","LoadingConfig","LoadingScene","FilterCell","GameEntryCell","GameRecordLayer","LobbyScene","RecordCell","RecordPage","MenuLayer","PlayerNode","PokerNode","RaiseLayer","ResultCell","ResultLayer","TapStartLayer"]);